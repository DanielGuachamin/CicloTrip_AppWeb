"use strict";(self.webpackChunkgpsfire=self.webpackChunkgpsfire||[]).push([[179],{2011:(at,Se,L)=>{L.d(Se,{Dh:()=>fe,GT:()=>he,cc:()=>Re,hO:()=>Ue,on:()=>H,pX:()=>se,xv:()=>ge});var f=L(4650),ne=L(127),O=L(5813);at=L.hmd(at);const ue=["ngOnDestroy"],se=(pe,Ye,st,Me={})=>new Proxy(pe,{get:(Ee,be)=>st.runOutsideAngular(()=>{var je;if(pe[be])return!(null===(je=Me?.spy)||void 0===je)&&je.get&&Me.spy.get(be,pe[be]),pe[be];if(ue.indexOf(be)>-1)return()=>{};const Ge=Ye.toPromise().then(j=>{const _e=j&&j[be];return"function"==typeof _e?_e.bind(j):_e&&_e.then?_e.then(Q=>st.run(()=>Q)):st.run(()=>_e)});return new Proxy(()=>{},{get:(j,_e)=>Ge[_e],apply:(j,_e,Q)=>Ge.then(te=>{var oe;const re=te&&te(...Q);return!(null===(oe=Me?.spy)||void 0===oe)&&oe.apply&&Me.spy.apply(be,Q,re),re})})})}),he=(pe,Ye)=>{Ye.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(Me=>{Object.defineProperty(pe.prototype,Me,Object.getOwnPropertyDescriptor(st.prototype||st,Me))})})};class ce{constructor(Ye){return Ye}}const fe=new f.OlP("angularfire2.app.options"),ge=new f.OlP("angularfire2.app.name");function H(pe,Ye,st){const Ee="object"==typeof st&&st||{};Ee.name=Ee.name||"string"==typeof st&&st||"[DEFAULT]";const je=ne.Z.apps.filter(Ge=>Ge&&Ge.name===Ee.name)[0]||Ye.runOutsideAngular(()=>ne.Z.initializeApp(pe,Ee));try{JSON.stringify(pe)!==JSON.stringify(je.options)&&G("error",`${je.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(je)}const G=(pe,...Ye)=>{(0,f.X6Q)()&&typeof console<"u"&&console[pe](...Ye)},X={provide:ce,useFactory:H,deps:[fe,f.R0b,[new f.FiY,ge]]};let Ue=(()=>{class pe{constructor(st){ne.Z.registerVersion("angularfire",O.q4.full,"core"),ne.Z.registerVersion("angularfire",O.q4.full,"app-compat"),ne.Z.registerVersion("angular",f.q4F.full,st.toString())}static initializeApp(st,Me){return{ngModule:pe,providers:[{provide:fe,useValue:st},{provide:ge,useValue:Me}]}}}return pe.\u0275fac=function(st){return new(st||pe)(f.LFG(f.Lbi))},pe.\u0275mod=f.oAB({type:pe}),pe.\u0275inj=f.cJS({providers:[X]}),pe})();function Re(pe,Ye,st,Me,Ee){const[,be,je]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===pe)||[];if(be)return function Ie(pe,Ye){try{return pe.toString()===Ye.toString()}catch{return pe===Ye}}(Ee,je)||(ve("error",`${Ye} was already initialized on the ${st} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:Ee,was:je})),be;{const Ge=Me();return globalThis.\u0275AngularfireInstanceCache.push([pe,Ge,Ee]),Ge}}const tt=!!at.hot,ve=(pe,...Ye)=>{(0,f.X6Q)()&&typeof console<"u"&&console[pe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,Se,L)=>{L.d(Se,{q4:()=>ko,iC:()=>In,HU:()=>Oo,vb:()=>Po,JM:()=>gc});var f=L(4650),ne=L(5867),O=L(5861),ue=L(9681),se=L(2090),he=L(4859),ce=L(1877),fe=L(8766);const ge="@firebase/installations",H="0.5.12",X=`w:${H}`,Ue="FIS_v2",Ye=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(b){return b instanceof se.ZR&&b.code.includes("request-failed")}function Me({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Ee(b){return{token:b.token,requestStatus:2,expiresIn:te(b.expiresIn),creationTime:Date.now()}}function be(b,T){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(b,T){const V=(yield T.json()).error;return Ye.create("request-failed",{requestName:b,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Ge({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function j(b,{refreshToken:T}){const x=Ge(b);return x.append("Authorization",function oe(b){return`${Ue} ${b}`}(T)),x}function _e(b){return Q.apply(this,arguments)}function Q(){return(Q=(0,O.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function te(b){return Number(b.replace("s","000"))}function re(b,T){return Le.apply(this,arguments)}function Le(){return(Le=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:x}){const V=Me(b),J=Ge(b),ie=T.getImmediate({optional:!0});if(ie){const It=yield ie.getHeartbeatsHeader();It&&J.append("x-firebase-client",It)}const He={method:"POST",headers:J,body:JSON.stringify({fid:x,authVersion:Ue,appId:b.appId,sdkVersion:X})},ft=yield _e(()=>fetch(V,He));if(ft.ok){const It=yield ft.json();return{fid:It.fid||x,registrationStatus:2,refreshToken:It.refreshToken,authToken:Ee(It.authToken)}}throw yield be("Create Installation",ft)})).apply(this,arguments)}function Fe(b){return new Promise(T=>{setTimeout(T,b)})}const Wt=/^[cdef][\w-]{21}$/;function qe(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function an(b){return function dt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Wt.test(x)?x:""}catch{return""}}function On(b){return`${b.appName}!${b.appId}`}const Qt=new Map;function Jt(b,T){const x=On(b);un(x,T),function _o(b,T){const x=function Tr(){return!ai&&"BroadcastChannel"in self&&(ai=new BroadcastChannel("[Firebase] FID Change"),ai.onmessage=b=>{un(b.data.key,b.data.fid)}),ai}();x&&x.postMessage({key:b,fid:T}),function kr(){0===Qt.size&&ai&&(ai.close(),ai=null)}()}(x,T)}function un(b,T){const x=Qt.get(b);if(x)for(const V of x)V(T)}let ai=null;const ui="firebase-installations-store";let Ii=null;function pt(){return Ii||(Ii=(0,fe.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(ui)}})),Ii}function gn(b,T){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,O.Z)(function*(b,T){const x=On(b),J=(yield pt()).transaction(ui,"readwrite"),ie=J.objectStore(ui),Ae=yield ie.get(x);return yield ie.put(T,x),yield J.done,(!Ae||Ae.fid!==T.fid)&&Jt(b,T.fid),T})).apply(this,arguments)}function Fn(b){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,O.Z)(function*(b){const T=On(b),V=(yield pt()).transaction(ui,"readwrite");yield V.objectStore(ui).delete(T),yield V.done})).apply(this,arguments)}function zi(b,T){return An.apply(this,arguments)}function An(){return(An=(0,O.Z)(function*(b,T){const x=On(b),J=(yield pt()).transaction(ui,"readwrite"),ie=J.objectStore(ui),Ae=yield ie.get(x),He=T(Ae);return void 0===He?yield ie.delete(x):yield ie.put(He,x),yield J.done,He&&(!Ae||Ae.fid!==He.fid)&&Jt(b,He.fid),He})).apply(this,arguments)}function _n(b){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*(b){let T;const x=yield zi(b.appConfig,V=>{const J=mn(V),ie=nt(b,J);return T=ie.registrationPromise,ie.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function mn(b){return Wn(b||{fid:qe(),registrationStatus:0})}function nt(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function Ke(b,T){return Ko.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:cr(b)}:{installationEntry:T}}function Ko(){return(Ko=(0,O.Z)(function*(b,T){try{const x=yield re(b,T);return gn(b.appConfig,x)}catch(x){throw st(x)&&409===x.customData.serverCode?yield Fn(b.appConfig):yield gn(b.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function cr(b){return vn.apply(this,arguments)}function vn(){return(vn=(0,O.Z)(function*(b){let T=yield Pt(b.appConfig);for(;1===T.registrationStatus;)yield Fe(100),T=yield Pt(b.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:V}=yield _n(b);return V||x}return T})).apply(this,arguments)}function Pt(b){return zi(b,T=>{if(!T)throw Ye.create("installation-not-found");return Wn(T)})}function Wn(b){return function Vs(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Xt(b,T){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:T},x){const V=Vt(b,x),J=j(b,x),ie=T.getImmediate({optional:!0});if(ie){const It=yield ie.getHeartbeatsHeader();It&&J.append("x-firebase-client",It)}const He={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:X,appId:b.appId}})},ft=yield _e(()=>fetch(V,He));if(ft.ok)return Ee(yield ft.json());throw yield be("Generate Auth Token",ft)})).apply(this,arguments)}function Vt(b,{fid:T}){return`${Me(b)}/${T}/authTokens:generate`}function Y(b){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(b,T=!1){let x;const V=yield zi(b.appConfig,ie=>{if(!ut(ie))throw Ye.create("not-registered");const Ae=ie.authToken;if(!T&&dn(Ae))return ie;if(1===Ae.requestStatus)return x=B(b,T),ie;{if(!navigator.onLine)throw Ye.create("app-offline");const He=Jn(ie);return x=Te(b,He),He}});return x?yield x:V.authToken})).apply(this,arguments)}function B(b,T){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(b,T){let x=yield $(b.appConfig);for(;1===x.authToken.requestStatus;)yield Fe(100),x=yield $(b.appConfig);const V=x.authToken;return 0===V.requestStatus?Y(b,T):V})).apply(this,arguments)}function $(b){return zi(b,T=>{if(!ut(T))throw Ye.create("not-registered");return function rt(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Te(b,T){return Be.apply(this,arguments)}function Be(){return(Be=(0,O.Z)(function*(b,T){try{const x=yield Xt(b,T),V=Object.assign(Object.assign({},T),{authToken:x});return yield gn(b.appConfig,V),x}catch(x){if(!st(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield gn(b.appConfig,V)}else yield Fn(b.appConfig);throw x}})).apply(this,arguments)}function ut(b){return void 0!==b&&2===b.registrationStatus}function dn(b){return 2===b.requestStatus&&!function en(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function Jn(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function wn(){return(wn=(0,O.Z)(function*(b){const T=b,{installationEntry:x,registrationPromise:V}=yield _n(T);return V?V.catch(console.error):Y(T).catch(console.error),x.fid})).apply(this,arguments)}function yr(){return(yr=(0,O.Z)(function*(b,T=!1){const x=b;return yield $e(x),(yield Y(x,T)).token})).apply(this,arguments)}function $e(b){return vt.apply(this,arguments)}function vt(){return(vt=(0,O.Z)(function*(b){const{registrationPromise:T}=yield _n(b);T&&(yield T)})).apply(this,arguments)}function At(b){return Ye.create("missing-app-config-values",{valueName:b})}const Wa="installations",bn=b=>{const T=b.getProvider("app").getImmediate(),x=function Us(b){if(!b||!b.options)throw At("App Configuration");if(!b.name)throw At("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!b.options[x])throw At(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ue._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Bs=b=>{const T=b.getProvider("app").getImmediate(),x=(0,ue._getProvider)(T,Wa).getImmediate();return{getId:()=>function hn(b){return wn.apply(this,arguments)}(x),getToken:J=>function dr(b){return yr.apply(this,arguments)}(x,J)}};(function _r(){(0,ue._registerComponent)(new he.wA(Wa,bn,"PUBLIC")),(0,ue._registerComponent)(new he.wA("installations-internal",Bs,"PRIVATE"))})(),(0,ue.registerVersion)(ge,H),(0,ue.registerVersion)(ge,H,"esm2017");const js="@firebase/remote-config",Ot=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Hg{constructor(T,x,V,J){this.client=T,this.storage=x,this.storageCache=V,this.logger=J}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-x,J=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${J}.`),J}fetch(T){var x=this;return(0,O.Z)(function*(){const[V,J]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(J&&x.isCachedDataFresh(T.cacheMaxAgeMillis,V))return J;T.eTag=J&&J.eTag;const ie=yield x.client.fetch(T),Ae=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Ae.push(x.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Ae),ie})()}}function Ed(b=navigator){return b.languages&&b.languages[0]||b.language}class Yl{constructor(T,x,V,J,ie,Ae){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=V,this.projectId=J,this.apiKey=ie,this.appId=Ae}fetch(T){var x=this;return(0,O.Z)(function*(){var V,J,ie;const[Ae,He]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),It=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ct={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ot={sdk_version:x.sdkVersion,app_instance_id:Ae,app_instance_id_token:He,app_id:x.appId,language_code:Ed()},Zn={method:"POST",headers:Ct,body:JSON.stringify(ot)},Yr=fetch(It,Zn),bu=new Promise((Qr,Fo)=>{T.signal.addEventListener(()=>{const Df=new Error("The operation was aborted.");Df.name="AbortError",Fo(Df)})});let Ni;try{yield Promise.race([Yr,bu]),Ni=yield Yr}catch(Qr){let Fo="fetch-client-network";throw"AbortError"===(null===(V=Qr)||void 0===V?void 0:V.name)&&(Fo="fetch-timeout"),Ot.create(Fo,{originalErrorMessage:null===(J=Qr)||void 0===J?void 0:J.message})}let ki=Ni.status;const mc=Ni.headers.get("ETag")||void 0;let _a,to;if(200===Ni.status){let Qr;try{Qr=yield Ni.json()}catch(Fo){throw Ot.create("fetch-client-parse",{originalErrorMessage:null===(ie=Fo)||void 0===ie?void 0:ie.message})}_a=Qr.entries,to=Qr.state}if("INSTANCE_STATE_UNSPECIFIED"===to?ki=500:"NO_CHANGE"===to?ki=304:("NO_TEMPLATE"===to||"EMPTY_CONFIG"===to)&&(_a={}),304!==ki&&200!==ki)throw Ot.create("fetch-status",{httpStatus:ki});return{status:ki,eTag:mc,config:_a}})()}}class Gg{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,O.Z)(function*(){const V=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:V}){var J=this;return(0,O.Z)(function*(){yield function Xn(b,T){return new Promise((x,V)=>{const J=Math.max(T-Date.now(),0),ie=setTimeout(x,J);b.addEventListener(()=>{clearTimeout(ie),V(Ot.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const ie=yield J.client.fetch(T);return yield J.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function Id(b){if(!(b instanceof se.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ie))throw ie;const Ae={throttleEndTimeMillis:Date.now()+(0,se.$s)(V),backoffCount:V+1};return yield J.storage.setThrottleMetadata(Ae),J.attemptFetch(T,Ae)}})()}}class Cd{constructor(T,x,V,J,ie){this.app=T,this._client=x,this._storageCache=V,this._storage=J,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ql(b,T){var x;const V=b.target.error||void 0;return Ot.create(T,{originalErrorMessage:V&&(null===(x=V)||void 0===x?void 0:x.message)})}const zs="app_namespace_store";class Dd{constructor(T,x,V,J=function qg(){return new Promise((b,T)=>{var x;try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=J=>{T(Ql(J,"storage-open"))},V.onsuccess=J=>{b(J.target.result)},V.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(zs,{keyPath:"compositeKey"})}}catch(V){T(Ot.create("storage-open",{originalErrorMessage:null===(x=V)||void 0===x?void 0:x.message}))}})}()){this.appId=T,this.appName=x,this.namespace=V,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,O.Z)(function*(){const V=yield x.openDbPromise;return new Promise((J,ie)=>{var Ae;const ft=V.transaction([zs],"readonly").objectStore(zs),It=x.createCompositeKey(T);try{const Ct=ft.get(It);Ct.onerror=ot=>{ie(Ql(ot,"storage-get"))},Ct.onsuccess=ot=>{const Zn=ot.target.result;J(Zn?Zn.value:void 0)}}catch(Ct){ie(Ot.create("storage-get",{originalErrorMessage:null===(Ae=Ct)||void 0===Ae?void 0:Ae.message}))}})})()}set(T,x){var V=this;return(0,O.Z)(function*(){const J=yield V.openDbPromise;return new Promise((ie,Ae)=>{var He;const It=J.transaction([zs],"readwrite").objectStore(zs),Ct=V.createCompositeKey(T);try{const ot=It.put({compositeKey:Ct,value:x});ot.onerror=Zn=>{Ae(Ql(Zn,"storage-set"))},ot.onsuccess=()=>{ie()}}catch(ot){Ae(Ot.create("storage-set",{originalErrorMessage:null===(He=ot)||void 0===He?void 0:He.message}))}})})()}delete(T){var x=this;return(0,O.Z)(function*(){const V=yield x.openDbPromise;return new Promise((J,ie)=>{var Ae;const ft=V.transaction([zs],"readwrite").objectStore(zs),It=x.createCompositeKey(T);try{const Ct=ft.delete(It);Ct.onerror=ot=>{ie(Ql(ot,"storage-delete"))},Ct.onsuccess=()=>{J()}}catch(Ct){ie(Ot.create("storage-delete",{originalErrorMessage:null===(Ae=Ct)||void 0===Ae?void 0:Ae.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Za{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const x=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),J=T.storage.getActiveConfig(),ie=yield x;ie&&(T.lastFetchStatus=ie);const Ae=yield V;Ae&&(T.lastSuccessfulFetchTimestampMillis=Ae);const He=yield J;He&&(T.activeConfig=He)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Di(){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,O.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Xo(){(0,ue._registerComponent)(new he.wA("remote-config",function b(T,{instanceIdentifier:x}){const V=T.getProvider("app").getImmediate(),J=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ot.create("registration-window");if(!(0,se.hl)())throw Ot.create("indexed-db-unavailable");const{projectId:ie,apiKey:Ae,appId:He}=V.options;if(!ie)throw Ot.create("registration-project-id");if(!Ae)throw Ot.create("registration-api-key");if(!He)throw Ot.create("registration-app-id");const ft=new Dd(He,V.name,x=x||"firebase"),It=new Za(ft),Ct=new ce.Yd(js);Ct.logLevel=ce.in.ERROR;const ot=new Yl(J,ue.SDK_VERSION,x,ie,Ae,He),Zn=new Gg(ot,ft),Yr=new Hg(Zn,ft,It,Ct),bu=new Cd(V,Yr,It,ft,Ct);return function fr(b){const T=(0,se.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(bu),bu},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(js,"0.3.11"),(0,ue.registerVersion)(js,"0.3.11","esm2017")}();const ea="/firebase-messaging-sw.js",qi="/firebase-cloud-messaging-push-scope",Eo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",na="google.c.a.c_id",Ya="google.c.a.c_l",Ad="google.c.a.ts",Md="google.c.a.e";var er=(()=>{return(b=er||(er={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",er;var b})();function Or(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xd(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(x),J=new Uint8Array(V.length);for(let ie=0;ie<V.length;++ie)J[ie]=V.charCodeAt(ie);return J}const ra="fcm_token_details_db",$r="fcm_token_object_Store";function Un(b){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(ra))return null;let T=null;return(yield(0,fe.X3)(ra,5,{upgrade:(V=(0,O.Z)(function*(J,ie,Ae,He){var ft;if(ie<2||!J.objectStoreNames.contains($r))return;const It=He.objectStore($r),Ct=yield It.index("fcmSenderId").get(b);if(yield It.clear(),Ct)if(2===ie){const ot=Ct;if(!ot.auth||!ot.p256dh||!ot.endpoint)return;T={token:ot.fcmToken,createTime:null!==(ft=ot.createTime)&&void 0!==ft?ft:Date.now(),subscriptionOptions:{auth:ot.auth,p256dh:ot.p256dh,endpoint:ot.endpoint,swScope:ot.swScope,vapidKey:"string"==typeof ot.vapidKey?ot.vapidKey:Or(ot.vapidKey)}}}else if(3===ie){const ot=Ct;T={token:ot.fcmToken,createTime:ot.createTime,subscriptionOptions:{auth:Or(ot.auth),p256dh:Or(ot.p256dh),endpoint:ot.endpoint,swScope:ot.swScope,vapidKey:Or(ot.vapidKey)}}}else if(4===ie){const ot=Ct;T={token:ot.fcmToken,createTime:ot.createTime,subscriptionOptions:{auth:Or(ot.auth),p256dh:Or(ot.p256dh),endpoint:ot.endpoint,swScope:ot.swScope,vapidKey:Or(ot.vapidKey)}}}}),function(ie,Ae,He,ft){return V.apply(this,arguments)})})).close(),yield(0,fe.Lj)(ra),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),pf(T)?T:null;var V}),Rd.apply(this,arguments)}function pf(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ys="firebase-messaging-store";let Ja=null;function _s(){return Ja||(Ja=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(ys)}})),Ja}function vr(b){return ia.apply(this,arguments)}function ia(){return(ia=(0,O.Z)(function*(b){const T=sa(b),V=yield(yield _s()).transaction(ys).objectStore(ys).get(T);if(V)return V;{const J=yield Un(b.appConfig.senderId);if(J)return yield Ti(b,J),J}})).apply(this,arguments)}function Ti(b,T){return vs.apply(this,arguments)}function vs(){return(vs=(0,O.Z)(function*(b,T){const x=sa(b),J=(yield _s()).transaction(ys,"readwrite");return yield J.objectStore(ys).put(T,x),yield J.done,T})).apply(this,arguments)}function ws(b){return Es.apply(this,arguments)}function Es(){return(Es=(0,O.Z)(function*(b){const T=sa(b),V=(yield _s()).transaction(ys,"readwrite");yield V.objectStore(ys).delete(T),yield V.done})).apply(this,arguments)}function sa({appConfig:b}){return b.appId}const Mn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nd(b,T){return el.apply(this,arguments)}function el(){return(el=(0,O.Z)(function*(b,T){var x;const V=yield De(b),J=bo(T),ie={method:"POST",headers:V,body:JSON.stringify(J)};let Ae;try{Ae=yield(yield fetch(oa(b.appConfig),ie)).json()}catch(He){throw Mn.create("token-subscribe-failed",{errorInfo:null===(x=He)||void 0===x?void 0:x.toString()})}if(Ae.error)throw Mn.create("token-subscribe-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw Mn.create("token-subscribe-no-token");return Ae.token})).apply(this,arguments)}function Xl(b,T){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(b,T){var x;const V=yield De(b),J=bo(T.subscriptionOptions),ie={method:"PATCH",headers:V,body:JSON.stringify(J)};let Ae;try{Ae=yield(yield fetch(`${oa(b.appConfig)}/${T.token}`,ie)).json()}catch(He){throw Mn.create("token-update-failed",{errorInfo:null===(x=He)||void 0===x?void 0:x.toString()})}if(Ae.error)throw Mn.create("token-update-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw Mn.create("token-update-no-token");return Ae.token})).apply(this,arguments)}function Ws(b,T){return tl.apply(this,arguments)}function tl(){return(tl=(0,O.Z)(function*(b,T){var x;const J={method:"DELETE",headers:yield De(b)};try{const Ae=yield(yield fetch(`${oa(b.appConfig)}/${T}`,J)).json();if(Ae.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:Ae.error.message})}catch(ie){throw Mn.create("token-unsubscribe-failed",{errorInfo:null===(x=ie)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function oa({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function De(b){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,O.Z)(function*({appConfig:b,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function bo({p256dh:b,auth:T,endpoint:x,vapidKey:V}){const J={web:{endpoint:x,auth:T,p256dh:b}};return V!==Eo&&(J.web.applicationPubKey=V),J}const Xa=6048e5;function En(b){return eu.apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(b){const T=yield gf(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:Or(T.getKey("auth")),p256dh:Or(T.getKey("p256dh"))},V=yield vr(b.firebaseDependencies);if(V){if(qn(V.subscriptionOptions,x))return Date.now()>=V.createTime+Xa?tu(b,{token:V.token,createTime:Date.now(),subscriptionOptions:x}):V.token;try{yield Ws(b.firebaseDependencies,V.token)}catch(J){console.warn(J)}return aa(b.firebaseDependencies,x)}return aa(b.firebaseDependencies,x)})).apply(this,arguments)}function qs(b){return di.apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(b){const T=yield vr(b.firebaseDependencies);T&&(yield Ws(b.firebaseDependencies,T.token),yield ws(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function tu(b,T){return nu.apply(this,arguments)}function nu(){return(nu=(0,O.Z)(function*(b,T){try{const x=yield Xl(b.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield Ti(b.firebaseDependencies,V),x}catch(x){throw yield qs(b),x}})).apply(this,arguments)}function aa(b,T){return ru.apply(this,arguments)}function ru(){return(ru=(0,O.Z)(function*(b,T){const V={token:yield Nd(b,T),createTime:Date.now(),subscriptionOptions:T};return yield Ti(b,V),V.token})).apply(this,arguments)}function gf(b,T){return $s.apply(this,arguments)}function $s(){return($s=(0,O.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xd(T)})})).apply(this,arguments)}function qn(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function $i(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function iu(b,T){if(!T.notification)return;b.notification={};const x=T.notification.title;x&&(b.notification.title=x);const V=T.notification.body;V&&(b.notification.body=V);const J=T.notification.image;J&&(b.notification.image=J)}(T,b),function Do(b,T){!T.data||(b.data=T.data)}(T,b),function Is(b,T){var x,V,J,ie,Ae;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const He=null!==(J=null===(V=T.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==J?J:null===(ie=T.notification)||void 0===ie?void 0:ie.click_action;He&&(b.fcmOptions.link=He);const ft=null===(Ae=T.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;ft&&(b.fcmOptions.analyticsLabel=ft)}(T,b),T}function ec(b){return"object"==typeof b&&!!b&&na in b}function tc(b,T){const x=[];for(let V=0;V<b.length;V++)x.push(b.charAt(V)),V<T.length&&x.push(T.charAt(V));return x.join("")}function su(b){return Mn.create("missing-app-config-values",{valueName:b})}tc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),tc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class nc{constructor(T,x,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function kd(b){if(!b||!b.options)throw su("App Configuration Object");if(!b.name)throw su("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const V of T)if(!x[V])throw su(V);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:J,installations:x,analyticsProvider:V}}_delete(){return Promise.resolve()}}function To(b){return nl.apply(this,arguments)}function nl(){return(nl=(0,O.Z)(function*(b){var T;try{b.swRegistration=yield navigator.serviceWorker.register(ea,{scope:qi}),b.swRegistration.update().catch(()=>{})}catch(x){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=x)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function ou(b,T){return rc.apply(this,arguments)}function rc(){return(rc=(0,O.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield To(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function ua(b,T){return rl.apply(this,arguments)}function rl(){return(rl=(0,O.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=Eo)})).apply(this,arguments)}function sl(){return(sl=(0,O.Z)(function*(b,T){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield ua(b,T?.vapidKey),yield ou(b,T?.serviceWorkerRegistration),En(b)})).apply(this,arguments)}function ol(b,T,x){return al.apply(this,arguments)}function al(){return(al=(0,O.Z)(function*(b,T,x){const V=la(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:x[na],message_name:x[Ya],message_time:x[Ad],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function la(b){switch(b){case er.NOTIFICATION_CLICKED:return"notification_open";case er.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ul(){return(ul=(0,O.Z)(function*(b,T){const x=T.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===er.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler($i(x)):b.onMessageHandler.next($i(x)));const V=x.data;ec(V)&&"1"===V[Md]&&(yield ol(b,x.messageType,V))})).apply(this,arguments)}const tr="@firebase/messaging",Dn=b=>{const T=new nc(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function mf(b,T){return ul.apply(this,arguments)}(T,x)),T},au=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:V=>function il(b,T){return sl.apply(this,arguments)}(T,V)}};function yf(){return ic.apply(this,arguments)}function ic(){return(ic=(0,O.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pd(){(0,ue._registerComponent)(new he.wA("messaging",Dn,"PUBLIC")),(0,ue._registerComponent)(new he.wA("messaging-internal",au,"PRIVATE")),(0,ue.registerVersion)(tr,"0.9.16"),(0,ue.registerVersion)(tr,"0.9.16","esm2017")}();const Ki="analytics",ca="firebase_id",Zi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lu="https://www.googletagmanager.com/gtag/js",pr=new ce.Yd("@firebase/analytics");function Ef(b){return Promise.all(b.map(T=>T.catch(x=>x)))}function k_(b,T){const x=document.createElement("script");x.src=`${lu}?l=${b}&id=${T}`,x.async=!0,document.head.appendChild(x)}function cu(b,T,x,V,J,ie){return du.apply(this,arguments)}function du(){return(du=(0,O.Z)(function*(b,T,x,V,J,ie){const Ae=V[J];try{if(Ae)yield T[Ae];else{const ft=(yield Ef(x)).find(It=>It.measurementId===J);ft&&(yield T[ft.appId])}}catch(He){pr.error(He)}b("config",J,ie)})).apply(this,arguments)}function Ld(b,T,x,V,J){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(b,T,x,V,J){try{let ie=[];if(J&&J.send_to){let Ae=J.send_to;Array.isArray(Ae)||(Ae=[Ae]);const He=yield Ef(x);for(const ft of Ae){const It=He.find(ot=>ot.measurementId===ft),Ct=It&&T[It.appId];if(!Ct){ie=[];break}ie.push(Ct)}}0===ie.length&&(ie=Object.values(T)),yield Promise.all(ie),b("event",V,J||{})}catch(ie){pr.error(ie)}})).apply(this,arguments)}function hu(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(lu))return T;return null}const wr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Bd=new class Ao{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function fn(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Si(b){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,O.Z)(function*(b){var T;const{appId:x,apiKey:V}=b,J={method:"GET",headers:fn(V)},ie=Zi.replace("{app-id}",x),Ae=yield fetch(ie,J);if(200!==Ae.status&&304!==Ae.status){let He="";try{const ft=yield Ae.json();null!==(T=ft.error)&&void 0!==T&&T.message&&(He=ft.error.message)}catch{}throw wr.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:He})}return Ae.json()})).apply(this,arguments)}function Ht(b){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,O.Z)(function*(b,T=Bd,x){const{appId:V,apiKey:J,measurementId:ie}=b.options;if(!V)throw wr.create("no-app-id");if(!J){if(ie)return{measurementId:ie,appId:V};throw wr.create("no-api-key")}const Ae=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},He=new Cf;return setTimeout((0,O.Z)(function*(){He.abort()}),void 0!==x?x:6e4),da({appId:V,apiKey:J,measurementId:ie},Ae,He,T)})).apply(this,arguments)}function da(b,T,x){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:x},V,J=Bd){var ie,Ae;const{appId:He,measurementId:ft}=b;try{yield Er(V,T)}catch(It){if(ft)return pr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${null===(ie=It)||void 0===ie?void 0:ie.message}]`),{appId:He,measurementId:ft};throw It}try{const It=yield Si(b);return J.deleteThrottleMetadata(He),It}catch(It){const Ct=It;if(!cl(Ct)){if(J.deleteThrottleMetadata(He),ft)return pr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${Ct?.message}]`),{appId:He,measurementId:ft};throw It}const ot=503===Number(null===(Ae=Ct?.customData)||void 0===Ae?void 0:Ae.httpStatus)?(0,se.$s)(x,J.intervalMillis,30):(0,se.$s)(x,J.intervalMillis),Zn={throttleEndTimeMillis:Date.now()+ot,backoffCount:x+1};return J.setThrottleMetadata(He,Zn),pr.debug(`Calling attemptFetch again in ${ot} millis`),da(b,Zn,V,J)}})).apply(this,arguments)}function Er(b,T){return new Promise((x,V)=>{const J=Math.max(T-Date.now(),0),ie=setTimeout(x,J);b.addEventListener(()=>{clearTimeout(ie),V(wr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function cl(b){if(!(b instanceof se.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Cf{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let pu,mu;function Ys(){return(Ys=(0,O.Z)(function*(b,T,x,V,J){if(J&&J.global)b("event",x,V);else{const ie=yield T;b("event",x,Object.assign(Object.assign({},V),{send_to:ie}))}})).apply(this,arguments)}function Ai(b){mu=b}function dl(b){pu=b}function Hd(){return xo.apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(){var b;if(!(0,se.hl)())return pr.warn(wr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(T){return pr.warn(wr.create("indexeddb-unavailable",{errorInfo:null===(b=T)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function Yi(){return(Yi=(0,O.Z)(function*(b,T,x,V,J,ie,Ae){var He;const ft=Ht(b);ft.then(Yr=>{x[Yr.measurementId]=Yr.appId,b.options.measurementId&&Yr.measurementId!==b.options.measurementId&&pr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Yr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Yr=>pr.error(Yr)),T.push(ft);const It=Hd().then(Yr=>{if(Yr)return V.getId()}),[Ct,ot]=yield Promise.all([ft,It]);hu()||k_(ie,Ct.measurementId),mu&&(J("consent","default",mu),Ai(void 0)),J("js",new Date);const Zn=null!==(He=Ae?.config)&&void 0!==He?He:{};return Zn.origin="firebase",Zn.update=!0,null!=ot&&(Zn[ca]=ot),J("config",Ct.measurementId,Zn),pu&&(J("set",pu),dl(void 0)),Ct.measurementId})).apply(this,arguments)}class Mi{constructor(T){this.app=T}_delete(){return delete Sr[this.app.options.appId],Promise.resolve()}}let Sr={},yu=[];const fa={};let uc,gt,Fr="dataLayer",Ro=!1;function xi(b,T,x){!function $n(){const b=[];if((0,se.ru)()&&b.push("This is a browser extension environment."),(0,se.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((V,J)=>`(${J+1}) ${V}`).join(" "),x=wr.create("invalid-analytics-context",{errorInfo:T});pr.warn(x.message)}}();const V=b.options.appId;if(!V)throw wr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw wr.create("no-api-key");pr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Sr[V])throw wr.create("already-exists",{id:V});if(!Ro){!function P_(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(Fr);const{wrappedGtag:ie,gtagCore:Ae}=function If(b,T,x,V,J){let ie=function(...Ae){window[V].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ie=window[J]),window[J]=function Vd(b,T,x,V){function ie(){return(ie=(0,O.Z)(function*(Ae,He,ft){try{"event"===Ae?yield Ld(b,T,x,He,ft):"config"===Ae?yield cu(b,T,x,V,He,ft):"consent"===Ae?b("consent","update",ft):b("set",He)}catch(It){pr.error(It)}})).apply(this,arguments)}return function J(Ae,He,ft){return ie.apply(this,arguments)}}(ie,b,T,x),{gtagCore:ie,wrappedGtag:window[J]}}(Sr,yu,fa,Fr,"gtag");gt=ie,uc=Ae,Ro=!0}return Sr[V]=function Qs(b,T,x,V,J,ie,Ae){return Yi.apply(this,arguments)}(b,yu,fa,T,uc,Fr,x),new Mi(b)}function Lr(){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,O.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Bn="@firebase/analytics";!function lc(){(0,ue._registerComponent)(new he.wA(Ki,(T,{options:x})=>xi(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ue._registerComponent)(new he.wA("analytics-internal",function b(T){try{const x=T.getProvider(Ki).getImmediate();return{logEvent:(V,J,ie)=>function No(b,T,x,V){b=(0,se.m9)(b),function jd(b,T,x,V,J){return Ys.apply(this,arguments)}(gt,Sr[b.app.options.appId],T,x,V).catch(J=>pr.error(J))}(x,V,J,ie)}}catch(x){throw wr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ue.registerVersion)(Bn,"0.8.0"),(0,ue.registerVersion)(Bn,"0.8.0","esm2017")}();var pa=L(4408),ga=L(7565);const cc=new class Mt extends ga.v{}(class _u extends pa.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,x,V):T.flush(this)}});var zd=L(4986),ma=L(8505),on=L(9468),ya=L(5363);const ko=new f.GfV("7.4.1"),dc="__angularfire_symbol__analyticsIsSupportedValue",hc="__angularfire_symbol__analyticsIsSupported",xn="__angularfire_symbol__remoteConfigIsSupportedValue",pi="__angularfire_symbol__remoteConfigIsSupported",vu="__angularfire_symbol__messagingIsSupportedValue",fc="__angularfire_symbol__messagingIsSupported";function gc(b,T,x){if(T){if(1===T.length)return T[0];const ie=T.filter(Ae=>Ae.app===x);if(1===ie.length)return ie[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[hc]||(globalThis[hc]=Lr().then(b=>globalThis[dc]=b).catch(()=>globalThis[dc]=!1)),globalThis[fc]||(globalThis[fc]=yf().then(b=>globalThis[vu]=b).catch(()=>globalThis[vu]=!1)),globalThis[pi]||(globalThis[pi]=Di().then(b=>globalThis[xn]=b).catch(()=>globalThis[xn]=!1));const Po=(b,T)=>{const x=T?[T]:(0,ne.C6)(),V=[];return x.forEach(J=>{J.container.getProvider(b).instances.forEach(Ae=>{V.includes(Ae)||V.push(Ae)})}),V};function Cs(){}class Xi{constructor(T,x=cc){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,V){const J=this.zone;return this.delegate.schedule(function(Ae){J.runGuarded(()=>{T.apply(this,[Ae])})},x,V)}}class pl{constructor(T){this.zone=T,this.task=null}call(T,x){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cs,{},Cs,Cs)),x.pipe((0,ma.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Oo=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Xi(Zone.current)),this.insideAngular=x.run(()=>new Xi(Zone.current,zd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(f.LFG(f.R0b))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Et(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function In(b){return Et(),function Iu(b){return function(x){return(x=x.lift(new pl(b.ngZone))).pipe((0,on.R)(b.outsideAngular),(0,ya.Q)(b.insideAngular))}}(Et())(b)}},2090:(at,Se,L)=>{L.d(Se,{$s:()=>Vs,BH:()=>Ue,DV:()=>kt,Dv:()=>zi,G6:()=>Ge,GJ:()=>Jt,L:()=>fe,LL:()=>Le,Mn:()=>be,Pz:()=>jt,Sg:()=>Re,UG:()=>ve,UI:()=>_o,US:()=>he,Wj:()=>Ls,Yr:()=>je,ZB:()=>G,ZR:()=>re,b$:()=>st,cI:()=>Wt,d:()=>Me,dS:()=>nt,eu:()=>_e,g5:()=>O,gK:()=>An,gQ:()=>Ii,h$:()=>ce,hl:()=>j,hu:()=>ne,jU:()=>pe,lb:()=>mn,m9:()=>Vt,ne:()=>pt,p$:()=>H,pd:()=>ui,r3:()=>Nr,ru:()=>Ye,tV:()=>ge,uI:()=>tt,ug:()=>Ke,vZ:()=>ai,w1:()=>Ee,w9:()=>Qt,xO:()=>Hi,xb:()=>un,z$:()=>Ie,zI:()=>Q,zd:()=>fs});const ne=function(Y,z){if(!Y)throw O(z)},O=function(Y){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Y)},ue=function(Y){const z=[];let B=0;for(let W=0;W<Y.length;W++){let $=Y.charCodeAt(W);$<128?z[B++]=$:$<2048?(z[B++]=$>>6|192,z[B++]=63&$|128):55296==(64512&$)&&W+1<Y.length&&56320==(64512&Y.charCodeAt(W+1))?($=65536+((1023&$)<<10)+(1023&Y.charCodeAt(++W)),z[B++]=$>>18|240,z[B++]=$>>12&63|128,z[B++]=$>>6&63|128,z[B++]=63&$|128):(z[B++]=$>>12|224,z[B++]=$>>6&63|128,z[B++]=63&$|128)}return z},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,z){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,W=[];for(let $=0;$<Y.length;$+=3){const Te=Y[$],Be=$+1<Y.length,ut=Be?Y[$+1]:0,dn=$+2<Y.length,en=dn?Y[$+2]:0;let hn=(15&ut)<<2|en>>6,wn=63&en;dn||(wn=64,Be||(hn=64)),W.push(B[Te>>2],B[(3&Te)<<4|ut>>4],B[hn],B[wn])}return W.join("")},encodeString(Y,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(Y):this.encodeByteArray(ue(Y),z)},decodeString(Y,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(Y):function(Y){const z=[];let B=0,W=0;for(;B<Y.length;){const $=Y[B++];if($<128)z[W++]=String.fromCharCode($);else if($>191&&$<224){const Te=Y[B++];z[W++]=String.fromCharCode((31&$)<<6|63&Te)}else if($>239&&$<365){const dn=((7&$)<<18|(63&Y[B++])<<12|(63&Y[B++])<<6|63&Y[B++])-65536;z[W++]=String.fromCharCode(55296+(dn>>10)),z[W++]=String.fromCharCode(56320+(1023&dn))}else{const Te=Y[B++],Be=Y[B++];z[W++]=String.fromCharCode((15&$)<<12|(63&Te)<<6|63&Be)}}return z.join("")}(this.decodeStringToByteArray(Y,z))},decodeStringToByteArray(Y,z){this.init_();const B=z?this.charToByteMapWebSafe_:this.charToByteMap_,W=[];for(let $=0;$<Y.length;){const Te=B[Y.charAt($++)],ut=$<Y.length?B[Y.charAt($)]:0;++$;const en=$<Y.length?B[Y.charAt($)]:64;++$;const rt=$<Y.length?B[Y.charAt($)]:64;if(++$,null==Te||null==ut||null==en||null==rt)throw Error();W.push(Te<<2|ut>>4),64!==en&&(W.push(ut<<4&240|en>>2),64!==rt&&W.push(en<<6&192|rt))}return W},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},ce=function(Y){const z=ue(Y);return he.encodeByteArray(z,!0)},fe=function(Y){return ce(Y).replace(/\./g,"")},ge=function(Y){try{return he.decodeString(Y,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function H(Y){return G(void 0,Y)}function G(Y,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return z}for(const B in z)!z.hasOwnProperty(B)||!X(B)||(Y[B]=G(Y[B],z[B]));return Y}function X(Y){return"__proto__"!==Y}class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,B)=>{this.resolve=z,this.reject=B})}wrapCallback(z){return(B,W)=>{B?this.reject(B):this.resolve(W),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(B):z(B,W))}}}function Re(Y,z){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const W=z||"demo-project",$=Y.iat||0,Te=Y.sub||Y.user_id;if(!Te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Be=Object.assign({iss:`https://securetoken.google.com/${W}`,aud:W,iat:$,exp:$+3600,auth_time:$,sub:Te,user_id:Te,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(Be)),""].join(".")}function Ie(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function tt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function pe(){return"object"==typeof self&&self.self===self}function Ye(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function st(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return Ie().indexOf("Electron/")>=0}function Ee(){const Y=Ie();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function be(){return Ie().indexOf("MSAppHost/")>=0}function je(){return!1}function Ge(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){return"object"==typeof indexedDB}function _e(){return new Promise((Y,z)=>{try{let B=!0;const W="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(W);$.onsuccess=()=>{$.result.close(),B||self.indexedDB.deleteDatabase(W),Y(!0)},$.onupgradeneeded=()=>{B=!1},$.onerror=()=>{var Te;z((null===(Te=$.error)||void 0===Te?void 0:Te.message)||"")}}catch(B){z(B)}})}function Q(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class re extends Error{constructor(z,B,W){super(B),this.code=z,this.customData=W,this.name="FirebaseError",Object.setPrototypeOf(this,re.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor(z,B,W){this.service=z,this.serviceName=B,this.errors=W}create(z,...B){const W=B[0]||{},$=`${this.service}/${z}`,Te=this.errors[z],Be=Te?function Fe(Y,z){return Y.replace(dt,(B,W)=>{const $=z[W];return null!=$?String($):`<${W}?>`})}(Te,W):"Error";return new re($,`${this.serviceName}: ${Be} (${$}).`,W)}}const dt=/\{\$([^}]+)}/g;function Wt(Y){return JSON.parse(Y)}function jt(Y){return JSON.stringify(Y)}const qe=function(Y){let z={},B={},W={},$="";try{const Te=Y.split(".");z=Wt(ge(Te[0])||""),B=Wt(ge(Te[1])||""),$=Te[2],W=B.d||{},delete B.d}catch{}return{header:z,claims:B,data:W,signature:$}},Qt=function(Y){const B=qe(Y).claims;return!!B&&"object"==typeof B&&B.hasOwnProperty("iat")},Jt=function(Y){const z=qe(Y).claims;return"object"==typeof z&&!0===z.admin};function Nr(Y,z){return Object.prototype.hasOwnProperty.call(Y,z)}function kt(Y,z){if(Object.prototype.hasOwnProperty.call(Y,z))return Y[z]}function un(Y){for(const z in Y)if(Object.prototype.hasOwnProperty.call(Y,z))return!1;return!0}function _o(Y,z,B){const W={};for(const $ in Y)Object.prototype.hasOwnProperty.call(Y,$)&&(W[$]=z.call(B,Y[$],$,Y));return W}function ai(Y,z){if(Y===z)return!0;const B=Object.keys(Y),W=Object.keys(z);for(const $ of B){if(!W.includes($))return!1;const Te=Y[$],Be=z[$];if(Tr(Te)&&Tr(Be)){if(!ai(Te,Be))return!1}else if(Te!==Be)return!1}for(const $ of W)if(!B.includes($))return!1;return!0}function Tr(Y){return null!==Y&&"object"==typeof Y}function Hi(Y){const z=[];for(const[B,W]of Object.entries(Y))Array.isArray(W)?W.forEach($=>{z.push(encodeURIComponent(B)+"="+encodeURIComponent($))}):z.push(encodeURIComponent(B)+"="+encodeURIComponent(W));return z.length?"&"+z.join("&"):""}function fs(Y){const z={};return Y.replace(/^\?/,"").split("&").forEach(W=>{if(W){const[$,Te]=W.split("=");z[decodeURIComponent($)]=decodeURIComponent(Te)}}),z}function ui(Y){const z=Y.indexOf("?");if(!z)return"";const B=Y.indexOf("#",z);return Y.substring(z,B>0?B:void 0)}class Ii{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,B){B||(B=0);const W=this.W_;if("string"==typeof z)for(let rt=0;rt<16;rt++)W[rt]=z.charCodeAt(B)<<24|z.charCodeAt(B+1)<<16|z.charCodeAt(B+2)<<8|z.charCodeAt(B+3),B+=4;else for(let rt=0;rt<16;rt++)W[rt]=z[B]<<24|z[B+1]<<16|z[B+2]<<8|z[B+3],B+=4;for(let rt=16;rt<80;rt++){const hn=W[rt-3]^W[rt-8]^W[rt-14]^W[rt-16];W[rt]=4294967295&(hn<<1|hn>>>31)}let en,Jn,$=this.chain_[0],Te=this.chain_[1],Be=this.chain_[2],ut=this.chain_[3],dn=this.chain_[4];for(let rt=0;rt<80;rt++){rt<40?rt<20?(en=ut^Te&(Be^ut),Jn=1518500249):(en=Te^Be^ut,Jn=1859775393):rt<60?(en=Te&Be|ut&(Te|Be),Jn=2400959708):(en=Te^Be^ut,Jn=3395469782);const hn=($<<5|$>>>27)+en+dn+Jn+W[rt]&4294967295;dn=ut,ut=Be,Be=4294967295&(Te<<30|Te>>>2),Te=$,$=hn}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+Te&4294967295,this.chain_[2]=this.chain_[2]+Be&4294967295,this.chain_[3]=this.chain_[3]+ut&4294967295,this.chain_[4]=this.chain_[4]+dn&4294967295}update(z,B){if(null==z)return;void 0===B&&(B=z.length);const W=B-this.blockSize;let $=0;const Te=this.buf_;let Be=this.inbuf_;for(;$<B;){if(0===Be)for(;$<=W;)this.compress_(z,$),$+=this.blockSize;if("string"==typeof z){for(;$<B;)if(Te[Be]=z.charCodeAt($),++Be,++$,Be===this.blockSize){this.compress_(Te),Be=0;break}}else for(;$<B;)if(Te[Be]=z[$],++Be,++$,Be===this.blockSize){this.compress_(Te),Be=0;break}}this.inbuf_=Be,this.total_+=B}digest(){const z=[];let B=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&B,B/=256;this.compress_(this.buf_);let W=0;for(let $=0;$<5;$++)for(let Te=24;Te>=0;Te-=8)z[W]=this.chain_[$]>>Te&255,++W;return z}}function pt(Y,z){const B=new gn(Y,z);return B.subscribe.bind(B)}class gn{constructor(z,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{z(this)}).catch(W=>{this.error(W)})}next(z){this.forEachObserver(B=>{B.next(z)})}error(z){this.forEachObserver(B=>{B.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,B,W){let $;if(void 0===z&&void 0===B&&void 0===W)throw new Error("Missing Observer.");$=function Fn(Y,z){if("object"!=typeof Y||null===Y)return!1;for(const B of z)if(B in Y&&"function"==typeof Y[B])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:B,complete:W},void 0===$.next&&($.next=Gi),void 0===$.error&&($.error=Gi),void 0===$.complete&&($.complete=Gi);const Te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch{}}),this.observers.push($),Te}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,z)}sendOne(z,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{B(this.observers[z])}catch(W){typeof console<"u"&&console.error&&console.error(W)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gi(){}const zi=function(Y,z,B,W){let $;if(W<z?$="at least "+z:W>B&&($=0===B?"none":"no more than "+B),$)throw new Error(Y+" failed: Was called with "+W+(1===W?" argument.":" arguments.")+" Expects "+$+".")};function An(Y,z){return`${Y} failed: ${z} argument `}function Ls(Y,z,B,W){if((!W||B)&&"function"!=typeof B)throw new Error(An(Y,z)+"must be a valid function.")}function mn(Y,z,B,W){if((!W||B)&&("object"!=typeof B||null===B))throw new Error(An(Y,z)+"must be a valid context object.")}const nt=function(Y){const z=[];let B=0;for(let W=0;W<Y.length;W++){let $=Y.charCodeAt(W);if($>=55296&&$<=56319){const Te=$-55296;W++,ne(W<Y.length,"Surrogate pair missing trail surrogate."),$=65536+(Te<<10)+(Y.charCodeAt(W)-56320)}$<128?z[B++]=$:$<2048?(z[B++]=$>>6|192,z[B++]=63&$|128):$<65536?(z[B++]=$>>12|224,z[B++]=$>>6&63|128,z[B++]=63&$|128):(z[B++]=$>>18|240,z[B++]=$>>12&63|128,z[B++]=$>>6&63|128,z[B++]=63&$|128)}return z},Ke=function(Y){let z=0;for(let B=0;B<Y.length;B++){const W=Y.charCodeAt(B);W<128?z++:W<2048?z+=2:W>=55296&&W<=56319?(z+=4,B++):z+=3}return z};function Vs(Y,z=1e3,B=2){const W=z*Math.pow(B,Y),$=Math.round(.5*W*(Math.random()-.5)*2);return Math.min(144e5,W+$)}function Vt(Y){return Y&&Y._delegate?Y._delegate:Y}},5056:(at,Se,L)=>{var f=L(4650);let ne=null;function O(){return ne}const ce=new f.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ge(){return(0,f.LFG)(G)}()},providedIn:"platform"}),n})();const H=new f.OlP("Location Initialized");let G=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ue(){return new G((0,f.LFG)(ce))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Ye)},providedIn:"root"}),n})();const pe=new f.OlP("appBaseHref");let Ye=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+tt(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+tt(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(pe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),st=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+tt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+tt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(pe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(je(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=tt,n.joinWithSlash=Re,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ee(){return new Me((0,f.LFG)(ve))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}class Qo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Qo(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),Vn(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Vn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Vn(n,e){n.context.$implicit=e.item}let fr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new qr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Jo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Jo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class qr{constructor(){this.$implicit=null,this.ngIf=null}}function Jo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Qa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function $r(n){return"server"===n}let Io=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Kr((0,f.LFG)(ce),window)}),n})();class Kr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ja(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ys(this.window.history)||ys(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ys(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ti extends class ia extends class he{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){ne||(ne=n)}(new Ti)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ws(){return vs=vs||document.querySelector("base"),vs?vs.getAttribute("href"):null}();return null==t?null:function sa(n){Es=Es||document.createElement("a"),Es.setAttribute("href",n);const e=Es.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){vs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Kl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Es,vs=null;const wt=new f.OlP("TRANSITION_ID"),Nd=[{provide:f.ip1,useFactory:function Mn(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[wt,ce,f.zs3],multi:!0}];let Xl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Co=new f.OlP("EventManagerPlugins");let Ws=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Co),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class tl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let oa=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends oa{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ft),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ft))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Ft(n){O().remove(n)}const bo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xa=/%COMP%/g;function aa(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?aa(n,i,t):(i=i.replace(Xa,n),t.push(i))}return t}function ru(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let $s=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new qn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Is(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new ec(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=aa(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ws),f.LFG(De),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class qn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Do(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Do(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=bo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=bo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ru(r)):this.eventManager.addEventListener(e,t,ru(r))}}function Do(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Is extends qn{constructor(e,t,r,i){super(e),this.component=r;const a=aa(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function tu(n){return"_ngcontent-%COMP%".replace(Xa,n)}(i+"-"+r.id),this.hostAttr=function nu(n){return"_nghost-%COMP%".replace(Xa,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ec extends qn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=aa(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let tc=(()=>{class n extends tl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const kd=["alt","control","meta","shift"],nc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},To={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},nl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ou=(()=>{class n extends tl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(kd.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),l+=y+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function rc(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&To.hasOwnProperty(e)&&(e=To[e]))}return nc[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),kd.forEach(a=>{a!=i&&(0,nl[a])(t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const mf=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function sl(){Ti.makeCurrent()},multi:!0},{provide:ce,useFactory:function al(){return(0,f.RDi)(document),document},deps:[]}]),ul=new f.OlP(""),tr=[{provide:f.rWj,useClass:class el{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(y){l=l||y,a--,0==a&&r(l)};i.forEach(function(y){y.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],hi=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function ol(){return new f.qLn},deps:[]},{provide:Co,useClass:tc,multi:!0,deps:[ce,f.R0b,f.Lbi]},{provide:Co,useClass:ou,multi:!0,deps:[ce]},{provide:$s,useClass:$s,deps:[Ws,De,f.AFp]},{provide:f.FYo,useExisting:$s},{provide:oa,useExisting:De},{provide:De,useClass:De,deps:[ce]},{provide:Ws,useClass:Ws,deps:[Co,f.R0b]},{provide:class vr{},useClass:Xl,deps:[]},[]];let Dn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:wt,useExisting:f.AFp},Nd]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ul,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...hi,...tr],imports:[Qa,f.hGG]}),n})(),Od=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ic(){return new Od((0,f.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var fn=L(8996),Si=L(7669);function Ze(...n){const e=(0,Si.yG)(n);return(0,fn.D)(n,e)}var Ht=L(7579);class Gt extends Ht.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Zs=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Er=L(9751);const{isArray:cl}=Array,{getPrototypeOf:Cf,prototype:pu,keys:jd}=Object;function Ys(n){if(1===n.length){const e=n[0];if(cl(e))return{args:e,keys:null};if(function oc(n){return n&&"object"==typeof n&&Cf(n)===pu}(e)){const t=jd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var fi=L(4671),Je=L(4004);const{isArray:Mo}=Array;function ha(n){return(0,Je.U)(e=>function ac(n,e){return Mo(e)?n(...e):n(e)}(n,e))}function gu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var ln=L(5403),mu=L(9672);function Ai(...n){const e=(0,Si.yG)(n),t=(0,Si.jO)(n),{args:r,keys:i}=Ys(n);if(0===r.length)return(0,fn.D)([],e);const a=new Er.y(function dl(n,e,t=fi.y){return r=>{Hd(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let y=0;y<i;y++)Hd(e,()=>{const w=(0,fn.D)(n[y],e);let D=!1;w.subscribe((0,ln.x)(r,A=>{a[y]=A,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>gu(i,l):fi.y));return t?a.pipe(ha(t)):a}function Hd(n,e,t){n?(0,mu.f)(t,n,e):e()}var xo=L(8189);function Yi(...n){return function Qs(){return(0,xo.J)(1)}()((0,fn.D)(n,(0,Si.yG)(n)))}var Mi=L(8421);function Sr(n){return new Er.y(e=>{(0,Mi.Xf)(n()).subscribe(e)})}var yu=L(9635),fa=L(576);function Fr(n,e){const t=(0,fa.m)(n)?n:()=>n,r=i=>i.error(t());return new Er.y(e?i=>e.schedule(r,0,i):r)}var Js=L(515),uc=L(727),gt=L(4482);function Ro(){return(0,gt.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ln.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Kg extends Er.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,gt.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new uc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ln.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=uc.w0.EMPTY)}return e}refCount(){return Ro()(this)}}function $n(n,e){return(0,gt.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,ln.x)(r,y=>{i?.unsubscribe();let w=0;const D=a++;(0,Mi.Xf)(n(y,D)).subscribe(i=(0,ln.x)(r,A=>r.next(e?e(y,A,D,w++):A),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function xi(n){return n<=0?()=>Js.E:(0,gt.e)((e,t)=>{let r=0;e.subscribe((0,ln.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function hl(...n){const e=(0,Si.yG)(n);return(0,gt.e)((t,r)=>{(e?Yi(n,t,e):Yi(n,t)).subscribe(r)})}function Qi(n,e){return(0,gt.e)((t,r)=>{let i=0;t.subscribe((0,ln.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Lr=L(5577);function Ji(n){return(0,gt.e)((e,t)=>{let r=!1;e.subscribe((0,ln.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Zg(n=O_){return(0,gt.e)((e,t)=>{let r=!1;e.subscribe((0,ln.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function O_(){return new Zs}function cn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qi((i,a)=>n(i,a,r)):fi.y,xi(1),t?Ji(e):Zg(()=>new Zs))}function Xs(n,e){return(0,fa.m)(e)?(0,Lr.z)(n,e,1):(0,Lr.z)(n,1)}var Kn=L(8505);function No(n){return(0,gt.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,ln.x)(t,void 0,void 0,l=>{a=(0,Mi.Xf)(n(l,No(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Gd(n,e,t,r,i){return(a,l)=>{let h=t,y=e,w=0;a.subscribe((0,ln.x)(l,D=>{const A=w++;y=h?n(y,D,A):(h=!0,D),r&&l.next(y)},i&&(()=>{h&&l.next(y),l.complete()})))}}function Bn(n,e){return(0,gt.e)(Gd(n,e,arguments.length>=2,!0))}function Vr(n){return n<=0?()=>Js.E:(0,gt.e)((e,t)=>{let r=[];e.subscribe((0,ln.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function lc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qi((i,a)=>n(i,a,r)):fi.y,Vr(1),t?Ji(e):Zg(()=>new Zs))}function ga(n){return(0,gt.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Mt="primary";class cc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function fl(n){return new cc(n)}function zd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function on(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!ya(n[i],e[i]))return!1;return!0}function ya(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function ko(n){return Array.prototype.concat.apply([],n)}function dc(n){return n.length>0?n[n.length-1]:null}function xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function pi(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,fn.D)(Promise.resolve(n)):Ze(n)}const wu={exact:function gc(n,e,t){if(!Ri(n.segments,e.segments)||!pl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!gc(n.children[r],e.children[r],t))return!1;return!0},subset:Cs},bf={exact:function pc(n,e){return on(n,e)},subset:function Po(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ya(n[t],e[t]))},ignored:()=>!0};function Eu(n,e,t){return wu[t.paths](n.root,e.root,t.matrixParams)&&bf[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Cs(n,e,t){return Xi(n,e,e.segments,t)}function Xi(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ri(i,t)||e.hasChildren()||!pl(i,t,r))}if(n.segments.length===t.length){if(!Ri(n.segments,t)||!pl(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Cs(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ri(n.segments,i)&&pl(n.segments,i,r)&&n.children[Mt])&&Xi(n.children[Mt],e,a,r)}}function pl(n,e,t){return e.every((r,i)=>bf[t](n[i].parameters,r.parameters))}class Oo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fl(this.queryParams)),this._queryParamMap}toString(){return qd.serialize(this)}}class Et{constructor(e,t){this.segments=e,this.children=t,this.parent=null,xn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cu(this)}}class eo{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=fl(this.parameters)),this._parameterMap}toString(){return He(this)}}function Ri(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let In=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new Iu},providedIn:"root"}),n})();class Iu{parse(e){const t=new ki(e);return new Oo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${b(e.root,!0)}`,r=function It(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${x(t)}=${x(i)}`).join("&"):`${x(t)}=${x(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function V(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qd=new Iu;function Cu(n){return n.segments.map(e=>He(e)).join("/")}function b(n,e){if(!n.hasChildren())return Cu(n);if(e){const t=n.children[Mt]?b(n.children[Mt],!1):"",r=[];return xn(n.children,(i,a)=>{a!==Mt&&r.push(`${a}:${b(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Wd(n,e){let t=[];return xn(n.children,(r,i)=>{i===Mt&&(t=t.concat(e(r,i)))}),xn(n.children,(r,i)=>{i!==Mt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Mt?[b(n.children[Mt],!1)]:[`${i}:${b(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${Cu(n)}/${t[0]}`:`${Cu(n)}/(${t.join("//")})`}}function T(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function x(n){return T(n).replace(/%3B/gi,";")}function J(n){return T(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ie(n){return decodeURIComponent(n)}function Ae(n){return ie(n.replace(/\+/g,"%20"))}function He(n){return`${J(n.path)}${function ft(n){return Object.keys(n).map(e=>`;${J(e)}=${J(n[e])}`).join("")}(n.parameters)}`}const Ct=/^[^\/()?;=#]+/;function ot(n){const e=n.match(Ct);return e?e[0]:""}const Zn=/^[^=?&#]+/,bu=/^[^&#]+/;class ki{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Et([],{}):new Et([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new Et(e,t)),r}parseSegment(){const e=ot(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new eo(ie(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ot(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ot(this.remaining);i&&(r=i,this.capture(r))}e[ie(t)]=ie(r)}parseQueryParam(e){const t=function Yr(n){const e=n.match(Zn);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Ni(n){const e=n.match(bu);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ae(t),a=Ae(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ot(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Mt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Mt]:new Et([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function mc(n){return n.segments.length>0?new Et([],{[Mt]:n}):n}function _a(n){const e={};for(const r of Object.keys(n.children)){const a=_a(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function to(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new Et(n.segments.concat(e.segments),e.children)}return n}(new Et(n.segments,e))}function Qr(n){return n instanceof Oo}function $d(n,e,t,r,i){if(0===t.length)return no(e.root,e.root,e.root,r,i);const a=function V_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Sf(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return xn(a.outlets,(y,w)=>{h[w]="string"==typeof y?y.split("/"):y}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,y)=>{0==y&&"."===h||(0==y&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new Sf(t,e,r)}(t);return a.toRoot()?no(e.root,e.root,new Et([],{}),r,i):function l(y){const w=function Yg(n,e,t,r){if(n.isAbsolute)return new va(e.root,!0,0);if(-1===r)return new va(t,t===e.root,0);return function _c(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new va(r,!1,i-a)}(t,r+(Du(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,y),D=w.processChildren?vc(w.segmentGroup,w.index,a.commands):ro(w.segmentGroup,w.index,a.commands);return no(e.root,w.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function Du(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function yc(n){return"object"==typeof n&&null!=n&&n.outlets}function no(n,e,t,r,i){let l,a={};r&&xn(r,(y,w)=>{a[w]=Array.isArray(y)?y.map(D=>`${D}`):`${y}`}),l=n===e?t:L_(n,e,t);const h=mc(_a(l));return new Oo(h,a,i)}function L_(n,e,t){const r={};return xn(n.children,(i,a)=>{r[a]=i===e?t:L_(i,e,t)}),new Et(n.segments,r)}class Sf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Du(r[0]))throw new f.vHH(4003,!1);const i=r.find(yc);if(i&&i!==dc(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class va{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ro(n,e,t){if(n||(n=new Et([],{})),0===n.segments.length&&n.hasChildren())return vc(n,e,t);const r=function B_(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(yc(h))break;const y=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!Yd(y,w,l))return a;r+=2}else{if(!Yd(y,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Et(n.segments.slice(0,r.pathIndex),{});return a.children[Mt]=new Et(n.segments.slice(r.pathIndex),n.children),vc(a,0,i)}return r.match&&0===i.length?new Et(n.segments,{}):r.match&&!n.hasChildren()?Qg(n,e,t):r.match?vc(n,0,i):Qg(n,e,t)}function vc(n,e,t){if(0===t.length)return new Et(n.segments,{});{const r=function Af(n){return yc(n[0])?n[0].outlets:{[Mt]:n}}(t),i={};return xn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=ro(n.children[l],e,a))}),xn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Et(n.segments,i)}}function Qg(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(yc(a)){const y=Kd(a.outlets);return new Et(r,y)}if(0===i&&Du(t[0])){r.push(new eo(n.segments[e].path,Zd(t[0]))),i++;continue}const l=yc(a)?a.outlets[Mt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&Du(h)?(r.push(new eo(l,Zd(h))),i+=2):(r.push(new eo(l,{})),i++)}return new Et(r,{})}function Kd(n){const e={};return xn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Qg(new Et([],{}),0,t))}),e}function Zd(n){const e={};return xn(n,(t,r)=>e[r]=`${t}`),e}function Yd(n,e,t){return n==t.path&&on(e,t.parameters)}class io{constructor(e,t){this.id=e,this.url=t}}class Qd extends io{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wa extends io{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jd extends io{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xd extends io{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class j_ extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mf extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H_ extends io{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Lo extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wc extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xf{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class VE{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class G_{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z_{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UE{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BE{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rf{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ea{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Nf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Nf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=kf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return kf(e,this._root).map(t=>t.value)}}function Nf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Nf(n,t);if(r)return r}return null}function kf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=kf(n,t);if(r.length)return r.unshift(e),r}return[]}class so{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function gl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Tu extends Ea{constructor(e,t){super(e),this.snapshot=t,Xg(this,e)}toString(){return this.snapshot.toString()}}function Pf(n,e){const t=function oo(n,e){const l=new Su([],{},{},"",{},Mt,e,null,n.root,-1,{});return new W_("",new so(l,[]))}(n,e),r=new Gt([new eo("",{})]),i=new Gt({}),a=new Gt({}),l=new Gt({}),h=new Gt(""),y=new es(r,i,l,h,a,Mt,e,t.root);return y.snapshot=t.root,new Tu(new so(y,[]),t)}class es{constructor(e,t,r,i,a,l,h,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Je.U)(e=>fl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Je.U)(e=>fl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Of(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Jg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Su{constructor(e,t,r,i,a,l,h,y,w,D,A,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=y,this._urlSegment=w,this._lastPathIndex=D,this._correctedLastPathIndex=k??D,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class W_ extends Ea{constructor(e,t){super(t),this.url=e,Xg(this,t)}toString(){return q_(this._root)}}function Xg(n,e){e.value._routerState=n,e.children.forEach(t=>Xg(n,t))}function q_(n){const e=n.children.length>0?` { ${n.children.map(q_).join(", ")} } `:"";return`${n.value}${e}`}function Ec(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,on(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),on(e.params,t.params)||n.params.next(t.params),function ma(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!on(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),on(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ic(n,e){const t=on(n.params,e.params)&&function Zr(n,e){return Ri(n,e)&&n.every((t,r)=>on(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ic(n.parent,e.parent))}function ml(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function HE(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ml(n,r,i);return ml(n,r)})}(n,e,t);return new so(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>ml(n,h)),l}}const r=function em(n){return new es(new Gt(n.url),new Gt(n.params),new Gt(n.queryParams),new Gt(n.fragment),new Gt(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>ml(n,a));return new so(r,i)}}const Cc="ngNavigationCancelingError";function th(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Qr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=tm(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function tm(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Cc]=!0,r.cancellationCode=e,t&&(r.url=t),r}function nm(n){return yl(n)&&Qr(n.url)}function yl(n){return n&&n[Cc]}class nh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new bc,this.attachRef=null}}let bc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new nh,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _l=!1;let rh=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=i||Mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,_l);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,_l);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,_l);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,_l);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,y=new nr(t,h,i.injector);if(r&&function $_(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,y)}else this.activated=i.createComponent(l,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(bc),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class nr{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===es?this.route:e===bc?this.childContexts:this.parent.get(e,t)}}let rm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[rh],encapsulation:2}),n})();function ih(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Vo(n){const e=n.children&&n.children.map(Vo),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=rm),t}function Ur(n){return n.outlet||Mt}function sh(n,e){const t=n.filter(r=>Ur(r)===e);return t.push(...n.filter(r=>Ur(r)!==e)),t}function Lf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Q_{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ec(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=gl(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),xn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=gl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=gl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=gl(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new BE(a.value.snapshot))}),e.children.length&&this.forwardEvent(new z_(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Ec(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Ec(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=Lf(i.snapshot),y=h?.get(f._Vd)??null;l.attachRef=null,l.route=i,l.resolver=y,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Jr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Uo{constructor(e,t){this.component=e,this.route=t}}function ah(n,e,t){const r=n._root;return Bo(r,e?e._root:null,t,[r.value])}function vl(n,e,t){return(Lf(e)??t).get(n)}function Bo(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=gl(e);return n.children.forEach(l=>{(function im(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const y=function Vf(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ri(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ri(n.url,e.url)||!on(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ic(n,e)||!on(n.queryParams,e.queryParams);default:return!Ic(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new Jr(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Bo(n,e,a.component?h?h.children:null:t,r,i),y&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Uo(h.outlet.component,l))}else l&&bs(e,h,i),i.canActivateChecks.push(new Jr(r)),Bo(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),xn(a,(l,h)=>bs(l,t.getContext(h),i)),i}function bs(n,e,t){const r=gl(n),i=n.value;xn(r,(a,l)=>{bs(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Uo(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ts(n){return"function"==typeof n}function jf(n){return n instanceof Zs||"EmptyError"===n?.name}const ns=Symbol("INITIAL_VALUE");function Ds(){return $n(n=>Ai(n.map(e=>e.pipe(xi(1),hl(ns)))).pipe((0,Je.U)(e=>{for(const t of e)if(!0!==t){if(t===ns)return ns;if(!1===t||t instanceof Oo)return t}return!0}),Qi(e=>e!==ns),xi(1)))}function p(n){return(0,yu.z)((0,Kn.b)(e=>{if(Qr(e))throw th(0,e)}),(0,Je.U)(e=>!0===e))}const E={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function M(n,e,t,r,i){const a=N(n,e,t);return a.matched?function m(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ze(i.map(l=>{const h=n.get(l),y=function rr(n){return n&&ts(n.canMatch)}(h)?h.canMatch(e,t):h(e,t);return pi(y)})).pipe(Ds(),p()):Ze(!0)}(r=ih(e,r),e,t).pipe((0,Je.U)(l=>!0===l?a:{...E})):Ze(a)}function N(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...E}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||zd)(t,n,e);if(!i)return{...E};const a={};xn(i.posParams,(h,y)=>{a[y]=h.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function K(n,e,t,r,i="corrected"){if(t.length>0&&function Xe(n,e,t){return t.some(r=>lt(n,e,r)&&Ur(r)!==Mt)}(n,t,r)){const l=new Et(e,function Ve(n,e,t,r){const i={};i[Mt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Ur(a)!==Mt){const l=new Et([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Ur(a)]=l}return i}(n,e,r,new Et(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function _t(n,e,t){return t.some(r=>lt(n,e,r))}(n,t,r)){const l=new Et(n.segments,function le(n,e,t,r,i,a){const l={};for(const h of r)if(lt(n,t,h)&&!i[Ur(h)]){const y=new Et([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Ur(h)]=y}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Et(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function lt(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ir(n,e,t,r){return!!(Ur(n)===r||r!==Mt&&lt(e,t,n))&&("**"===n.path||N(e,n,t).matched)}function rs(n,e,t){return 0===e.length&&!n.children[t]}const Ia=!1;class wl{constructor(e){this.segmentGroup=e||null}}class El{constructor(e){this.urlTree=e}}function Il(n){return Fr(new wl(n))}function zf(n){return Fr(new El(n))}class Mc{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=K(this.urlTree.root,[],[],this.config).segmentGroup,t=new Et(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Mt).pipe((0,Je.U)(a=>this.createUrlTree(_a(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(No(a=>{if(a instanceof El)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof wl?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Mt).pipe((0,Je.U)(i=>this.createUrlTree(_a(i),e.queryParams,e.fragment))).pipe(No(i=>{throw i instanceof wl?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,Ia)}createUrlTree(e,t,r){const i=mc(e);return new Oo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Je.U)(a=>new Et([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,fn.D)(i).pipe(Xs(a=>{const l=r.children[a],h=sh(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,Je.U)(y=>({segment:y,outlet:a})))}),Bn((a,l)=>(a[l.outlet]=l.segment,a),{}),lc())}expandSegment(e,t,r,i,a,l){return(0,fn.D)(r).pipe(Xs(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(No(w=>{if(w instanceof wl)return Ze(null);throw w}))),cn(h=>!!h),No((h,y)=>{if(jf(h))return rs(t,i,a)?Ze(new Et([],{})):Il(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return ir(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Il(t):Il(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zf(a):this.lineralizeSegments(r,a).pipe((0,Lr.z)(l=>{const h=new Et(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:y,remainingSegments:w,positionalParamSegments:D}=N(t,i,a);if(!h)return Il(t);const A=this.applyRedirectCommands(y,i.redirectTo,D);return i.redirectTo.startsWith("/")?zf(A):this.lineralizeSegments(i,A).pipe((0,Lr.z)(k=>this.expandSegment(e,t,r,k.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=ih(r,e),r.loadChildren?(r._loadedRoutes?Ze({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Je.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Et(i,{})))):Ze(new Et(i,{}))):M(t,r,i,e).pipe($n(({matched:l,consumedSegments:h,remainingSegments:y})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Lr.z)(D=>{const A=D.injector??e,k=D.routes,{segmentGroup:U,slicedSegments:Z}=K(t,h,y,k),me=new Et(U.segments,U.children);if(0===Z.length&&me.hasChildren())return this.expandChildren(A,k,me).pipe((0,Je.U)(St=>new Et(h,St)));if(0===k.length&&0===Z.length)return Ze(new Et(h,{}));const xe=Ur(r)===a;return this.expandSegment(A,me,k,Z,xe?Mt:a,!0).pipe((0,Je.U)(mt=>new Et(h.concat(mt.segments),mt.children)))})):Il(t)))}getChildConfig(e,t,r){return t.children?Ze({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ze({routes:t._loadedRoutes,injector:t._loadedInjector}):function _(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ze(!0):Ze(i.map(l=>{const h=n.get(l),y=function lh(n){return n&&ts(n.canLoad)}(h)?h.canLoad(e,t):h(e,t);return pi(y)})).pipe(Ds(),p())}(e,t,r).pipe((0,Lr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Kn.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function nv(n){return Fr(tm(Ia,3))}())):Ze({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ze(r);if(i.numberOfChildren>1||!i.children[Mt])return Fr(new f.vHH(4e3,Ia));i=i.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Oo(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return xn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return xn(t.children,(h,y)=>{l[y]=this.createSegmentGroup(e,h,r,i)}),new Et(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,Ia);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class am{}class _T{constructor(e,t,r,i,a,l,h,y){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h,this.urlSerializer=y}recognize(){const e=K(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Mt).pipe((0,Je.U)(t=>{if(null===t)return null;const r=new Su([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new so(r,t),a=new W_(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Of(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,fn.D)(Object.keys(r.children)).pipe(Xs(i=>{const a=r.children[i],l=sh(t,i);return this.processSegmentGroup(e,l,a,i)}),Bn((i,a)=>i&&a?(i.push(...a),i):null),function pa(n,e=!1){return(0,gt.e)((t,r)=>{let i=0;t.subscribe((0,ln.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),Ji(null),lc(),(0,Je.U)(i=>{if(null===i)return null;const a=ov(i);return function KE(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,fn.D)(t).pipe(Xs(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),cn(l=>!!l),No(l=>{if(jf(l))return rs(r,i,a)?Ze([]):Ze(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!ir(t,r,i,a))return Ze(null);let l;if("**"===t.path){const h=i.length>0?dc(i).parameters:{},y=QE(r)+i.length;l=Ze({snapshot:new Su(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ch(t),Ur(t),t.component??t._loadedComponent??null,t,um(r),y,JE(t),y),consumedSegments:[],remainingSegments:[]})}else l=M(r,t,i,e).pipe((0,Je.U)(({matched:h,consumedSegments:y,remainingSegments:w,parameters:D})=>{if(!h)return null;const A=QE(r)+y.length;return{snapshot:new Su(y,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ch(t),Ur(t),t.component??t._loadedComponent??null,t,um(r),A,JE(t),A),consumedSegments:y,remainingSegments:w}}));return l.pipe($n(h=>{if(null===h)return Ze(null);const{snapshot:y,consumedSegments:w,remainingSegments:D}=h;e=t._injector??e;const A=t._loadedInjector??e,k=function sv(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:Z}=K(r,w,D,k.filter(xe=>void 0===xe.redirectTo),this.relativeLinkResolution);if(0===Z.length&&U.hasChildren())return this.processChildren(A,k,U).pipe((0,Je.U)(xe=>null===xe?null:[new so(y,xe)]));if(0===k.length&&0===Z.length)return Ze([new so(y,[])]);const me=Ur(t)===a;return this.processSegment(A,k,U,Z,me?Mt:a).pipe((0,Je.U)(xe=>null===xe?null:[new so(y,xe)]))}))}}function ZE(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ov(n){const e=[],t=new Set;for(const r of n){if(!ZE(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=ov(r.children);e.push(new so(r.value,i))}return e.filter(r=>!t.has(r))}function um(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function QE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function ch(n){return n.data||{}}function JE(n){return n.resolve||{}}const av=Symbol("RouteTitle");function cm(n){return"string"==typeof n.title||null===n.title}function uv(n){return $n(e=>{const t=n(e);return t?(0,fn.D)(t).pipe((0,Je.U)(()=>e)):Ze(e)})}let eI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Mt);return r}getResolvedTitleForRoute(t){return t.data[av]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(tI)},providedIn:"root"}),n})(),tI=(()=>{class n extends eI{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Od))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class DT{}class Pi extends class TT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const dm=new f.OlP("",{providedIn:"root",factory:()=>({})}),Br=new f.OlP("ROUTES");let xc=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ze(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=pi(t.loadComponent()).pipe((0,Kn.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),ga(()=>{this.componentLoaders.delete(t)})),i=new Kg(r,()=>new Ht.x).pipe(Ro());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ze({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Je.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,w,D=!1;Array.isArray(h)?w=h:(y=h.create(t).injector,w=ko(y.get(Br,[],f.XFs.Self|f.XFs.Optional)));return{routes:w.map(Vo),injector:y}}),ga(()=>{this.childrenLoaders.delete(r)})),l=new Kg(a,()=>new Ht.x).pipe(Ro());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return pi(t()).pipe((0,Lr.z)(r=>r instanceof f.YKP||Array.isArray(r)?Ze(r):(0,fn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class cv{}class ST{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function nI(n){throw n}function AT(n,e,t){return e.parse("/")}const rI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function sI(){const n=(0,f.f3M)(In),e=(0,f.f3M)(bc),t=(0,f.f3M)(Me),r=(0,f.f3M)(f.zs3),i=(0,f.f3M)(f.Sil),a=(0,f.f3M)(Br,{optional:!0})??[],l=(0,f.f3M)(dm,{optional:!0})??{},h=(0,f.f3M)(tI),y=(0,f.f3M)(eI,{optional:!0}),w=(0,f.f3M)(cv,{optional:!0}),D=(0,f.f3M)(DT,{optional:!0}),A=new Ir(null,n,e,t,r,i,ko(a));return w&&(A.urlHandlingStrategy=w),D&&(A.routeReuseStrategy=D),A.titleStrategy=y??h,function iI(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,A),A}let Ir=(()=>{class n{constructor(t,r,i,a,l,h,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ht.x,this.errorHandler=nI,this.malformedUriErrorHandler=AT,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ze(void 0),this.urlHandlingStrategy=new ST,this.routeReuseStrategy=new Pi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(xc),this.configLoader.onLoadEndListener=k=>this.triggerEvent(new VE(k)),this.configLoader.onLoadStartListener=k=>this.triggerEvent(new xf(k)),this.ngModule=l.get(f.h0i),this.console=l.get(f.c2e);const A=l.get(f.R0b);this.isNgZoneEnabled=A instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function fc(){return new Oo(new Et([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Pf(this.currentUrlTree,this.rootComponentType),this.transitions=new Gt({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Qi(i=>0!==i.id),(0,Je.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),$n(i=>{let a=!1,l=!1;return Ze(i).pipe((0,Kn.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),$n(h=>{const y=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return oI(h.source)&&(this.browserUrlTree=h.extractedUrl),Ze(h).pipe($n(A=>{const k=this.transitions.getValue();return r.next(new Qd(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),k!==this.transitions.getValue()?Js.E:Promise.resolve(A)}),function iv(n,e,t,r){return $n(i=>function rv(n,e,t,r,i){return new Mc(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Je.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Kn.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},i.urlAfterRedirects=A.urlAfterRedirects}),function vT(n,e,t,r,i,a){return(0,Lr.z)(l=>function mR(n,e,t,r,i,a,l="emptyOnly",h="legacy"){return new _T(n,e,t,r,i,l,h,a).recognize().pipe($n(y=>null===y?function $E(n){return new Er.y(e=>e.error(n))}(new am):Ze(y)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,Je.U)(h=>({...l,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Kn.b)(A=>{if(i.targetSnapshot=A.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(U,A)}this.browserUrlTree=A.urlAfterRedirects}const k=new j_(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(k)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:U,source:Z,restoredState:me,extras:xe}=h,ct=new Qd(k,this.serializeUrl(U),Z,me);r.next(ct);const mt=Pf(U,this.rootComponentType).snapshot;return Ze(i={...h,targetSnapshot:mt,urlAfterRedirects:U,extras:{...xe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Js.E}),(0,Kn.b)(h=>{const y=new Mf(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(y)}),(0,Je.U)(h=>i={...h,guards:ah(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function Au(n,e){return(0,Lr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?Ze({...t,guardsResult:!0}):function sm(n,e,t,r){return(0,fn.D)(n).pipe((0,Lr.z)(i=>function om(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Ze(a.map(h=>{const y=vl(h,e,i);return pi(function Tc(n){return n&&ts(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):y(n,e,t,r)).pipe(cn())})).pipe(Ds()):Ze(!0)}(i.component,i.route,t,e,r)),cn(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Lr.z)(h=>h&&function uh(n){return"boolean"==typeof n}(h)?function X_(n,e,t,r){return(0,fn.D)(e).pipe(Xs(i=>Yi(function ev(n,e){return null!==n&&e&&e(new G_(n)),Ze(!0)}(i.route.parent,r),function Hf(n,e){return null!==n&&e&&e(new UE(n)),Ze(!0)}(i.route,r),function tv(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function qE(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Sr(()=>Ze(l.guards.map(y=>{const w=vl(y,l.node,t);return pi(function Uf(n){return n&&ts(n.canActivateChild)}(w)?w.canActivateChild(r,n):w(r,n)).pipe(cn())})).pipe(Ds())));return Ze(a).pipe(Ds())}(n,i.path,t),function Gf(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ze(!0);const i=r.map(a=>Sr(()=>{const l=vl(a,e,t);return pi(function J_(n){return n&&ts(n.canActivate)}(l)?l.canActivate(e,n):l(e,n)).pipe(cn())}));return Ze(i).pipe(Ds())}(n,i.route,t))),cn(i=>!0!==i,!0))}(r,a,n,e):Ze(h)),(0,Je.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Kn.b)(h=>{if(i.guardsResult=h.guardsResult,Qr(h.guardsResult))throw th(0,h.guardsResult);const y=new H_(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(y)}),Qi(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),uv(h=>{if(h.guards.canActivateChecks.length)return Ze(h).pipe((0,Kn.b)(y=>{const w=new Lo(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),$n(y=>{let w=!1;return Ze(y).pipe(function XE(n,e){return(0,Lr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ze(t);let a=0;return(0,fn.D)(i).pipe(Xs(l=>function wT(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!cm(i)&&(a[av]=i.title),function ET(n,e,t,r){const i=function IT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ze({});const a={};return(0,fn.D)(i).pipe((0,Lr.z)(l=>function CT(n,e,t,r){const i=vl(n,e,r);return pi(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe(cn(),(0,Kn.b)(h=>{a[l]=h}))),Vr(1),function _u(n){return(0,Je.U)(()=>n)}(a),No(l=>jf(l)?Js.E:Fr(l)))}(a,n,e,r).pipe((0,Je.U)(l=>(n._resolvedData=l,n.data=Of(n,t).resolve,i&&cm(i)&&(n.data[av]=i.title),null)))}(l.route,r,n,e)),(0,Kn.b)(()=>a++),Vr(1),(0,Lr.z)(l=>a===i.length?Ze(t):Js.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Kn.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),(0,Kn.b)(y=>{const w=new wc(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}))}),uv(h=>{const y=w=>{const D=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Kn.b)(A=>{w.component=A}),(0,Je.U)(()=>{})));for(const A of w.children)D.push(...y(A));return D};return Ai(y(h.targetSnapshot.root)).pipe(Ji(),xi(1))}),uv(()=>this.afterPreactivation()),(0,Je.U)(h=>{const y=function eh(n,e,t){const r=ml(n,e._root,t?t._root:void 0);return new Tu(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:y}}),(0,Kn.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Je.U)(r=>(new Q_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Kn.b)({next(){a=!0},complete(){a=!0}}),ga(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),No(h=>{if(l=!0,yl(h)){nm(h)||(this.navigated=!0,this.restoreHistory(i,!0));const y=new Jd(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(y),nm(h)){const w=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||oI(i.source)};this.scheduleNavigation(w,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new Xd(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(y);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return Js.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const h={...a};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Vo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:y}=r,w=i||this.routerState.root,D=y?this.currentUrlTree.fragment:l;let A=null;switch(h){case"merge":A={...this.currentUrlTree.queryParams,...a};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),$d(w,this.currentUrlTree,t,A,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Qr(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function xT(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...rI}:!1===r?{...MT}:r,Qr(t))return Eu(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Eu(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new wa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,y,w;l?(h=l.resolve,y=l.reject,w=l.promise):w=new Promise((k,U)=>{h=k,y=U});const D=++this.navigationId;let A;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),A=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.setTransition({id:D,targetPageId:A,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:h,reject:y,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(k=>Promise.reject(k))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new Jd(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return sI()},providedIn:"root"}),n})();function oI(n){return"imperative"!==n}let dh=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ht.x,this.subscription=t.events.subscribe(a=>{a instanceof wa&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){if(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:(0,f.D6c)(this.skipLocationChange),replaceUrl:(0,f.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,f.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ir),f.Y36(es),f.Y36(ve))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();class aI{}let RT=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Qi(t=>t instanceof wa),Xs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,f.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,fn.D)(i).pipe((0,xo.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ze(null);const a=i.pipe((0,Lr.z)(l=>null===l?Ze(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,fn.D)([a,l]).pipe((0,xo.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ir),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(aI),f.LFG(xc))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const hv=new f.OlP("");let _R=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Rf&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Rf(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const pm=new f.OlP("ROUTER_FORROOT_GUARD"),lI=new f.OlP(""),cI=[Me,{provide:In,useClass:Iu},{provide:Ir,useFactory:sI},bc,{provide:es,useFactory:function NT(n){return n.routerState.root},deps:[Ir]},xc];function qf(){return new f.PXZ("Router",Ir)}let dI=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[cI,[],kT(t),{provide:pm,useFactory:fI,deps:[[Ir,new f.FiY,new f.tp0]]},{provide:dm,useValue:r||{}},r?.useHash?{provide:ve,useClass:st}:{provide:ve,useClass:Ye},{provide:hv,useFactory:()=>{const n=(0,f.f3M)(Ir),e=(0,f.f3M)(Io),t=(0,f.f3M)(dm);return t.scrollOffset&&e.setOffset(t.scrollOffset),new _R(n,e,t)}},r?.preloadingStrategy?VT(r.preloadingStrategy):[],{provide:f.PXZ,multi:!0,useFactory:qf},r?.initialNavigation?pI(r):[],[{provide:gm,useFactory:fh},{provide:f.tb,multi:!0,useExisting:gm}]]}}static forChild(t){return{ngModule:n,providers:[kT(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pm,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function fI(n){return"guarded"}function kT(n){return[{provide:Br,multi:!0,useValue:n}]}function fh(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Ir),i=n.get(mm);1===n.get(gv)&&r.initialNavigation(),n.get(lI,null,f.XFs.Optional)?.setUpPreloading(),n.get(hv,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const gm=new f.OlP("");function pI(n){return["disabled"===n.initialNavigation?[{provide:f.ip1,multi:!0,useFactory:()=>{const n=(0,f.f3M)(Ir);return()=>{n.setUpLocationChangeListener()}}},{provide:gv,useValue:2}]:[],"enabledBlocking"===n.initialNavigation?[{provide:gv,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:n=>{const e=n.get(H,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(i=>{const a=n.get(Ir),l=n.get(mm);(function r(i){n.get(Ir).events.pipe(Qi(l=>l instanceof wa||l instanceof Jd||l instanceof Xd),(0,Je.U)(l=>l instanceof wa||l instanceof Jd&&(0===l.code||1===l.code)&&null),Qi(l=>null!==l),xi(1)).subscribe(()=>{i()})})(()=>{i(!0),t=!0}),a.afterPreactivation=()=>(i(!0),t||l.closed?Ze(void 0):l),a.initialNavigation()}))}}]:[]]}const mm=new f.OlP("",{factory:()=>new Ht.x}),gv=new f.OlP("",{providedIn:"root",factory:()=>1});function VT(n){return[RT,{provide:lI,useExisting:RT},{provide:aI,useExisting:n}]}var ye=L(5861),$f=L(6451),Kf=L(5363),mv=L(6063);class UT extends Ht.x{constructor(e=1/0,t=1/0,r=mv.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let y=1;y<r.length&&r[y]<=l;y+=2)h=y;h&&r.splice(0,h+1)}}}var gI=L(3099);function yv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,gI.B)({connector:()=>new UT(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function _v(n,e){return(0,fa.m)(e)?$n(()=>n,e):$n(()=>n)}var xu=L(9468),Tn=L(5813),gi=L(2011);L(5867);var jo=L(9681),Ru=L(4859),P=L(2090),Ts=L(1877);const Ev=new Map,IR={activated:!1,tokenObservers:[]},II={initialized:!1,enabled:!1};function jr(n){return Ev.get(n)||IR}function ao(n,e){Ev.set(n,e)}function Em(){return II}class qT{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function $T(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Oi=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function TI(n){if(!jr(n).activated)throw Oi.create("use-before-activation",{appName:n.name})}function Cm(n,e){return bm.apply(this,arguments)}function bm(){return(bm=(0,ye.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const U=yield l.getHeartbeatsHeader();U&&(a["X-Firebase-Client"]=U)}const h={method:"POST",body:JSON.stringify(e),headers:a};let y,w;try{y=yield fetch(n,h)}catch(U){throw Oi.create("fetch-network-error",{originalErrorMessage:null===(r=U)||void 0===r?void 0:r.message})}if(200!==y.status)throw Oi.create("fetch-status-error",{httpStatus:y.status});try{w=yield y.json()}catch(U){throw Oi.create("fetch-parse-error",{originalErrorMessage:null===(i=U)||void 0===i?void 0:i.message})}const D=w.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw Oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const A=1e3*Number(D[1]),k=Date.now();return{token:w.token,expireTimeMillis:k+A,issuedAtTimeMillis:k}})).apply(this,arguments)}function SI(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Yf="firebase-app-check-store";let Cv=null;function bv(){return Cv||(Cv=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(Oi.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Yf,{keyPath:"compositeKey"})}}catch(r){e(Oi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Cv)}function Tv(){return(Tv=(0,ye.Z)(function*(n,e){const r=(yield bv()).transaction(Yf,"readwrite"),a=r.objectStore(Yf).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=y=>{l()},r.onerror=y=>{var w;h(Oi.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Qf=new Ts.Yd("@firebase/app-check");function PI(n,e){return(0,P.hl)()?function Rc(n,e){return function Dm(n,e){return Tv.apply(this,arguments)}(function XT(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Qf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Av(){return Em().enabled}function Jf(){return Mv.apply(this,arguments)}function Mv(){return(Mv=(0,ye.Z)(function*(){const n=Em();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const eS={error:"UNKNOWN_ERROR"};function tS(n){return P.US.encodeString(JSON.stringify(n),!1)}function Tm(n){return xv.apply(this,arguments)}function xv(){return(xv=(0,ye.Z)(function*(n,e=!1){const t=n.app;TI(t);const r=jr(t);let a,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&gh(y)&&(i=y)}if(!e&&i&&gh(i))return{token:i.token};let h,l=!1;if(Av()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Cm(SI(t,yield Jf()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),l=!0);const y=yield r.exchangeTokenPromise;return yield PI(t,y),ao(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),l=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Qf.warn(y.message):Qf.error(y),a=y}return i?(h={token:i.token},ao(t,Object.assign(Object.assign({},r),{token:i})),yield PI(t,i)):h=CR(a),l&&Nv(t,h),h})).apply(this,arguments)}function Sm(n,e){const t=jr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ao(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function FI(n){const{app:e}=n,t=jr(e);let r=t.tokenRefresher;r||(r=function LI(n){const{app:e}=n;return new qT((0,ye.Z)(function*(){let r;if(r=jr(e).token?yield Tm(n,!0):yield Tm(n),r.error)throw r.error}),()=>!0,()=>{const t=jr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ao(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Nv(n,e){const t=jr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function gh(n){return n.expireTimeMillis-Date.now()>0}function CR(n){return{token:tS(eS),error:n}}class kv{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=jr(this.app);for(const t of e)Sm(this.app,t.next);return Promise.resolve()}}const Vv="app-check-internal";!function AR(){(0,jo._registerComponent)(new Ru.wA("app-check",n=>function nS(n,e){return new kv(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Vv).initialize()})),(0,jo._registerComponent)(new Ru.wA(Vv,n=>function bR(n){return{getToken:e=>Tm(n,e),addTokenListener:e=>function Rv(n,e,t,r){const{app:i}=n,a=jr(i),l={next:t,error:r,type:e};if(ao(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&gh(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),FI(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>FI(n))}(n,"INTERNAL",e),removeTokenListener:e=>Sm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,jo.registerVersion)("@firebase/app-check","0.5.12")}();class np{constructor(){return(0,Tn.vb)("app-check")}}typeof window<"u"&&window;var $I=L(127);const rp=new f.OlP("angularfire2.auth.use-emulator"),Nm=new f.OlP("angularfire2.auth.settings"),ip=new f.OlP("angularfire2.auth.tenant-id"),Bv=new f.OlP("angularfire2.auth.langugage-code"),ba=new f.OlP("angularfire2.auth.use-device-language"),km=new f.OlP("angularfire.auth.persistence"),jv=(n,e,t,r,i,a,l,h)=>(0,gi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),l)for(const[w,D]of Object.entries(l))y.settings[w]=D;return h&&y.setPersistence(h),y},[t,r,i,a,l,h]);let kc=(()=>{class n{constructor(t,r,i,a,l,h,y,w,D,A,k,U){const Z=new Ht.x,me=Ze(void 0).pipe((0,Kf.Q)(l.outsideAngular),$n(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,1451)))),(0,Je.U)(()=>(0,gi.on)(t,a,r)),(0,Je.U)(xe=>jv(xe,a,h,w,D,A,y,k)),yv({bufferSize:1,refCount:!1}));if($r(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ze(null);else{me.pipe(cn()).subscribe();const ct=me.pipe($n(Tt=>Tt.getRedirectResult().then(Lt=>Lt,()=>null)),Tn.iC,yv({bufferSize:1,refCount:!1})),mt=me.pipe($n(Tt=>new Er.y(Lt=>({unsubscribe:a.runOutsideAngular(()=>Tt.onAuthStateChanged(Yt=>Lt.next(Yt),Yt=>Lt.error(Yt),()=>Lt.complete()))})))),St=me.pipe($n(Tt=>new Er.y(Lt=>({unsubscribe:a.runOutsideAngular(()=>Tt.onIdTokenChanged(Yt=>Lt.next(Yt),Yt=>Lt.error(Yt),()=>Lt.complete()))}))));this.authState=ct.pipe(_v(mt),(0,xu.R)(l.outsideAngular),(0,Kf.Q)(l.insideAngular)),this.user=ct.pipe(_v(St),(0,xu.R)(l.outsideAngular),(0,Kf.Q)(l.insideAngular)),this.idToken=this.user.pipe($n(Tt=>Tt?(0,fn.D)(Tt.getIdToken()):Ze(null))),this.idTokenResult=this.user.pipe($n(Tt=>Tt?(0,fn.D)(Tt.getIdTokenResult()):Ze(null))),this.credential=(0,$f.T)(ct,Z,this.authState.pipe(Qi(Tt=>!Tt))).pipe((0,Je.U)(Tt=>Tt?.user?Tt:null),(0,xu.R)(l.outsideAngular),(0,Kf.Q)(l.insideAngular))}return(0,gi.pX)(this,me,a,{spy:{apply:(xe,ct,mt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&mt.then(St=>Z.next(St))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(gi.Dh),f.LFG(gi.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Tn.HU),f.LFG(rp,8),f.LFG(Nm,8),f.LFG(ip,8),f.LFG(Bv,8),f.LFG(ba,8),f.LFG(km,8),f.LFG(np,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oS=(()=>{class n{constructor(){$I.Z.registerVersion("angularfire",Tn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[kc]}),n})();var Hv=L(4986);function Gv(){return(0,gt.e)((n,e)=>{let t,r=!1;n.subscribe((0,ln.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function ZI(n,e=fi.y){return n=n??Pm,(0,gt.e)((t,r)=>{let i,a=!0;t.subscribe((0,ln.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function Pm(n,e){return n===e}L(1451);var Qe,Om=L(3942),yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uo={},zv=zv||{},Rt=yh||self;function op(){}function ap(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Pc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var up="closure_uid_"+(1e9*Math.random()>>>0),aS=0;function kR(n,e,t){return n.call.apply(n.bind,arguments)}function uS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Hr(n,e,t){return(Hr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kR:uS).apply(null,arguments)}function Fm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Gr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Nu(){this.s=this.s,this.o=this.o}var Ss={};Nu.prototype.s=!1,Nu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function YI(n){return Object.prototype.hasOwnProperty.call(n,up)&&n[up]||(n[up]=++aS)}(this);delete Ss[n]}},Nu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},QI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function JI(n){return Array.prototype.concat.apply([],arguments)}function lp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function cp(n){return/^[\s\xa0]*$/.test(n)}var mi,XI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fi(n,e){return-1!=n.indexOf(e)}function qv(n,e){return n<e?-1:n>e?1:0}e:{var eC=Rt.navigator;if(eC){var $v=eC.userAgent;if($v){mi=$v;break e}}mi=""}function Kv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function tC(n){const e={};for(const t in n)e[t]=n[t];return e}var Zv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Zv.length;a++)t=Zv[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Qv(n){return Qv[" "](n),n}Qv[" "]=op;var Lm,n,Jv=Fi(mi,"Opera"),_h=Fi(mi,"Trident")||Fi(mi,"MSIE"),nC=Fi(mi,"Edge"),rC=nC||_h,Xv=Fi(mi,"Gecko")&&!(Fi(mi.toLowerCase(),"webkit")&&!Fi(mi,"Edge"))&&!(Fi(mi,"Trident")||Fi(mi,"MSIE"))&&!Fi(mi,"Edge"),cS=Fi(mi.toLowerCase(),"webkit")&&!Fi(mi,"Edge");function iC(){var n=Rt.document;return n?n.documentMode:void 0}e:{var dp="",ew=(n=mi,Xv?/rv:([^\);]+)(\)|;)/.exec(n):nC?/Edge\/([\d\.]+)/.exec(n):_h?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):cS?/WebKit\/(\S+)/.exec(n):Jv?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ew&&(dp=ew?ew[1]:""),_h){var tw=iC();if(null!=tw&&tw>parseFloat(dp)){Lm=String(tw);break e}}Lm=dp}var Vm={};var sw=Rt.document&&_h&&(iC()||parseInt(Lm,10))||void 0,sC=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",op,e),Rt.removeEventListener("test",op,e)}catch{}return n}();function Li(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Um(n,e){if(Li.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Xv){e:{try{Qv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ow[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Um.Z.h.call(this)}}Li.prototype.h=function(){this.defaultPrevented=!0},Gr(Um,Li);var ow={2:"touch",3:"pen",4:"mouse"};Um.prototype.h=function(){Um.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Bm="closure_listenable_"+(1e6*Math.random()|0),dS=0;function oC(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++dS,this.ca=this.fa=!1}function hp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function fp(n){this.src=n,this.g={},this.h=0}function jm(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Wv(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(hp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function pp(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}fp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=pp(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new oC(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var zo="closure_lm_"+(1e6*Math.random()|0),vh={};function gp(n,e,t,r,i){if(r&&r.once)return Hm(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)gp(n,e[a],t,r,i);return null}return t=cw(t),n&&n[Bm]?n.N(e,t,Pc(r)?!!r.capture:!!r,i):wh(n,e,t,!1,r,i)}function wh(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Pc(i)?!!i.capture:!!i,h=lw(n);if(h||(n[zo]=h=new fp(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function hS(){var e=mp;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)sC||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(aC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Hm(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Hm(n,e[a],t,r,i);return null}return t=cw(t),n&&n[Bm]?n.O(e,t,Pc(r)?!!r.capture:!!r,i):wh(n,e,t,!0,r,i)}function aw(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)aw(n,e[a],t,r,i);else r=Pc(r)?!!r.capture:!!r,t=cw(t),n&&n[Bm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=pp(a=n.g[e],t,r,i))&&(hp(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=lw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=pp(e,t,r,i)),(t=-1<n?e[n]:null)&&uw(t))}function uw(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Bm])jm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(aC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=lw(e))?(jm(t,n),0==t.h&&(t.src=null,e[zo]=null)):hp(n)}}}function aC(n){return n in vh?vh[n]:vh[n]="on"+n}function mp(n,e){if(n.ca)n=!0;else{e=new Um(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&uw(n),n=t.call(r,e)}return n}function lw(n){return(n=n[zo])instanceof fp?n:null}var uC="__closure_events_fn_"+(1e9*Math.random()>>>0);function cw(n){return"function"==typeof n?n:(n[uC]||(n[uC]=function(e){return n.handleEvent(e)}),n[uC])}function ei(){Nu.call(this),this.i=new fp(this),this.P=this,this.I=null}function ti(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Li(e,n);else if(e instanceof Li)e.target=e.target||n;else{var i=e;Yv(e=new Li(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Gm(l,r,!0,e)&&i}if(i=Gm(l=e.g=n,r,!0,e)&&i,i=Gm(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Gm(l=e.g=t[a],r,!1,e)&&i}function Gm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,y=l.ia||l.src;l.fa&&jm(n.i,l),i=!1!==h.call(y,r)&&i}}return i&&!r.defaultPrevented}Gr(ei,Nu),ei.prototype[Bm]=!0,ei.prototype.removeEventListener=function(n,e,t,r){aw(this,n,e,t,r)},ei.prototype.M=function(){if(ei.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)hp(t[r]);delete n.g[e],n.h--}}this.I=null},ei.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ei.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var dw=Rt.JSON.stringify;function fS(){var n=lC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var pw,hw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new fw,n=>n.reset());class fw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function pS(n){Rt.setTimeout(()=>{throw n},0)}function yp(n,e){pw||function gS(){var n=Rt.Promise.resolve(void 0);pw=function(){n.then(mS)}}(),gw||(pw(),gw=!0),lC.add(n,e)}var gw=!1,lC=new class OR{constructor(){this.h=this.g=null}add(e,t){const r=hw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function mS(){for(var n;n=fS();){try{n.h.call(n.g)}catch(t){pS(t)}var e=hw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}gw=!1}function zm(n,e){ei.call(this),this.h=n||1,this.g=e||Rt,this.j=Hr(this.kb,this),this.l=Date.now()}function Eh(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ku(n,e,t){if("function"==typeof n)t&&(n=Hr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function yS(n){n.g=ku(()=>{n.g=null,n.i&&(n.i=!1,yS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Gr(zm,ei),(Qe=zm.prototype).da=!1,Qe.S=null,Qe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ti(this,"tick"),this.da&&(Eh(this),this.start()))}},Qe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qe.M=function(){zm.Z.M.call(this),Eh(this),delete this.g};class _p extends Nu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yS(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vp(n){Nu.call(this),this.h=n,this.g={}}Gr(vp,Nu);var cC=[];function Wm(n,e,t,r){Array.isArray(t)||(t&&(cC[0]=t.toString()),t=cC);for(var i=0;i<t.length;i++){var a=gp(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function dC(n){Kv(n.g,function(e,t){this.g.hasOwnProperty(t)&&uw(e)},n),n.g={}}function As(){this.g=!0}function lo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function co(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return dw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}vp.prototype.M=function(){vp.Z.M.call(this),dC(this)},vp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},As.prototype.Aa=function(){this.g=!1},As.prototype.info=function(){};var Pu={},Oc=null;function Ou(){return Oc=Oc||new ei}function Fc(n){Li.call(this,Pu.Ma,n)}function Ta(n){const e=Ou();ti(e,new Fc(e,n))}function Lc(n,e){Li.call(this,Pu.STAT_EVENT,n),this.stat=e}function Cr(n){const e=Ou();ti(e,new Lc(e,n))}function Vc(n,e){Li.call(this,Pu.Na,n),this.size=e}function Sa(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}Pu.Ma="serverreachability",Gr(Fc,Li),Pu.STAT_EVENT="statevent",Gr(Lc,Li),Pu.Na="timingevent",Gr(Vc,Li);var Fu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},mw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $m(){}function _w(){}$m.prototype.h=null;var Ym,Ih={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Km(){Li.call(this,"d")}function Zm(){Li.call(this,"c")}function Ep(){}function Ip(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new vp(this),this.P=_S,this.W=new zm(n=rC?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new hC}function hC(){this.i=null,this.g="",this.h=!1}Gr(Km,Li),Gr(Zm,Li),Gr(Ep,$m),Ep.prototype.g=function(){return new XMLHttpRequest},Ep.prototype.i=function(){return{}},Ym=new Ep;var _S=45e3,Qm={},Jm={};function vw(n,e,t){n.K=1,n.v=Tp(Aa(e)),n.s=t,n.U=!0,Xm(n,null)}function Xm(n,e){n.F=Date.now(),Cl(n),n.A=Aa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),br(t.h,"t",r),n.C=0,t=n.l.H,n.h=new hC,n.g=NC(n.l,t?e:null,!n.s),0<n.O&&(n.L=new _p(Hr(n.Ia,n,n.g),n.O)),Wm(n.V,n.g,"readystatechange",n.gb),e=n.H?tC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ta(1),function wp(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),y=0;y<h.length;y++){var w=h[y].split("=");if(1<w.length){var D=w[0];w=w[1];var A=D.split("_");l=2<=A.length&&"type"==A[1]?l+(D+"=")+w+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function ey(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function fC(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=ty(n,t),i==Jm){4==e&&(n.o=4,Cr(14),r=!1),lo(n.j,n.m,null,"[Incomplete Response]");break}if(i==Qm){n.o=4,Cr(15),lo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}lo(n.j,n.m,i,null),iy(n,i)}ey(n)&&i!=Jm&&i!=Qm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Cr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Bw(e),e.L=!0,Cr(11))):(lo(n.j,n.m,t,"[Invalid Chunked Response]"),Lu(n),Uc(n))}function ty(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Jm:(t=Number(e.substring(t,r)),isNaN(t)?Qm:(r+=1)+t>e.length?Jm:(e=e.substr(r,t),n.C=r+t,e))}function Cl(n){n.Y=Date.now()+n.P,ny(n,n.P)}function ny(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sa(Hr(n.eb,n),e)}function ry(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Uc(n){0==n.l.G||n.I||AC(n.l,n)}function Lu(n){ry(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Eh(n.W),dC(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function iy(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Tl(t.i,n)))if(t.I=n.N,!n.J&&Tl(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;hy(t),xp(t)}Uw(t),Cr(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Sa(Hr(t.ab,t),6e3));if(1>=Aw(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Hc(t,11)}else if((n.J||t.g==n)&&hy(t),!cp(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const A=w[4];null!=A&&(t.za=A,t.h.info("SVER="+t.za));const k=w[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const Z=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.i;!a.g&&(Fi(Z,"spdy")||Fi(Z,"quic")||Fi(Z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Mw(a,a.h),a.h=null))}if(r.D){const me=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;me&&(r.sa=me,Rn(r.F,r.D,me))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=RC(r,r.H?r.la:null,r.W),l.J){vC(r.i,l);var h=l,y=r.K;y&&h.setTimeout(y),h.B&&(ry(h),Cl(h)),r.g=l}else TC(r);0<t.l.length&&Rp(t)}else"stop"!=w[0]&&"close"!=w[0]||Hc(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Hc(t,7):Mp(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}Ta(4)}catch{}}function Cp(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ap(n)||"string"==typeof n)QI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ap(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function vS(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ap(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Bc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Bc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function sy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Vu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Vu(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Vu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Qe=Ip.prototype).setTimeout=function(n){this.P=n},Qe.gb=function(n){n=n.target;const e=this.L;e&&3==Ma(n)?e.l():this.Ia(n)},Qe.Ia=function(n){try{if(n==this.g)e:{const D=Ma(this.g);var e=this.g.Da();const A=this.g.ba();if(!(3>D)&&(3!=D||rC||this.g&&(this.h.h||this.g.ga()||Ap(this.g)))){this.I||4!=D||7==e||Ta(8==e||0>=A?3:2),ry(this);var t=this.g.ba();this.N=t;t:if(ey(this)){var r=Ap(this.g);n="";var i=r.length,a=4==Ma(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Lu(this),Uc(this);var l="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function yi(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,y=this.g;if((h=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cp(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Cr(12),Lu(this),Uc(this);break e}lo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,iy(this,t)}this.U?(fC(this,D,l),rC&&this.i&&3==D&&(Wm(this.V,this.W,"tick",this.fb),this.W.start())):(lo(this.j,this.m,l,null),iy(this,l)),4==D&&Lu(this),this.i&&!this.I&&(4==D?AC(this.l,this):(this.i=!1,Cl(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Cr(12)):(this.o=0,Cr(13)),Lu(this),Uc(this)}}}catch{}},Qe.fb=function(){if(this.g){var n=Ma(this.g),e=this.g.ga();this.C<e.length&&(ry(this),fC(this,n,e),this.i&&4!=n&&Cl(this))}},Qe.cancel=function(){this.I=!0,Lu(this)},Qe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function qm(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ta(3),Cr(17)),Lu(this),this.o=2,Uc(this)):ny(this,this.Y-n)},(Qe=Bc.prototype).R=function(){sy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Qe.T=function(){return sy(this),this.g.concat()},Qe.get=function(n,e){return Vu(this.h,n)?this.h[n]:e},Qe.set=function(n,e){Vu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Qe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var ww=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof bl){this.g=void 0!==e?e:n.g,bp(this,n.j),this.s=n.s,Dp(this,n.i),oy(this,n.m),this.l=n.l,e=n.h;var t=new Sp;t.i=e.i,e.g&&(t.g=new Bc(e.g),t.h=e.h),Ew(this,t),this.o=n.o}else n&&(t=String(n).match(ww))?(this.g=!!e,bp(this,t[1]||"",!0),this.s=Ch(t[2]||""),Dp(this,t[3]||"",!0),oy(this,t[4]),this.l=Ch(t[5]||"",!0),Ew(this,t[6]||"",!0),this.o=Ch(t[7]||"")):(this.g=!!e,this.h=new Sp(null,this.g))}function Aa(n){return new bl(n)}function bp(n,e,t){n.j=t?Ch(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Dp(n,e,t){n.i=t?Ch(e,!0):e}function oy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ew(n,e,t){e instanceof Sp?(n.h=e,function ES(n,e){e&&!n.j&&(Dl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Dw(this,r),br(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=bh(e,yC)),n.h=new Sp(e,n.g))}function Rn(n,e,t){n.h.set(e,t)}function Tp(n){return Rn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ch(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,pC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function pC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}bl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bh(e,bw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bh(e,bw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(bh(t,"/"==t.charAt(0)?mC:gC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bh(t,FR)),n.join("")};var bw=/[#\/\?@]/g,gC=/[#\?:]/g,mC=/[#\?]/g,yC=/[#\?@]/g,FR=/#/g;function Sp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Dl(n){n.g||(n.g=new Bc,n.h=0,n.i&&function wS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Dw(n,e){Dl(n),e=jc(n,e),Vu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Vu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&sy(n)))}function _C(n,e){return Dl(n),e=jc(n,e),Vu(n.g.h,e)}function br(n,e,t){Dw(n,e),0<t.length&&(n.i=null,n.g.set(jc(n,e),lp(t)),n.h+=t.length)}function jc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Tw(n){this.l=n||CS,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qe=Sp.prototype).add=function(n,e){Dl(this),this.i=null,n=jc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Qe.forEach=function(n,e){Dl(this),this.g.forEach(function(t,r){QI(t,function(i){n.call(e,i,r,this)},this)},this)},Qe.T=function(){Dl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},Qe.R=function(n){Dl(this);var e=[];if("string"==typeof n)_C(this,n)&&(e=JI(e,this.g.get(jc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=JI(e,n[t])}return e},Qe.set=function(n,e){return Dl(this),this.i=null,_C(this,n=jc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Qe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var CS=10;function Sw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Aw(n){return n.h?1:n.g?n.g.size:0}function Tl(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Mw(n,e){n.g?n.g.add(e):n.h=e}function vC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function xw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return lp(n.i)}function Rw(){}function wC(){this.g=new Rw}function LR(n,e,t){const r=t||"";try{Cp(n,function(i,a){let l=i;Pc(i)&&(l=dw(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Dh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function is(n){this.l=n.$b||null,this.j=n.ib||!1}function ay(n,e){ei.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Nw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tw.prototype.cancel=function(){if(this.i=xw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Rw.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},Rw.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},Gr(is,$m),is.prototype.g=function(){return new ay(this.l,this.j)},is.prototype.i=function(n){return function(){return n}}({}),Gr(ay,ei);var Nw=0;function Wo(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Vi(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ui(n)}function Ui(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qe=ay.prototype).open=function(n,e){if(this.readyState!=Nw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ui(this)},Qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vi(this)),this.readyState=Nw},Qe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Rt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wo(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Qe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vi(this):Ui(this),3==this.readyState&&Wo(this)}},Qe.Ua=function(n){this.g&&(this.response=this.responseText=n,Vi(this))},Qe.Ta=function(n){this.g&&(this.response=n,Vi(this))},Qe.ha=function(){this.g&&Vi(this)},Qe.setRequestHeader=function(n,e){this.v.append(n,e)},Qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ay.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var IC=Rt.JSON.parse;function gr(n){ei.call(this),this.headers=new Bc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=CC,this.K=this.L=!1}Gr(gr,ei);var CC="",bS=/^https?$/i,DS=["POST","PUT"];function kw(n){return"content-type"==n.toLowerCase()}function Th(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,bC(n),uy(n)}function bC(n){n.D||(n.D=!0,ti(n,"complete"),ti(n,"error"))}function Pw(n){if(n.h&&typeof zv<"u"&&(!n.C[1]||4!=Ma(n)||2!=n.ba()))if(n.v&&4==Ma(n))ku(n.Fa,0,n);else if(ti(n,"readystatechange"),4==Ma(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(ww)[1]||null;if(!i&&Rt.self&&Rt.self.location){var a=Rt.self.location.protocol;i=a.substr(0,a.length-1)}r=!bS.test(i?i.toLowerCase():"")}t=r}if(t)ti(n,"complete"),ti(n,"success");else{n.m=6;try{var l=2<Ma(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.ba()+"]",bC(n)}}finally{uy(n)}}}function uy(n,e){if(n.g){Ow(n);const t=n.g,r=n.C[0]?op:null;n.g=null,n.C=null,e||ti(n,"ready");try{t.onreadystatechange=r}catch{}}}function Ow(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function Ma(n){return n.g?n.g.readyState:0}function Ap(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case CC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ly(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function SS(n){let e="";return Kv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Rn(n,e,t))}function Sh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function cy(n){this.za=0,this.l=[],this.h=new As,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Sh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Sh("baseRetryDelayMs",5e3,n),this.$a=Sh("retryDelaySeedMs",1e4,n),this.Ya=Sh("forwardChannelMaxRetries",2,n),this.ra=Sh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Tw(n&&n.concurrentRequestLimit),this.Ca=new wC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Mp(n){if(Fw(n),3==n.G){var e=n.V++,t=Aa(n.F);Rn(t,"SID",n.J),Rn(t,"RID",e),Rn(t,"TYPE","terminate"),Ah(n,t),(e=new Ip(n,n.h,e,void 0)).K=2,e.v=Tp(Aa(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=NC(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Cl(e)}xC(n)}function xp(n){n.g&&(Bw(n),n.g.cancel(),n.g=null)}function Fw(n){xp(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),hy(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function dy(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Rp(n)}function Rp(n){Sw(n.i)||n.m||(n.m=!0,yp(n.Ha,n),n.C=0)}function Lw(n,e){var t;t=e?e.m:n.V++;const r=Aa(n.F);Rn(r,"SID",n.J),Rn(r,"RID",t),Rn(r,"AID",n.U),Ah(n,r),n.o&&n.s&&ly(r,n.o,n.s),t=new Ip(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Vw(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Mw(n.i,t),vw(t,r,e)}function Ah(n,e){n.j&&Cp({},function(t,r){Rn(e,r,t)})}function Vw(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Hr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let y=0;y<t;y++){let w=i[y].h;const D=i[y].g;if(w-=a,0>w)a=Math.max(0,i[y].h-100),h=!1;else try{LR(D,l,"req"+w+"_")}catch{r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function TC(n){n.g||n.u||(n.Y=1,yp(n.Ga,n),n.A=0)}function Uw(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Sa(Hr(n.Ga,n),MC(n,n.A)),n.A++,0))}function Bw(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function SC(n){n.g=new Ip(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Aa(n.oa);Rn(e,"RID","rpc"),Rn(e,"SID",n.J),Rn(e,"CI",n.N?"0":"1"),Rn(e,"AID",n.U),Ah(n,e),Rn(e,"TYPE","xmlhttp"),n.o&&n.s&&ly(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Tp(Aa(e)),t.s=null,t.U=!0,Xm(t,n)}function hy(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function AC(n,e){var t=null;if(n.g==e){hy(n),Bw(n),n.g=null;var r=2}else{if(!Tl(n.i,e))return;t=e.D,vC(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ti(r=Ou(),new Vc(r,t,e,i)),Rp(n)}else TC(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function DC(n,e){return!(Aw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Sa(Hr(n.Ha,n,e),MC(n,n.C)),n.C++,0)))}(n,e)||2==r&&Uw(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Hc(n,5);break;case 4:Hc(n,10);break;case 3:Hc(n,6);break;default:Hc(n,2)}}function MC(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Hc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Hr(n.jb,n);t||(t=new bl("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||bp(t,"https"),Tp(t)),function EC(n,e){const t=new As;if(Rt.Image){const r=new Image;r.onload=Fm(Dh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Fm(Dh,t,r,"TestLoadImage: error",!1,e),r.onabort=Fm(Dh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fm(Dh,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Cr(2);n.G=0,n.j&&n.j.va(e),xC(n),Fw(n)}function xC(n){n.G=0,n.I=-1,n.j&&((0!=xw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,lp(n.l),n.l.length=0),n.j.ua())}function RC(n,e,t){let r=function Iw(n){return n instanceof bl?Aa(n):new bl(n,void 0)}(t);if(""!=r.i)e&&Dp(r,e+"."+r.i),oy(r,r.m);else{const i=Rt.location;r=function Cw(n,e,t,r){var i=new bl(null,void 0);return n&&bp(i,n),e&&Dp(i,e),t&&oy(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Kv(n.aa,function(i,a){Rn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Rn(r,e,t),Rn(r,"VER",n.ma),Ah(n,r),r}function NC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new gr(t&&n.Ba&&!n.qa?new is({ib:!0}):n.qa)).L=n.H,e}function kC(){}function fy(){if(_h&&!(10<=Number(sw)))throw Error("Environmental error: no available transport.")}function Ms(n,e){ei.call(this),this.g=new cy(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!cp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Mh(this)}function PC(n){Km.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function OC(){Zm.call(this),this.status=1}function Mh(n){this.g=n}(Qe=gr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ym.g(),this.C=function yw(n){return n.h||(n.h=n.i())}(this.u?this.u:Ym),this.g.onreadystatechange=Hr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Th(this,a)}n=t||"";const i=new Bc(this.headers);r&&Cp(r,function(a,l){i.set(l,a)}),r=function PR(n){e:{var e=kw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=Wv(DS,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ow(this),0<this.B&&((this.K=function TS(n){return _h&&function nw(){return function Da(n){var e=Vm;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=XI(String(Lm)).split("."),t=XI("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=qv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||qv(0==i[2].length,0==a[2].length)||qv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hr(this.pa,this)):this.A=ku(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Th(this,a)}},Qe.pa=function(){typeof zv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ti(this,"timeout"),this.abort(8))},Qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ti(this,"complete"),ti(this,"abort"),uy(this))},Qe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uy(this,!0)),gr.Z.M.call(this)},Qe.Fa=function(){this.s||(this.F||this.v||this.l?Pw(this):this.cb())},Qe.cb=function(){Pw(this)},Qe.ba=function(){try{return 2<Ma(this)?this.g.status:-1}catch{return-1}},Qe.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Qe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),IC(e)}},Qe.Da=function(){return this.m},Qe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qe=cy.prototype).ma=8,Qe.G=1,Qe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Qe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Ip(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=tC(a),Yv(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Vw(this,i,e),Rn(t=Aa(this.F),"RID",n),Rn(t,"CVER",22),this.D&&Rn(t,"X-HTTP-Session-Id",this.D),Ah(this,t),this.o&&a&&ly(t,this.o,a),Mw(this.i,i),this.Ra&&Rn(t,"TYPE","init"),this.ja?(Rn(t,"$req",e),Rn(t,"SID","null"),i.$=!0,vw(i,t,null)):vw(i,t,e),this.G=2}}else 3==this.G&&(n?Lw(this,n):0==this.l.length||Sw(this.i)||Lw(this))},Qe.Ga=function(){if(this.u=null,SC(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Sa(Hr(this.bb,this),n)}},Qe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Cr(10),xp(this),SC(this))},Qe.ab=function(){null!=this.v&&(this.v=null,xp(this),Uw(this),Cr(19))},Qe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Cr(2)):(this.h.info("Failed to ping google.com"),Cr(1))},(Qe=kC.prototype).xa=function(){},Qe.wa=function(){},Qe.va=function(){},Qe.ua=function(){},Qe.Oa=function(){},fy.prototype.g=function(n,e){return new Ms(n,e)},Gr(Ms,ei),Ms.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),yp(Hr(n.hb,n,e))),Cr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=RC(n,null,n.W),Rp(n)},Ms.prototype.close=function(){Mp(this.g)},Ms.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,dy(this.g,e)}else this.v?((e={}).__data__=dw(n),dy(this.g,e)):dy(this.g,n)},Ms.prototype.M=function(){this.g.j=null,delete this.j,Mp(this.g),delete this.g,Ms.Z.M.call(this)},Gr(PC,Km),Gr(OC,Zm),Gr(Mh,kC),Mh.prototype.xa=function(){ti(this.g,"a")},Mh.prototype.wa=function(n){ti(this.g,new PC(n))},Mh.prototype.va=function(n){ti(this.g,new OC(n))},Mh.prototype.ua=function(){ti(this.g,"b")},fy.prototype.createWebChannel=fy.prototype.g,Ms.prototype.send=Ms.prototype.u,Ms.prototype.open=Ms.prototype.m,Ms.prototype.close=Ms.prototype.close,Fu.NO_ERROR=0,Fu.TIMEOUT=8,Fu.HTTP_ERROR=6,mw.COMPLETE="complete",_w.EventType=Ih,Ih.OPEN="a",Ih.CLOSE="b",Ih.ERROR="c",Ih.MESSAGE="d",ei.prototype.listen=ei.prototype.N,gr.prototype.listenOnce=gr.prototype.O,gr.prototype.getLastError=gr.prototype.La,gr.prototype.getLastErrorCode=gr.prototype.Da,gr.prototype.getStatus=gr.prototype.ba,gr.prototype.getResponseJson=gr.prototype.Qa,gr.prototype.getResponseText=gr.prototype.ga,gr.prototype.send=gr.prototype.ea;var AS=uo.createWebChannelTransport=function(){return new fy},FC=uo.getStatEventTarget=function(){return Ou()},py=uo.ErrorCode=Fu,LC=uo.EventType=mw,VC=uo.Event=Pu,jw=uo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},UC=uo.FetchXmlHttpFactory=is,Np=uo.WebChannel=_w,BC=uo.XhrIo=gr;const Hw="@firebase/firestore";class Ar{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");let Gc="9.9.2";const ss=new Ts.Yd("@firebase/firestore");function Gw(){return ss.logLevel}function Pe(n,...e){if(ss.logLevel<=Ts.in.DEBUG){const t=e.map(jC);ss.debug(`Firestore (${Gc}): ${n}`,...t)}}function Dr(n,...e){if(ss.logLevel<=Ts.in.ERROR){const t=e.map(jC);ss.error(`Firestore (${Gc}): ${n}`,...t)}}function Uu(n,...e){if(ss.logLevel<=Ts.in.WARN){const t=e.map(jC);ss.warn(`Firestore (${Gc}): ${n}`,...t)}}function jC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Gc}) INTERNAL ASSERTION FAILED: `+n;throw Dr(e),new Error(e)}function bt(n,e){n||it()}function we(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class zc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ar.UNAUTHENTICATED))}shutdown(){}}class gy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class my{constructor(e){this.t=e,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new zr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,ye.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},y=w=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new zr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new zc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new Ar(e)}}class sr{constructor(e,t,r){this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class UR{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new sr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,Pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.p=t.token,new zw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function GC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Ww{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=GC(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function Wc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function zC(n){return n+"\0"}class jn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jn.fromMillis(Date.now())}static fromDate(e){return jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new jn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new jn(0,0))}static max(){return new Dt(new jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bu{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Bu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends Bu{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const RS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class or extends Bu{construct(e,t,r){return new or(e,t,r)}static isValidIdentifier(e){return RS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new or(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new ke(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new ke(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new ke(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new ke(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new or(t)}static emptyPath(){return new or([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(tn.fromString(e))}static fromName(e){return new ze(tn.fromString(e).popFirst(5))}static empty(){return new ze(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new tn(e.slice()))}}class kp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function yy(n){return n.fields.find(e=>2===e.kind)}function Sl(n){return n.fields.filter(e=>2!==e.kind)}kp.UNKNOWN_ID=-1;class Al{constructor(e,t){this.fieldPath=e,this.kind=t}}class Op{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Op(0,os.min())}}function WC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new jn(t+1,0):new jn(t,r));return new os(i,ze.empty(),e)}function qC(n){return new os(n.readTime,n.key,-1)}class os{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new os(Dt.min(),ze.empty(),-1)}static max(){return new os(Dt.max(),ze.empty(),-1)}}function _y(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const qw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $C{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ju(n){return $w.apply(this,arguments)}function $w(){return $w=(0,ye.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==qw)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),$w.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},y=>r(y))}),l=!0,a===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let y=0;y<a;y++){const w=y;t(e[w]).next(D=>{l[w]=D,++h,h===a&&r(l)},D=>i(D))}})}static doWhile(e,t){return new ae((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Kw{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new zr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new vy(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=Ey(r.target.error);this.T.reject(new vy(e,i))}}static open(e,t,r,i){try{return new Kw(t,e.transaction(i,r))}catch(a){throw new vy(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wy(t)}}class xa{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===xa.v((0,P.z$)())&&Dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),qc(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,P.hl)())return!1;if(xa.S())return!0;const e=(0,P.z$)(),t=xa.v(e),r=0<t&&t<10,i=xa.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new vy(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new ke(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new ke(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new vy(e,h))},a.onupgradeneeded=l=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.P.M(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=r=>t.O(r)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.k(e);const y=Kw.open(a.db,e,l?"readonly":"readwrite",r),w=i(y).next(D=>(y.R(),D)).catch(D=>(y.abort(D),ae.reject(D))).toPromise();return w.catch(()=>{}),yield y.A,w}catch(y){const w=y,D="FirebaseError"!==w.name&&h<3;if(Pe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),a.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jR{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return qc(this.$.delete())}}class vy extends ke{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hu(n){return"IndexedDbTransactionError"===n.name}class wy{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qc(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),qc(this.store.add(e))}get(e){return qc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),qc(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),qc(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ae((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}W(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,l,h)=>h.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new ae((r,i)=>{t.onerror=a=>{const l=Ey(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}G(e,t){const r=[];return new ae((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const y=new jR(h),w=t(h.primaryKey,h.value,y);if(w instanceof ae){const D=w.catch(A=>(y.done(),ae.reject(A)));r.push(D)}y.isDone?i():null===y.U?h.continue():h.continue(y.U)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qc(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Ey(r.target.error);t(i)}})}let KC=!1;function Ey(n){const e=xa.v((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return KC||(KC=!0,setTimeout(()=>{throw r},0)),r}}return n}class Fp{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Hu(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ju(r)}yield t.Z(1)}))}}class kS{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return ae.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Pe("IndexBackiller",`Processing collection: ${l}`),this.nt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.st(i,a)).next(h=>(Pe("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=qC(a);_y(l,r)>0&&(r=l)}),new os(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class as{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function ZC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $c(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function YC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}as.ot=-1;class Yn{constructor(e,t){this.comparator=e,this.root=t||ni.EMPTY}insert(e,t){return new Yn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Iy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Iy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Iy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Iy(this.root,e,this.comparator,!0)}}class Iy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ni.RED,this.left=i??ni.EMPTY,this.right=a??ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ni(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1,ni.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nn{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QC(this.data.getIterator())}getIteratorFrom(e){return new QC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nn(this.comparator);return t.data=e,t}}class QC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kc(n){return n.hasNext()?n.getNext():void 0}class xs{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new xs([])}unionWith(e){let t=new nn(or.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new xs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Mr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mr.EMPTY_BYTE_STRING=new Mr("");const XC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ml(n){if(bt(!!n),"string"==typeof n){let e=0;const t=XC.exec(n);if(bt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hn(n.seconds),nanos:Hn(n.nanos)}}function Hn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Zc(n){return"string"==typeof n?Mr.fromBase64String(n):Mr.fromUint8Array(n)}function Cy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Zw(n){const e=n.mapValue.fields.__previous_value__;return Cy(e)?Zw(e):e}function Lp(n){const e=Ml(n.mapValue.fields.__local_write_time__.timestampValue);return new jn(e.seconds,e.nanos)}class PS{constructor(e,t,r,i,a,l,h,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=y}}class Gu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gu&&e.projectId===this.projectId&&e.database===this.database}}function Yc(n){return null==n}function Vp(n){return 0===n&&1/n==-1/0}function Yw(n){return"number"==typeof n&&Number.isInteger(n)&&!Vp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},by={nullValue:"NULL_VALUE"};function Qc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cy(n)?4:Sy(n)?9007199254740991:10:it()}function Ra(n,e){if(n===e)return!0;const t=Qc(n);if(t!==Qc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lp(n).isEqual(Lp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ml(r.timestampValue),l=Ml(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Zc(n.bytesValue).isEqual(Zc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Hn(r.geoPointValue.latitude)===Hn(i.geoPointValue.latitude)&&Hn(r.geoPointValue.longitude)===Hn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Hn(r.integerValue)===Hn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Hn(r.doubleValue),l=Hn(i.doubleValue);return a===l?Vp(a)===Vp(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Wc(n.arrayValue.values||[],e.arrayValue.values||[],Ra);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(ZC(a)!==ZC(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!Ra(a[h],l[h])))return!1;return!0}(n,e);default:return it()}var i}function Up(n,e){return void 0!==(n.values||[]).find(t=>Ra(t,e))}function Rl(n,e){if(n===e)return 0;const t=Qc(n),r=Qc(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Hn(i.integerValue||i.doubleValue),h=Hn(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return eb(n.timestampValue,e.timestampValue);case 4:return eb(Lp(n),Lp(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Zc(i),h=Zc(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let y=0;y<l.length&&y<h.length;y++){const w=Nt(l[y],h[y]);if(0!==w)return w}return Nt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Nt(Hn(i.latitude),Hn(a.latitude));return 0!==l?l:Nt(Hn(i.longitude),Hn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let y=0;y<l.length&&y<h.length;++y){const w=Rl(l[y],h[y]);if(w)return w}return Nt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===xl.mapValue&&a===xl.mapValue)return 0;if(i===xl.mapValue)return 1;if(a===xl.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),y=a.fields||{},w=Object.keys(y);h.sort(),w.sort();for(let D=0;D<h.length&&D<w.length;++D){const A=Nt(h[D],w[D]);if(0!==A)return A;const k=Rl(l[h[D]],y[w[D]]);if(0!==k)return k}return Nt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw it()}}function eb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=Ml(n),r=Ml(e),i=Nt(t.seconds,r.seconds);return 0!==i?i:Nt(t.nanos,r.nanos)}function xh(n){return Dy(n)}function Dy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ml(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Zc(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Dy(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Dy(r.fields[h])}`;return a+"}"}(n.mapValue):it();var e}function Nl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qw(n){return!!n&&"integerValue"in n}function Bp(n){return!!n&&"arrayValue"in n}function Jw(n){return!!n&&"nullValue"in n}function tb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ty(n){return!!n&&"mapValue"in n}function jp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $c(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Sy(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Xw(n){return"nullValue"in n?by:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nl(Gu.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function nb(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nl(Gu.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?xl:it()}function Ay(n,e){const t=Rl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rb(n,e){const t=Rl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ty(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jp(t)}setAll(e){let t=or.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=jp(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Ty(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ty(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$c(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ri(jp(this.value))}}function My(n){const e=[];return $c(n.fields,(t,r)=>{const i=new or([t]);if(Ty(r)){const a=My(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new xs(e)}class Sn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Sn(e,0,Dt.min(),Dt.min(),ri.empty(),0)}static newFoundDocument(e,t,r){return new Sn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new Sn(e,2,t,Dt.min(),ri.empty(),0)}static newUnknownDocument(e,t){return new Sn(e,3,t,Dt.min(),ri.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ib{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ut=null}}function Jc(n,e=null,t=[],r=[],i=null,a=null,l=null){return new ib(n,e,t,r,i,a,l)}function kl(n){const e=we(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+xh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Yc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xh(r)).join(",")),e.ut=t}return e.ut}function xy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!lb(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ra(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!n0(n.startAt,e.startAt)&&n0(n.endAt,e.endAt)}function Hp(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Rh(n,e){return n.filters.filter(t=>t instanceof ii&&t.field.isEqual(e))}function sb(n,e,t){let r=by,i=!0;for(const a of Rh(n,e)){let l=by,h=!0;switch(a.op){case"<":case"<=":l=Xw(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=by}Ay({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Ay({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function Ry(n,e,t){let r=xl,i=!0;for(const a of Rh(n,e)){let l=xl,h=!0;switch(a.op){case">=":case">":l=nb(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=xl}rb({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];rb({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class ii extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new FS(e,t,r):"array-contains"===t?new ab(e,r):"in"===t?new ub(e,r):"not-in"===t?new LS(e,r):"array-contains-any"===t?new VS(e,r):new ii(e,t,r)}static ct(e,t,r){return"in"===t?new e0(e,r):new ob(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Rl(t,this.value)):null!==t&&Qc(this.value)===Qc(t)&&this.at(Rl(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class FS extends ii{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.at(t)}}class e0 extends ii{constructor(e,t){super(e,"in",t),this.keys=t0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ob extends ii{constructor(e,t){super(e,"not-in",t),this.keys=t0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function t0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class ab extends ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bp(t)&&Up(t.arrayValue,this.value)}}class ub extends ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Up(this.value.arrayValue,t)}}class LS extends ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(Up(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Up(this.value.arrayValue,t)}}class VS extends ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Up(this.value.arrayValue,r))}}class Pl{constructor(e,t){this.position=e,this.inclusive=t}}class Nh{constructor(e,t="asc"){this.field=e,this.dir=t}}function lb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function US(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?ze.comparator(ze.fromName(l.referenceValue),t.key):Rl(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function n0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ra(n.position[t],e.position[t]))return!1;return!0}class zu{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=y,this.lt=null,this.ft=null}}function cb(n,e,t,r,i,a,l,h){return new zu(n,e,t,r,i,a,l,h)}function Gp(n){return new zu(n)}function BS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function r0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function s0(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Ny(n){return null!==n.collectionGroup}function kh(n){const e=we(n);if(null===e.lt){e.lt=[];const t=s0(e),r=r0(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Nh(t)),e.lt.push(new Nh(or.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Nh(or.keyField(),a))}}}return e.lt}function us(n){const e=we(n);if(!e.ft)if("F"===e.limitType)e.ft=Jc(e.path,e.collectionGroup,kh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of kh(e))t.push(new Nh(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Pl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Pl(e.startAt.position,e.startAt.inclusive):null;e.ft=Jc(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function ky(n,e,t){return new zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zp(n,e){return xy(us(n),us(e))&&n.limitType===e.limitType}function db(n){return`${kl(us(n))}|lt:${n.limitType}`}function o0(n){return`Query(target=${function OS(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${xh(r.value)}`;var r}).join(", ")}]`),Yc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>xh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>xh(t)).join(",")),`Target(${e})`}(us(n))}; limitType=${n.limitType})`}function a0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=US(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,kh(t),r)||t.endAt&&!function(i,a,l){const h=US(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,kh(t),r)));var t,r}function hb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fb(n){return(e,t)=>{let r=!1;for(const i of kh(n)){const a=Wp(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Wp(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),y=l.data.field(i);return null!==h&&null!==y?Rl(h,y):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function u0(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vp(e)?"-0":e}}function l0(n){return{integerValue:""+n}}function c0(n,e){return Yw(e)?l0(e):u0(n,e)}class qp{constructor(){this._=void 0}}function pb(n,e,t){return n instanceof $p?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Xc?mb(n,e):n instanceof ed?yb(n,e):function(r,i){const a=gb(r,i),l=Oh(a)+Oh(r._t);return Qw(a)&&Qw(r._t)?l0(l):u0(r.wt,l)}(n,e)}function jS(n,e,t){return n instanceof Xc?mb(n,e):n instanceof ed?yb(n,e):t}function gb(n,e){return n instanceof Ph?Qw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class $p extends qp{}class Xc extends qp{constructor(e){super(),this.elements=e}}function mb(n,e){const t=_b(e);for(const r of n.elements)t.some(i=>Ra(i,r))||t.push(r);return{arrayValue:{values:t}}}class ed extends qp{constructor(e){super(),this.elements=e}}function yb(n,e){let t=_b(e);for(const r of n.elements)t=t.filter(i=>!Ra(i,r));return{arrayValue:{values:t}}}class Ph extends qp{constructor(e,t){super(),this.wt=e,this._t=t}}function Oh(n){return Hn(n.integerValue||n.doubleValue)}function _b(n){return Bp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class td{constructor(e,t){this.field=e,this.transform=t}}class HS{constructor(e,t){this.version=e,this.transformResults=t}}class Nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ol(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Py{}function vb(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Lh(n.key,Nn.none()):new Fh(n.key,n.data,Nn.none());{const t=n.data,r=ri.empty();let i=new nn(or.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new ka(n.key,r,new xs(i.toArray()),Nn.none())}}function GS(n,e,t){n instanceof Fh?function(r,i,a){const l=r.value.clone(),h=Fy(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ka?function(r,i,a){if(!Ol(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Fy(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(d0(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Fl(n,e,t,r){return n instanceof Fh?function(i,a,l,h){if(!Ol(i.precondition,a))return l;const y=i.value.clone(),w=h0(i.fieldTransforms,h,a);return y.setAll(w),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof ka?function(i,a,l,h){if(!Ol(i.precondition,a))return l;const y=h0(i.fieldTransforms,h,a),w=a.data;return w.setAll(d0(i)),w.setAll(y),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,Ol(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function Oy(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=gb(r.transform,i||null);null!=a&&(null===t&&(t=ri.empty()),t.set(r.field,a))}return t||null}function wb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Wc(t,r,(i,a)=>function Na(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Xc&&r instanceof Xc||t instanceof ed&&r instanceof ed?Wc(t.elements,r.elements,Ra):t instanceof Ph&&r instanceof Ph?Ra(t._t,r._t):t instanceof $p&&r instanceof $p);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Fh extends Py{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ka extends Py{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function d0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Fy(n,e,t){const r=new Map;bt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,jS(l,h,t[i]))}return r}function h0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,pb(a,l,e))}return r}class Lh extends Py{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f0 extends Py{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class HR{constructor(e){this.count=e}}var ar,Kt;function p0(n){switch(n){default:return it();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function Ly(n){if(void 0===n)return Dr("GRPC error has no .code"),de.UNKNOWN;switch(n){case ar.OK:return de.OK;case ar.CANCELLED:return de.CANCELLED;case ar.UNKNOWN:return de.UNKNOWN;case ar.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case ar.INTERNAL:return de.INTERNAL;case ar.UNAVAILABLE:return de.UNAVAILABLE;case ar.UNAUTHENTICATED:return de.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case ar.NOT_FOUND:return de.NOT_FOUND;case ar.ALREADY_EXISTS:return de.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return de.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case ar.ABORTED:return de.ABORTED;case ar.OUT_OF_RANGE:return de.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return de.UNIMPLEMENTED;case ar.DATA_LOSS:return de.DATA_LOSS;default:return it()}}(Kt=ar||(ar={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";class Pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$c(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return YC(this.inner)}size(){return this.innerSize}}const zS=new Yn(ze.comparator);function ls(){return zS}const Eb=new Yn(ze.comparator);function Kp(...n){let e=Eb;for(const t of n)e=e.insert(t.key,t);return e}function g0(n){let e=Eb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ho(){return Zp()}function m0(){return Zp()}function Zp(){return new Pa(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ib=new Yn(ze.comparator),Cb=new nn(ze.comparator);function Ut(...n){let e=Cb;for(const t of n)e=e.add(t);return e}const bb=new nn(Nt);function Yp(){return bb}class Qp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Vh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Qp(Dt.min(),r,Yp(),ls(),Ut())}}class Vh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Vh(Mr.EMPTY_BYTE_STRING,t,Ut(),Ut(),Ut())}}class Vy{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class _i{constructor(e,t){this.targetId=e,this.It=t}}class nd{constructor(e,t,r=Mr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Db{constructor(){this.Tt=0,this.Et=$S(),this.At=Mr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Ut(),t=Ut(),r=Ut();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new Vh(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=$S()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class WS{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=ls(),this.Bt=qS(),this.Lt=new nn(Nt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(Hp(a))if(0===r){const l=new ze(a.path);this.Kt(t,l,Sn.newNoDocument(l,Dt.min()))}else bt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,l)=>{const h=this.Ht(l);if(h){if(a.current&&Hp(h.target)){const y=new ze(h.target.path);null!==this.$t.get(y)||this.Xt(l,y)||this.Kt(l,y,Sn.newNoDocument(y,e))}a.vt&&(t.set(l,a.St()),a.Dt())}});let r=Ut();this.Bt.forEach((a,l)=>{let h=!0;l.forEachWhile(y=>{const w=this.Ht(y);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.$t.forEach((a,l)=>l.setReadTime(e));const i=new Qp(e,t,this.Lt,this.$t,r);return this.$t=ls(),this.Bt=qS(),this.Lt=new nn(Nt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Db,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new nn(Nt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new Db),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function qS(){return new Yn(ze.comparator)}function $S(){return new Yn(ze.comparator)}const Tb={asc:"ASCENDING",desc:"DESCENDING"},Sb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Jp{constructor(e,t){this.databaseId=e,this.dt=t}}function Xp(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uy(n,e){return n.dt?e.toBase64():e.toUint8Array()}function KS(n,e){return Xp(n,e.toTimestamp())}function xr(n){return bt(!!n),Dt.fromTimestamp(function(e){const t=Ml(e);return new jn(t.seconds,t.nanos)}(n))}function y0(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ab(n){const e=tn.fromString(n);return bt(w0(e)),e}function Oa(n,e){return y0(n.databaseId,e.path)}function Fa(n,e){const t=Ab(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(tg(t))}function eg(n,e){return y0(n.databaseId,e)}function _0(n){const e=Ab(n);return 4===e.length?tn.emptyPath():tg(e)}function Uh(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tg(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function By(n,e,t){return{name:Oa(n,e),fields:t.value.mapValue.fields}}function ZS(n,e,t){const r=Fa(n,e.name),i=xr(e.updateTime),a=new ri({mapValue:{fields:e.fields}}),l=Sn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Bh(n,e){let t;if(e instanceof Fh)t={update:By(n,e.key,e.value)};else if(e instanceof Lh)t={delete:Oa(n,e.key)};else if(e instanceof ka)t={update:By(n,e.key,e.data),updateMask:Rb(e.fieldMask)};else{if(!(e instanceof f0))return it();t={verify:Oa(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof $p)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Xc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ed)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ph)return{fieldPath:a.field.canonicalString(),increment:l._t};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:KS(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function Ll(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Nn.updateTime(xr(i.updateTime)):void 0!==i.exists?Nn.exists(i.exists):Nn.none():Nn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(bt("REQUEST_TIME"===l.setToServerValue),h=new $p):"appendMissingElements"in l?h=new Xc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new ed(l.removeAllFromArray.values||[]):"increment"in l?h=new Ph(a,l.increment):it();const y=or.fromServerFormat(l.fieldPath);return new td(y,h)}(n,i)):[];var i;if(e.update){const i=Fa(n,e.update.name),a=new ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new xs((e.updateMask.fieldPaths||[]).map(w=>or.fromServerFormat(w)));return new ka(i,a,l,t,r)}return new Fh(i,a,t,r)}if(e.delete){const i=Fa(n,e.delete);return new Lh(i,t)}if(e.verify){const i=Fa(n,e.verify);return new f0(i,t)}return it()}function v0(n,e){return{documents:[eg(n,e.path)]}}function jy(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=eg(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=eg(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const w=y.map(D=>function(A){if("=="===A.op){if(tb(A.value))return{unaryFilter:{field:jh(A.field),op:"IS_NAN"}};if(Jw(A.value))return{unaryFilter:{field:jh(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(tb(A.value))return{unaryFilter:{field:jh(A.field),op:"IS_NOT_NAN"}};if(Jw(A.value))return{unaryFilter:{field:jh(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jh(A.field),op:nA(A.op),value:A.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(w=>{return{field:jh((D=w).field),direction:tA(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.dt||Yc(w)?w:{value:w});var w,h,y;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function JS(n){let e=_0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){bt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=eA(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new Nh(rd((A=D).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let h=null;t.limit&&(h=function(D){let A;return A="object"==typeof D?D.value:D,Yc(A)?null:A}(t.limit));let y=null;var D;t.startAt&&(y=new Pl((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Pl(D.values||[],!D.before)}(t.endAt)),cb(e,i,l,a,h,"F",y,w)}function eA(n){return n?void 0!==n.unaryFilter?[rA(n)]:void 0!==n.fieldFilter?[xb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>eA(e)).reduce((e,t)=>e.concat(t)):it():[]}function tA(n){return Tb[n]}function nA(n){return Sb[n]}function jh(n){return{fieldPath:n.canonicalString()}}function rd(n){return or.fromServerFormat(n.fieldPath)}function xb(n){return ii.create(rd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function rA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=rd(n.unaryFilter.field);return ii.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=rd(n.unaryFilter.field);return ii.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=rd(n.unaryFilter.field);return ii.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=rd(n.unaryFilter.field);return ii.create(i,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function Rb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function w0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=E0(e)),e=iA(n.get(t),e);return E0(e)}function iA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function E0(n){return n+"\x01\x01"}function La(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&it(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let y;0===i.length?y=h:(i+=h,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:it()}a=l+2}return new tn(r)}const I0=["userId","batchId"];function ng(n,e){return[n,Bi(e)]}function C0(n,e,t){return[n,Bi(e),t]}const Nb={},sA=["prefixPath","collectionGroup","readTime","documentId"],oA=["prefixPath","collectionGroup","documentId"],GR=["collectionGroup","readTime","prefixPath","documentId"],kb=["canonicalId","targetId"],zR=["targetId","path"],WR=["path","targetId"],qR=["collectionId","parent"],$R=["indexId","uid"],KR=["uid","sequenceNumber"],ZR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YR=["indexId","uid","orderedDocumentKey"],QR=["userId","collectionPath","documentId"],Hy=["userId","collectionPath","largestBatchId"],JR=["userId","collectionGroup","largestBatchId"],b0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gy=[...b0,"documentOverlays"],D0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],T0=D0,XR=[...T0,"indexConfiguration","indexState","indexEntries"];class rg extends $C{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Rr(n,e){const t=we(n);return xa.N(t.ee,e)}class S0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&GS(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=m0();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const y=vb(l,h);null!==y&&r.set(i.key,y),l.isValidDocument()||l.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ut())}isEqual(e){return this.batchId===e.batchId&&Wc(this.mutations,e.mutations,(t,r)=>wb(t,r))&&Wc(this.baseMutations,e.baseMutations,(t,r)=>wb(t,r))}}class zy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){bt(e.mutations.length===r.length);let i=Ib;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new zy(e,t,r,i)}}class Pb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class id{constructor(e,t,r,i,a=Dt.min(),l=Dt.min(),h=Mr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new id(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new id(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new id(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ob{constructor(e){this.ne=e}}function ig(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Wy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Oa(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Xp(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hh(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Hh(e.version)}}var i,a;return r}function Wy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gh(n){const e=new jn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function zh(n,e){const t=(e.baseMutations||[]).map(a=>Ll(n.ne,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Ll(n.ne,a)),i=jn.fromMillis(e.localWriteTimeMs);return new S0(e.batchId,i,t,r)}function sg(n){const e=Gh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Gh(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(bt(1===(i=n.query).documents.length),r=us(Gp(_0(i.documents[0])))):r=us(JS(n.query)),new id(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Mr.fromBase64String(n.resumeToken))}function Fb(n,e){const t=Hh(e.snapshotVersion),r=Hh(e.lastLimboFreeSnapshotVersion);let i;i=Hp(e.target)?v0(n.ne,e.target):jy(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:kl(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function A0(n){const e=JS({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ky(e,e.limit,"L"):e}function Lb(n,e){return new Pb(e.largestBatchId,Ll(n.ne,e.overlayMutation))}function Vb(n,e){const t=e.path.lastSegment();return[n,Bi(e.path.popLast()),t]}function M0(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Hh(r.readTime),documentKey:Bi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ub{getBundleMetadata(e,t){return uA(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Gh(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return uA(e).put({bundleId:(r=t).id,createTime:Hh(xr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return fo(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:A0(i.bundledQuery),readTime:Gh(i.readTime)};var i})}saveNamedQuery(e,t){return fo(e).put({name:(r=t).name,readTime:Hh(xr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function uA(n){return Rr(n,"bundles")}function fo(n){return Rr(n,"namedQueries")}class qy{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new qy(e,t.uid||"")}getOverlay(e,t){return sd(e).get(Vb(this.userId,t)).next(r=>r?Lb(this.wt,r):null)}getOverlays(e,t){const r=ho();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new Pb(t,l);i.push(this.ie(e,h))}),ae.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Bi(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(sd(e).W("collectionPathOverlayIndex",h))}),ae.waitFor(a)}getOverlaysForCollection(e,t,r){const i=ho(),a=Bi(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return sd(e).K("collectionPathOverlayIndex",l).next(h=>{for(const y of h){const w=Lb(this.wt,y);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=ho();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sd(e).J({index:"collectionGroupOverlayIndex",range:h},(y,w,D)=>{const A=Lb(this.wt,w);a.size()<i||A.largestBatchId===l?(a.set(A.getKey(),A),l=A.largestBatchId):D.done()}).next(()=>a)}ie(e,t){return sd(e).put(function(r,i,a){const[l,h,y]=Vb(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Bh(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function sd(n){return Rr(n,"documentOverlays")}class od{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Hn(e.integerValue));else if("doubleValue"in e){const r=Hn(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),Vp(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Zc(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?Sy(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):it()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),ze.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function Rs(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Bb(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=Rs(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}od.ye=new od;class x0{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=Bb(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=Bb(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class lA{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class cA{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class ad{constructor(){this.Oe=new x0,this.Fe=new lA(this.Oe),this.$e=new cA(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class Vl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Vl(this.indexId,this.documentKey,this.arrayValue,r)}}function Ul(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=jb(n.arrayValue,e.arrayValue),0!==t?t:(t=jb(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function jb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Hb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=yy(e);if(void 0!==t&&!this.Qe(t))return!1;const r=Sl(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const l=r[i];if(!this.je(this.Ke,l)||!this.We(this.Ue[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],l))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Gb{constructor(){this.ze=new R0}addToCollectionParentIndex(e,t){return this.ze.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(os.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(os.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class R0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nn(tn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nn(tn.comparator)).toArray()}}const og=new Uint8Array(0);class dA{constructor(e,t){this.user=e,this.databaseId=t,this.He=new R0,this.Je=new Pa(r=>kl(r),(r,i)=>xy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:Bi(i)};return $y(e).put(a)}return ae.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[zC(t),""],!1,!0);return $y(e).K(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(La(l.parent))}return r})}addFieldIndex(e,t){const r=ag(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=ud(e);return a.next(h=>{l.put(M0(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=ag(e),i=ud(e),a=po(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=po(e);let i=!0;const a=new Map;return ae.forEach(this.Ye(t),l=>this.Xe(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=Ut();const h=[];return ae.forEach(a,(y,w)=>{var D;Pe("IndexedDbIndexManager",`Using index ${D=y,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(St=>`${St.fieldPath}:${St.kind}`).join(",")}`} to execute ${kl(t)}`);const A=function(St,Tt){const Lt=yy(Tt);if(void 0===Lt)return null;for(const Yt of Rh(St,Lt.fieldPath))switch(Yt.op){case"array-contains-any":return Yt.value.arrayValue.values||[];case"array-contains":return[Yt.value]}return null}(w,y),k=function(St,Tt){const Lt=new Map;for(const Yt of Sl(Tt))for(const oi of Rh(St,Yt.fieldPath))switch(oi.op){case"==":case"in":Lt.set(Yt.fieldPath.canonicalString(),oi.value);break;case"not-in":case"!=":return Lt.set(Yt.fieldPath.canonicalString(),oi.value),Array.from(Lt.values())}return null}(w,y),U=function(St,Tt){const Lt=[];let Yt=!0;for(const oi of Sl(Tt)){const LE=0===oi.kind?sb(St,oi.fieldPath,St.startAt):Ry(St,oi.fieldPath,St.startAt);Lt.push(LE.value),Yt&&(Yt=LE.inclusive)}return new Pl(Lt,Yt)}(w,y),Z=function(St,Tt){const Lt=[];let Yt=!0;for(const oi of Sl(Tt)){const LE=0===oi.kind?Ry(St,oi.fieldPath,St.endAt):sb(St,oi.fieldPath,St.endAt);Lt.push(LE.value),Yt&&(Yt=LE.inclusive)}return new Pl(Lt,Yt)}(w,y),me=this.Ze(y,w,U),xe=this.Ze(y,w,Z),ct=this.tn(y,w,k),mt=this.en(y.indexId,A,me,U.inclusive,xe,Z.inclusive,ct);return ae.forEach(mt,St=>r.j(St,t.limit).next(Tt=>{Tt.forEach(Lt=>{const Yt=ze.fromSegments(Lt.documentKey);l.has(Yt)||(l=l.add(Yt),h.push(Yt))})}))}).next(()=>h)}return ae.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,l,h){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),w=y/(null!=t?t.length:1),D=[];for(let A=0;A<y;++A){const k=t?this.nn(t[A/w]):og,U=this.sn(e,k,r[A%w],i),Z=this.rn(e,k,a[A%w],l),me=h.map(xe=>this.sn(e,k,xe,!0));D.push(...this.createRange(U,Z,me))}return D}sn(e,t,r,i){const a=new Vl(e,ze.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new Vl(e,ze.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new Hb(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.Ge(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return ae.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new nn(or.comparator),y=!1;for(const w of l.filters){const D=w;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?y=!0:h=h.add(D.field))}for(const w of l.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new ad;for(const i of Sl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Be(i.kind);od.ye.re(a,l)}return r.Me()}nn(e){const t=new ad;return od.ye.re(e,t.Be(0)),t.Me()}un(e,t){const r=new ad;return od.ye.re(Nl(this.databaseId,t),r.Be(function(i){const a=Sl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Me()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new ad);let a=0;for(const l of Sl(e)){const h=r[a++];for(const y of i)if(this.cn(t,l.fieldPath)&&Bp(h))i=this.an(i,l,h);else{const w=y.Be(l.kind);od.ye.re(h,w)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Me();return t}an(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const y=new ad;y.seed(h.Me()),od.ye.re(l,y.Be(t.kind)),a.push(y)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof ii&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ag(e),i=ud(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const l=[];return ae.forEach(a,h=>i.get([h.indexId,this.uid]).next(y=>{l.push(function(w,D){const A=D?new Op(D.sequenceNumber,new os(Gh(D.readTime),new ze(La(D.documentKey)),D.largestBatchId)):Op.empty(),k=w.fields.map(([U,Z])=>new Al(or.fromServerFormat(U),Z));return new kp(w.indexId,w.collectionGroup,k,A)}(h,y))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Nt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ag(e),a=ud(e);return this.ln(e).next(l=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ae.forEach(h,y=>a.put(M0(y.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ae.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ae.forEach(h,y=>this.fn(e,i,y).next(w=>{const D=this.dn(a,y);return w.isEqual(D)?ae.resolve():this._n(e,a,y,w,D)}))))})}wn(e,t,r,i){return po(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return po(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=po(e);let a=new nn(Ul);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(l,h)=>{a=a.add(new Vl(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}dn(e,t){let r=new nn(Ul);const i=this.on(t,e);if(null==i)return r;const a=yy(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Bp(l))for(const h of l.arrayValue.values||[])r=r.add(new Vl(t.indexId,e.key,this.nn(h),i))}else r=r.add(new Vl(t.indexId,e.key,og,i));return r}_n(e,t,r,i,a){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,y,w,D,A){const k=h.getIterator(),U=y.getIterator();let Z=Kc(k),me=Kc(U);for(;Z||me;){let xe=!1,ct=!1;if(Z&&me){const mt=w(Z,me);mt<0?ct=!0:mt>0&&(xe=!0)}else null!=Z?ct=!0:xe=!0;xe?(D(me),me=Kc(U)):ct?(A(Z),Z=Kc(k)):(Z=Kc(k),me=Kc(U))}}(i,a,Ul,h=>{l.push(this.wn(e,t,r,h))},h=>{l.push(this.mn(e,t,r,h))}),ae.waitFor(l)}ln(e){let t=1;return ud(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Ul(l,h)).filter((l,h,y)=>!h||0!==Ul(l,y[h-1]));const i=[];i.push(e);for(const l of r){const h=Ul(l,e),y=Ul(l,t);if(0===h)i[0]=e.Le();else if(h>0&&y<0)i.push(l),i.push(l.Le());else if(y>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,og,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,og,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Va)}getMinOffset(e,t){return ae.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||it())).next(Va)}}function $y(n){return Rr(n,"collectionParents")}function po(n){return Rr(n,"indexEntries")}function ag(n){return Rr(n,"indexConfiguration")}function ud(n){return Rr(n,"indexState")}function Va(n){bt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;_y(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new os(e.readTime,e.documentKey,t)}const zb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ns{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ns(e,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Wb(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const y=r.J({range:l},(D,A,k)=>(h++,k.delete()));a.push(y.next(()=>{bt(1===h)}));const w=[];for(const D of t.mutations){const A=C0(e,D.key.path,t.batchId);a.push(i.delete(A)),w.push(D.key)}return ae.waitFor(a).next(()=>w)}function Ky(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Ns.DEFAULT_COLLECTION_PERCENTILE=10,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ns.DEFAULT=new Ns(41943040,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ns.DISABLED=new Ns(-1,0,0);class Zy{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){bt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Zy(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wu(e).J({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=ug(e),l=Wu(e);return l.add({}).next(h=>{bt("number"==typeof h);const y=new S0(h,t,r,i),w=function(k,U,Z){const me=Z.baseMutations.map(ct=>Bh(k.ne,ct)),xe=Z.mutations.map(ct=>Bh(k.ne,ct));return{userId:U,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:me,mutations:xe}}(this.wt,this.userId,y),D=[];let A=new nn((k,U)=>Nt(k.canonicalString(),U.canonicalString()));for(const k of i){const U=C0(this.userId,k.key.path,h);A=A.add(k.key.path.popLast()),D.push(l.put(w)),D.push(a.put(U,Nb))}return A.forEach(k=>{D.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.gn[h]=y.keys()}),ae.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return Wu(e).get(t).next(r=>r?(bt(r.userId===this.userId),zh(this.wt,r)):null)}yn(e,t){return this.gn[t]?ae.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Wu(e).J({index:"userMutationsIndex",range:i},(l,h,y)=>{h.userId===this.userId&&(bt(h.batchId>=r),a=zh(this.wt,h)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Wu(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wu(e).K("userMutationsIndex",t).next(r=>r.map(i=>zh(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ng(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ug(e).J({range:i},(l,h,y)=>{const[w,D,A]=l,k=La(D);if(w===this.userId&&t.path.isEqual(k))return Wu(e).get(A).next(U=>{if(!U)throw it();bt(U.userId===this.userId),a.push(zh(this.wt,U))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nn(Nt);const i=[];return t.forEach(a=>{const l=ng(this.userId,a.path),h=IDBKeyRange.lowerBound(l),y=ug(e).J({range:h},(w,D,A)=>{const[k,U,Z]=w,me=La(U);k===this.userId&&a.path.isEqual(me)?r=r.add(Z):A.done()});i.push(y)}),ae.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=ng(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new nn(Nt);return ug(e).J({range:l},(y,w,D)=>{const[A,k,U]=y,Z=La(k);A===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(h=h.add(U)):D.done()}).next(()=>this.pn(e,h))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Wu(e).get(a).next(l=>{if(null===l)throw it();bt(l.userId===this.userId),r.push(zh(this.wt,l))}))}),ae.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Wb(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ae.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ug(e).J({range:r},(a,l,h)=>{if(a[0]===this.userId){const y=La(a[1]);i.push(y)}else h.done()}).next(()=>{bt(0===i.length)})})}containsKey(e,t){return qb(e,this.userId,t)}Tn(e){return N0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qb(n,e,t){const r=ng(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return ug(n).J({range:a,H:!0},(h,y,w)=>{const[D,A,k]=h;D===e&&A===i&&(l=!0),w.done()}).next(()=>l)}function Wu(n){return Rr(n,"mutations")}function ug(n){return Rr(n,"documentMutations")}function N0(n){return Rr(n,"mutationQueues")}class ld{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new ld(0)}static Rn(){return new ld(-1)}}class $b{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new ld(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Dt.fromTimestamp(new jn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>lg(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return lg(e).J((l,h)=>{const y=sg(h);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>ae.waitFor(a)).next(()=>i)}forEachTarget(e,t){return lg(e).J((r,i)=>{const a=sg(i);t(a)})}bn(e){return Yy(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}Pn(e,t){return Yy(e).put("targetGlobalKey",t)}vn(e,t){return lg(e).put(Fb(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=kl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return lg(e).J({range:i,index:"queryTargetsIndex"},(l,h,y)=>{const w=sg(h);xy(t,w.target)&&(a=w,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=qu(e);return t.forEach(l=>{const h=Bi(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ae.waitFor(i)}removeMatchingKeys(e,t,r){const i=qu(e);return ae.forEach(t,a=>{const l=Bi(a.path);return ae.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=qu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=qu(e);let a=Ut();return i.J({range:r,H:!0},(l,h,y)=>{const w=La(l[1]),D=new ze(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Bi(t.path),i=IDBKeyRange.bound([r],[zC(r)],!1,!0);let a=0;return qu(e).J({index:"documentTargetsIndex",H:!0,range:i},([l,h],y,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}te(e,t){return lg(e).get(t).next(r=>r?sg(r):null)}}function lg(n){return Rr(n,"targets")}function Yy(n){return Rr(n,"targetGlobal")}function qu(n){return Rr(n,"targetDocuments")}function k0([n,e],[t,r]){const i=Nt(n,t);return 0===i?Nt(e,r):i}class hA{constructor(e){this.Sn=e,this.buffer=new nn(k0),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();k0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kb{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Hu(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ju(r)}yield t.kn(3e5)}))}}class Zb{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(as.ot);const r=new hA(t);return this.Mn.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(zb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zb):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let r,i,a,l,h,y,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,l=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,h=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),Gw()<=Ts.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(y-h)+`ms\n\tRemoved ${A} documents in `+(w-y)+`ms\nTotal Duration: ${w-D}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class Qy{constructor(e,t){this.db=e,this.garbageCollector=new Zb(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return cd(e,r)}removeReference(e,t,r){return cd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cd(e,t)}Un(e,t){return function(r,i){let a=!1;return N0(r).Y(l=>qb(r,l,i).next(h=>(h&&(a=!0),ae.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(l,h)=>{if(h<=t){const y=this.Un(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),qu(e).delete([0,Bi(l.path)])))});i.push(y)}}).next(()=>ae.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cd(e,t)}Ln(e,t){const r=qu(e);let i,a=as.ot;return r.J({index:"documentTargetsIndex"},([l,h],{path:y,sequenceNumber:w})=>{0===l?(a!==as.ot&&t(new ze(La(i)),a),a=w,i=y):a=as.ot}).next(()=>{a!==as.ot&&t(new ze(La(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cd(n,e){return qu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Bi(e.path),sequenceNumber:r}));var r}class P0{constructor(){this.changes=new Pa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fA{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return dd(e).put(r)}removeEntry(e,t,r){return dd(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Wy(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Sn.newInvalidDocument(t);return dd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Jy(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:Sn.newInvalidDocument(t)};return dd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Jy(t))},(i,a)=>{r={document:this.Kn(t,a),size:Ky(a)}}).next(()=>r)}getEntries(e,t){let r=ls();return this.Qn(e,t,(i,a)=>{const l=this.Kn(i,a);r=r.insert(i,l)}).next(()=>r)}jn(e,t){let r=ls(),i=new Yn(ze.comparator);return this.Qn(e,t,(a,l)=>{const h=this.Kn(a,l);r=r.insert(a,h),i=i.insert(a,Ky(l))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return ae.resolve();let i=new nn(F0);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(Jy(i.first()),Jy(i.last())),l=i.getIterator();let h=l.getNext();return dd(e).J({index:"documentKeyIndex",range:a},(y,w,D)=>{const A=ze.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&F0(h,A)<0;)r(h,null),h=l.getNext();h&&h.isEqual(A)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?D.q(Jy(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Wy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dd(e).K(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=ls();for(const y of l){const w=this.Kn(ze.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=ls();const l=pA(t,r),h=pA(t,os.max());return dd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(y,w,D)=>{const A=this.Kn(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(A.key,A),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new Yb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Qb(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}qn(e,t){return Qb(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function aA(n,e){let t;if(e.document)t=ZS(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=Gh(e.noDocument.readTime);t=Sn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=ze.fromSegments(e.unknownDocument.path),i=Gh(e.unknownDocument.version);t=Sn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new jn(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return Sn.newInvalidDocument(e)}}function O0(n){return new fA(n)}class Yb extends P0{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Pa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new nn((a,l)=>Nt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const y=ig(this.zn.wt,l);i=i.add(a.path.popLast()),r+=Ky(y)-h.size,t.push(this.zn.addEntry(e,a,y))}else if(r-=h.size,this.trackRemovals){const y=ig(this.zn.wt,l.convertToNoDocument(Dt.min()));t.push(this.zn.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,l)=>{this.Hn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function Qb(n){return Rr(n,"remoteDocumentGlobal")}function dd(n){return Rr(n,"remoteDocumentsV14")}function Jy(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pA(n,e){const t=e.documentKey.path.toArray();return[n,Wy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function F0(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Nt(t[a],r[a]),i)return i;return i=Nt(t.length,r.length),i||(i=Nt(t[t.length-2],r[r.length-2]),i||Nt(t[t.length-1],r[r.length-1]))}class gA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Jb{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Fl(r.mutation,i,xs.empty(),jn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ut()){const i=ho();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Kp();return a.forEach((h,y)=>{l=l.insert(h,y.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ho();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ut()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=ls();const l=Zp(),h=Zp();return t.forEach((y,w)=>{const D=r.get(w.key);i.has(w.key)&&(void 0===D||D.mutation instanceof ka)?a=a.insert(w.key,w):void 0!==D&&(l.set(w.key,D.mutation.getFieldMask()),Fl(D.mutation,w,D.mutation.getFieldMask(),jn.now()))}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((w,D)=>l.set(w,D)),t.forEach((w,D)=>{var A;return h.set(w,new gA(D,null!==(A=l.get(w))&&void 0!==A?A:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Zp();let i=new Yn((l,h)=>l-h),a=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(y=>{const w=t.get(y);if(null===w)return;let D=r.get(y)||xs.empty();D=h.applyToLocalView(w,D),r.set(y,D);const A=(i.get(h.batchId)||Ut()).add(y);i=i.insert(h.batchId,A)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),w=y.key,D=y.value,A=m0();D.forEach(k=>{if(!a.has(k)){const U=vb(t.get(k),r.get(k));null!==U&&A.set(k,U),a=a.add(k)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,A))}return ae.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ny(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ae.resolve(ho());let h=-1,y=a;return l.next(w=>ae.forEach(w,(D,A)=>(h<A.largestBatchId&&(h=A.largestBatchId),a.get(D)?ae.resolve():this.getBaseDocument(e,D,A).next(k=>{y=y.insert(D,k)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,y,w,Ut())).next(D=>({batchId:h,changes:g0(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let i=Kp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Kp();return this.indexManager.getCollectionParents(e,i).next(l=>ae.forEach(l,h=>{const y=(w=t,D=h.child(i),new zu(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(w=>{w.forEach((D,A)=>{a=a.insert(D,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,y)=>{const w=y.getKey();null===i.get(w)&&(i=i.insert(w,Sn.newInvalidDocument(w)))});let l=Kp();return i.forEach((h,y)=>{const w=a.get(h);void 0!==w&&Fl(w.mutation,y,xs.empty(),jn.now()),a0(t,y)&&(l=l.insert(h,y))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ae.resolve(Sn.newInvalidDocument(t))}}class mA{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ae.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:xr(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:A0(r.bundledQuery),readTime:xr(r.readTime)}),ae.resolve();var r}}class eN{constructor(){this.overlays=new Yn(ze.comparator),this.Xn=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ho();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=ho(),a=t.length+1,l=new ze(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const y=h.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Yn((w,D)=>w-D);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=ho(),a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const h=ho(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,D)=>h.set(w,D)),!(h.size()>=i)););return ae.resolve(h)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Pb(t,r));let a=this.Xn.get(t);void 0===a&&(a=Ut(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class Xb{constructor(){this.Zn=new nn(si.ts),this.es=new nn(si.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new si(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new si(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new ze(new tn([])),r=new si(t,e),i=new si(t,e+1),a=[];return this.es.forEachInRange([r,i],l=>{this.rs(l),a.push(l.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new ze(new tn([])),r=new si(t,e),i=new si(t,e+1);let a=Ut();return this.es.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new si(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class si{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return ze.comparator(e.key,t.key)||Nt(e.ls,t.ls)}static ns(e,t){return Nt(e.ls,t.ls)||ze.comparator(e.key,t.key)}}class tN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new nn(si.ts)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const l=new S0(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.ds=this.ds.add(new si(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ae.resolve(l)}lookupMutationBatch(e,t){return ae.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new si(t,0),i=new si(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],l=>{const h=this._s(l.ls);a.push(h)}),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nn(Nt);return t.forEach(i=>{const a=new si(i,0),l=new si(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,l],h=>{r=r.add(h.ls)})}),ae.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const l=new si(new ze(a),0);let h=new nn(Nt);return this.ds.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(y.ls)),!0)},l),ae.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){bt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ae.forEach(t.mutations,i=>{const a=new si(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new si(t,0),i=this.ds.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nN{constructor(e){this.ps=e,this.docs=new Yn(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=ls();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Sn.newInvalidDocument(i))}),ae.resolve(r)}getAllFromCollection(e,t,r){let i=ls();const a=new ze(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:y}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||_y(qC(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,t,r,i){it()}Is(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yA(this)}getSize(e){return ae.resolve(this.size)}}class yA extends P0{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Xy{constructor(e){this.persistence=e,this.Ts=new Pa(t=>kl(t),xy),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Es=0,this.As=new Xb,this.targetCount=0,this.Rs=ld.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ae.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new ld(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.vn(t),ae.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Ts.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ae.waitFor(a).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.As.containsKey(t))}}class eD{constructor(e,t){this.bs={},this.overlays={},this.Ps=new as(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Xy(this),this.indexManager=new Gb,this.remoteDocumentCache=new nN(r=>this.referenceDelegate.Ss(r)),this.wt=new Ob(t),this.Ds=new mA(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new tN(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new _A(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return ae.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class _A extends $C{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.ks=new Xb,this.Ms=null}static Os(e){return new cg(e)}get Fs(){if(this.Ms)return this.Ms;throw it()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ae.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Fs,r=>{const i=ze.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,Dt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ae.or([()=>ae.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class hd{constructor(e){this.wt=e}M(e,t,r,i){const a=new Kw("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I0,{unique:!0}),h.createObjectStore("documentMutations"),L0(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ae.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),L0(e)),l=l.next(()=>function(h){const y=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,y){return y.store("mutations").K().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I0,{unique:!0});const D=y.store("mutations"),A=w.map(k=>D.put(k));return ae.waitFor(A)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Bs(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(l=l.next(()=>this.Us(a))),r<8&&i>=8&&(l=l.next(()=>this.qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Ks(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const y=h.createObjectStore("documentOverlays",{keyPath:QR});y.createIndex("collectionPathOverlayIndex",Hy,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",JR,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const y=h.createObjectStore("remoteDocumentsV14",{keyPath:sA});y.createIndex("documentKeyIndex",oA),y.createIndex("collectionGroupIndex",GR)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.Qs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:$R}).createIndex("sequenceNumberIndex",KR,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:ZR}).createIndex("documentKeyIndex",YR,{unique:!1})}(e))),l}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Ky(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>ae.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",l).next(h=>ae.forEach(h,y=>{bt(y.userId===a.userId);const w=zh(this.wt,y);return Wb(e,a.userId,w).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((l,h)=>{const y=new tn(l),w=[0,Bi(y)];a.push(t.get(w).next(D=>D?ae.resolve():t.put({targetId:0,path:Bi(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ae.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:qR});const r=t.store("collectionParents"),i=new R0,a=l=>{if(i.add(l)){const h=l.lastSegment(),y=l.popLast();return r.put({collectionId:h,parent:Bi(y)})}};return t.store("remoteDocuments").J({H:!0},(l,h)=>{const y=new tn(l);return a(y.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,h,y],w)=>{const D=La(h);return a(D.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=sg(i),l=Fb(this.wt,a);return t.put(l)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,l)=>{const h=t.store("remoteDocumentsV14"),y=(w=l,w.document?new ze(tn.fromString(w.document.name).popFirst(5)):w.noDocument?ze.fromSegments(w.noDocument.path):w.unknownDocument?ze.fromSegments(w.unknownDocument.path):it()).path.toArray();var w;const D={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>ae.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=O0(this.wt),a=new eD(cg.Os,this.wt.ne);return r.K().next(l=>{const h=new Map;return l.forEach(y=>{var w;let D=null!==(w=h.get(y.userId))&&void 0!==w?w:Ut();zh(this.wt,y).keys().forEach(A=>D=D.add(A)),h.set(y.userId,D)}),ae.forEach(h,(y,w)=>{const D=new Ar(w),A=qy.se(this.wt,D),k=a.getIndexManager(D),U=Zy.se(D,this.wt,k,a.referenceDelegate);return new Jb(i,U,A,k).recalculateAndSaveOverlaysForDocumentKeys(new rg(t,as.ot),y).next()})})}}function L0(n){n.createObjectStore("targetDocuments",{keyPath:zR}).createIndex("documentTargetsIndex",WR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kb,{unique:!0}),n.createObjectStore("targetGlobal")}const dg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class hg{constructor(e,t,r,i,a,l,h,y,w,D,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=l,this.document=h,this.Ws=w,this.zs=D,this.Hs=A,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=k=>Promise.resolve(),!hg.V())throw new ke(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qy(this,i),this.ei=t+"main",this.wt=new Ob(y),this.ni=new xa(this.ei,this.Hs,new hd(this.wt)),this.Vs=new $b(this.referenceDelegate,this.wt),this.remoteDocumentCache=O0(this.wt),this.Ds=new Ub,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===D&&Dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(de.FAILED_PRECONDITION,dg);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new as(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Hu(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return fg(e).get("owner").next(t=>ae.resolve(this.di(t)))}_i(e){return Wh(e).delete(this.clientId)}wi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Rr(r,"clientMetadata");return i.K().next(a=>{const l=e.gi(a,18e5),h=a.filter(y=>-1===l.indexOf(y));return ae.forEach(h,y=>i.delete(y.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ae.resolve(!0):fg(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new ke(de.FAILED_PRECONDITION,dg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wh(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new rg(t,as.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Wh(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Zy.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dA(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return qy.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Hs)?XR:14===l?T0:13===l?D0:12===l?Gy:11===l?b0:void it();var l;let h;return this.ni.runTransaction(e,i,a,y=>(h=new rg(y,this.Ps?this.Ps.next():as.ot),"readwrite-primary"===t?this.ai(h).next(w=>!!w||this.hi(h)).next(w=>{if(!w)throw Dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new ke(de.FAILED_PRECONDITION,qw);return r(h)}).next(w=>this.fi(h).next(()=>w)):this.bi(h).next(()=>r(h)))).then(y=>(h.raiseOnCommittedEvent(),y))}bi(e){return fg(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(de.FAILED_PRECONDITION,dg)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fg(e).put("owner",t)}static V(){return xa.V()}li(e){const t=fg(e);return t.get("owner").next(r=>this.di(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Dr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Dr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fg(n){return Rr(n,"owner")}function Wh(n){return Rr(n,"clientMetadata")}function pg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class qh{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Ut(),i=Ut();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new qh(e,t.fromCache,r,i)}}class vA{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){if(BS(t))return ae.resolve(null);let r=us(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=ky(t,null,"F"),r=us(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Ut(...a);return this.Di.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(y=>{const w=this.ki(t,h);return this.Mi(t,w,l,y.readTime)?this.Ci(e,ky(t,null,"F")):this.Oi(e,w,t,y)}))})))}xi(e,t,r,i){return BS(t)||i.isEqual(Dt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const l=this.ki(t,a);return this.Mi(t,l,r,i)?this.Ni(e,t):(Gw()<=Ts.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),o0(t)),this.Oi(e,l,t,WC(i,-1)))})}ki(e,t){let r=new nn(fb(e));return t.forEach((i,a)=>{a0(e,a)&&(r=r.add(a))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return Gw()<=Ts.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",o0(t)),this.Di.getDocumentsMatchingQuery(e,t,os.min())}Oi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class rN{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new Yn(Nt),this.Bi=new Pa(a=>kl(a),xy),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jb(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function wA(n,e,t,r){return new rN(n,e,t,r)}function EA(n,e){return e_.apply(this,arguments)}function e_(){return e_=(0,ye.Z)(function*(n,e){const t=we(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let y=Ut();for(const w of i){l.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}for(const w of a){h.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}return t.localDocuments.getDocuments(r,y).next(w=>({Ki:w,removedBatchIds:l,addedBatchIds:h}))})})}),e_.apply(this,arguments)}function IA(n,e){const t=we(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(l,h,y,w){const D=y.batch,A=D.keys();let k=ae.resolve();return A.forEach(U=>{k=k.next(()=>w.getEntry(h,U)).next(Z=>{const me=y.docVersions.get(U);bt(null!==me),Z.version.compareTo(me)<0&&(D.applyToRemoteDocument(Z,y),Z.isValidDocument()&&(Z.setReadTime(y.commitVersion),w.addEntry(Z)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Ut();for(let y=0;y<l.mutationResults.length;++y)l.mutationResults[y].transformResults.length>0&&(h=h.add(l.batch.mutations[y].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function tD(n){const e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function CA(n,e){const t=we(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const h=[];e.targetChanges.forEach((D,A)=>{const k=i.get(A);if(!k)return;h.push(t.Vs.removeMatchingKeys(a,D.removedDocuments,A).next(()=>t.Vs.addMatchingKeys(a,D.addedDocuments,A)));let U=k.withSequenceNumber(a.currentSequenceNumber);var Z,me,xe;e.targetMismatches.has(A)?U=U.withResumeToken(Mr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):D.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(D.resumeToken,r)),i=i.insert(A,U),me=U,xe=D,(0===(Z=k).resumeToken.approximateByteSize()||me.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||xe.addedDocuments.size+xe.modifiedDocuments.size+xe.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(a,U))});let y=ls(),w=Ut();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),h.push(nD(a,l,e.documentUpdates).next(D=>{y=D.Gi,w=D.Qi})),!r.isEqual(Dt.min())){const D=t.Vs.getLastRemoteSnapshotVersion(a).next(A=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(D)}return ae.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,w)).next(()=>y)}).then(a=>(t.$i=i,a))}function nD(n,e,t){let r=Ut(),i=Ut();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=ls();return t.forEach((h,y)=>{const w=a.get(h);y.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),y.isNoDocument()&&y.version.isEqual(Dt.min())?(e.removeEntry(h,y.readTime),l=l.insert(h,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(y),l=l.insert(h,y)):Pe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",y.version)}),{Gi:l,Qi:i}})}function rD(n,e){const t=we(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fd(n,e){const t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,ae.resolve(i)):t.Vs.allocateTargetId(r).next(l=>(i=new id(e,l,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function pd(n,e,t){return V0.apply(this,arguments)}function V0(){return V0=(0,ye.Z)(function*(n,e,t){const r=we(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Hu(l))throw l;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),V0.apply(this,arguments)}function t_(n,e,t){const r=we(n);let i=Dt.min(),a=Ut();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,y,w){const D=we(h),A=D.Bi.get(w);return void 0!==A?ae.resolve(D.$i.get(A)):D.Vs.getTargetData(y,w)}(r,l,us(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(l,h.targetId).next(y=>{a=y})}).next(()=>r.Fi.getDocumentsMatchingQuery(l,e,t?i:Dt.min(),t?a:Ut())).next(h=>(bA(r,hb(e),h),{documents:h,ji:a})))}function U0(n,e){const t=we(n),r=we(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(l=>l?l.target:null))}function n_(n,e){const t=we(n),r=t.Li.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,WC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(bA(t,e,i),i))}function bA(n,e,t){let r=Dt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function gg(){return gg=(0,ye.Z)(function*(n,e,t,r){const i=we(n);let a=Ut(),l=ls();for(const w of t){const D=e.Wi(w.metadata.name);w.document&&(a=a.add(D));const A=e.zi(w);A.setReadTime(e.Hi(w.metadata.readTime)),l=l.insert(D,A)}const h=i.Ui.newChangeBuffer({trackRemovals:!0}),y=yield fd(i,(w=r,us(Gp(tn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>nD(w,h,l).next(D=>(h.apply(w),D)).next(D=>i.Vs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>i.Vs.addMatchingKeys(w,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,D.Gi,D.Qi)).next(()=>D.Gi)))}),gg.apply(this,arguments)}function DA(n,e){return B0.apply(this,arguments)}function B0(){return B0=(0,ye.Z)(function*(n,e,t=Ut()){const r=yield fd(n,us(A0(e.bundledQuery))),i=we(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=xr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ds.saveNamedQuery(a,e);const h=r.withResumeToken(Mr.EMPTY_BYTE_STRING,l);return i.$i=i.$i.insert(h.targetId,h),i.Vs.updateTargetData(a,h).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),B0.apply(this,arguments)}function TA(n,e){return`firestore_clients_${n}_${e}`}function SA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function j0(n,e){return`firestore_targets_${n}_${e}`}class r_{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new ke(i.error.code,i.error.message))),l?new r_(e,t,i.state,a):(Dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new ke(r.error.code,r.error.message))),a?new mg(e,r.state,i):(Dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class H0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Yp();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=Yw(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new H0(e,a):(Dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sD{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sD(t.clientId,t.onlineState):(Dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class oD{constructor(){this.activeTargetIds=Yp()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aD{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Yn(Nt),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=TA(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new oD),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(TA(e.persistenceKey,i));if(a){const l=H0.Ji(i,a);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(j0(this.persistenceKey,e));if(r){const i=mg.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(j0(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let l=as.ot;if(null!=a)try{const h=JSON.parse(a);bt("number"==typeof h),l=h}catch(h){Dr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==as.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new r_(this.currentUser,e,t,r),a=SA(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=SA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=j0(this.persistenceKey,e),a=new mg(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return H0.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return r_.Ji(new Ar(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return mg.Ji(i,t)}wr(e){return sD.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),l=[],h=[];return a.forEach(y=>{i.has(y)||l.push(y)}),i.forEach(y=>{a.has(y)||h.push(y)}),this.syncEngine.Or(l,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Yp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class AA{constructor(){this.Fr=new oD,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new oD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class MA{Br(e){}shutdown(){}}class xA{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const iN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class sN{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class oN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const l=this.oo(e,t);Pe("RestConnection","Sending: ",l,r);const h={};return this.uo(h,i,a),this.co(e,l,h,r).then(y=>(Pe("RestConnection","Received: ",y),y),y=>{throw Uu("RestConnection",`${e} failed with error: `,y,"url: ",l,"request:",r),y})}ao(e,t,r,i,a,l){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${iN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,l)=>{const h=new BC;h.listenOnce(LC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case py.NO_ERROR:const w=h.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(w)),a(w);break;case py.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),l(new ke(de.DEADLINE_EXCEEDED,"Request time out"));break;case py.HTTP_ERROR:const D=h.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const A=h.getResponseJson().error;if(A&&A.status&&A.message){const k=function(U){const Z=U.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(Z)>=0?Z:de.UNKNOWN}(A.status);l(new ke(k,A.message))}else l(new ke(de.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new ke(de.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);h.send(t,"POST",y,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=AS(),l=FC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new UC({})),this.uo(h.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");Pe("Connection","Creating WebChannel: "+y,h);const w=a.createWebChannel(y,h);let D=!1,A=!1;const k=new sN({jr:Z=>{A?Pe("Connection","Not sending because WebChannel is closed:",Z):(D||(Pe("Connection","Opening WebChannel transport."),w.open(),D=!0),Pe("Connection","WebChannel sending:",Z),w.send(Z))},Wr:()=>w.close()}),U=(Z,me,xe)=>{Z.listen(me,ct=>{try{xe(ct)}catch(mt){setTimeout(()=>{throw mt},0)}})};return U(w,Np.EventType.OPEN,()=>{A||Pe("Connection","WebChannel transport opened.")}),U(w,Np.EventType.CLOSE,()=>{A||(A=!0,Pe("Connection","WebChannel transport closed"),k.eo())}),U(w,Np.EventType.ERROR,Z=>{A||(A=!0,Uu("Connection","WebChannel transport errored:",Z),k.eo(new ke(de.UNAVAILABLE,"The operation could not be completed")))}),U(w,Np.EventType.MESSAGE,Z=>{var me;if(!A){const xe=Z.data[0];bt(!!xe);const ct=xe,mt=ct.error||(null===(me=ct[0])||void 0===me?void 0:me.error);if(mt){Pe("Connection","WebChannel received error:",mt);const St=mt.status;let Tt=function(Yt){const oi=ar[Yt];if(void 0!==oi)return Ly(oi)}(St),Lt=mt.message;void 0===Tt&&(Tt=de.INTERNAL,Lt="Unknown error status: "+St+" with message "+mt.message),A=!0,k.eo(new ke(Tt,Lt)),w.close()}else Pe("Connection","WebChannel received:",xe),k.no(xe)}}),U(l,VC.STAT_EVENT,Z=>{Z.stat===jw.PROXY?Pe("Connection","Detected buffering proxy"):Z.stat===jw.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.Zr()},0),k}}function RA(){return typeof window<"u"?window:null}function G0(){return typeof document<"u"?document:null}function s(n){return new Jp(n,!0)}class o{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class u{constructor(e,t,r,i,a,l,h,y){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new o(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ye.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ye.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new ke(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ye.Z)(function*(){e.state=0,e.start()}))}qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c extends u{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function YS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:it(),i=e.targetChange.targetIds||[],a=function(y,w){return y.dt?(bt(void 0===w||"string"==typeof w),Mr.fromBase64String(w||"")):(bt(void 0===w||w instanceof Uint8Array),Mr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(y){const w=void 0===y.code?de.UNKNOWN:Ly(y.code);return new ke(w,y.message||"")}(l);t=new nd(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Fa(n,r.document.name),a=xr(r.document.updateTime),l=new ri({mapValue:{fields:r.document.fields}}),h=Sn.newFoundDocument(i,a,l);t=new Vy(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Fa(n,r.document),a=r.readTime?xr(r.readTime):Dt.min(),l=Sn.newNoDocument(i,a);t=new Vy([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Fa(n,r.document);t=new Vy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,a=new HR(r.count||0);t=new _i(r.targetId,a)}}var y;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Dt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Dt.min():a.readTime?xr(a.readTime):Dt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Uh(this.wt),t.addTarget=function(i,a){let l;const h=a.target;return l=Hp(h)?{documents:v0(i,h)}:{query:jy(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=Uy(i,a.resumeToken):a.snapshotVersion.compareTo(Dt.min())>0&&(l.readTime=Xp(i,a.snapshotVersion.toTimestamp())),l}(this.wt,e);const r=function XS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Uh(this.wt),t.removeTarget=e,this.Oo(t)}}class d extends u{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function QS(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,i){let a=xr(r.updateTime?r.updateTime:i);return a.isEqual(Dt.min())&&(a=xr(i)),new HS(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.Jo(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Uh(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Bh(this.wt,r))};this.Oo(t)}}class g extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new ke(de.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(de.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.bo.ao(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ke(de.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class v{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Dr(t),this.su=!1):Pe("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class I{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(h=>{r.enqueueAndForget((0,ye.Z)(function*(){var y;ht(l)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ye.Z)(function*(w){const D=we(w);D.lu.add(4),yield R(D),D._u.set("Unknown"),D.lu.delete(4),yield C(D)}),function(w){return y.apply(this,arguments)})(l))}))}),this._u=new v(r,i)}}function C(n){return S.apply(this,arguments)}function S(){return S=(0,ye.Z)(function*(n){if(ht(n))for(const e of n.fu)yield e(!0)}),S.apply(this,arguments)}function R(n){return F.apply(this,arguments)}function F(){return F=(0,ye.Z)(function*(n){for(const e of n.fu)yield e(!1)}),F.apply(this,arguments)}function q(n,e){const t=we(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),et(t)?We(t):s_(t).Co()&&Ce(t,e))}function ee(n,e){const t=we(n),r=s_(t);t.hu.delete(e),r.Co()&&Oe(t,e),0===t.hu.size&&(r.Co()?r.ko():ht(t)&&t._u.set("Unknown"))}function Ce(n,e){n.wu.Nt(e.targetId),s_(n).Qo(e)}function Oe(n,e){n.wu.Nt(e),s_(n).jo(e)}function We(n){n.wu=new WS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),s_(n).start(),n._u.iu()}function et(n){return ht(n)&&!s_(n).Do()&&n.hu.size>0}function ht(n){return 0===we(n).lu.size}function Ne(n){n.wu=void 0}function yt(n){return zt.apply(this,arguments)}function zt(){return zt=(0,ye.Z)(function*(n){n.hu.forEach((e,t)=>{Ce(n,e)})}),zt.apply(this,arguments)}function kn(n,e){return $u.apply(this,arguments)}function $u(){return $u=(0,ye.Z)(function*(n,e){Ne(n),et(n)?(n._u.uu(e),We(n)):n._u.set("Unknown")}),$u.apply(this,arguments)}function z0(n,e,t){return yg.apply(this,arguments)}function yg(){return yg=(0,ye.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof nd&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $h(n,r)}else if(e instanceof Vy?n.wu.Ut(e):e instanceof _i?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Dt.min()))try{const r=yield tD(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.wu.Yt(a);return l.targetChanges.forEach((h,y)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.hu.get(y);w&&i.hu.set(y,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const y=i.hu.get(h);if(!y)return;i.hu.set(h,y.withResumeToken(Mr.EMPTY_BYTE_STRING,y.snapshotVersion)),Oe(i,h);const w=new id(y.target,h,1,y.sequenceNumber);Ce(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield $h(n,r)}var r}),yg.apply(this,arguments)}function $h(n,e,t){return _g.apply(this,arguments)}function _g(){return _g=(0,ye.Z)(function*(n,e,t){if(!Hu(e))throw e;n.lu.add(1),yield R(n),n._u.set("Offline"),t||(t=()=>tD(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield C(n)}))}),_g.apply(this,arguments)}function i_(n,e){return e().catch(t=>$h(n,t,e))}function Bl(n){return vg.apply(this,arguments)}function vg(){return vg=(0,ye.Z)(function*(n){const e=we(n),t=Kh(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;W0(e);)try{const i=yield rD(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,q0(e,i)}catch(i){yield $h(e,i)}aN(e)&&uN(e)}),vg.apply(this,arguments)}function W0(n){return ht(n)&&n.au.length<10}function q0(n,e){n.au.push(e);const t=Kh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function aN(n){return ht(n)&&!Kh(n).Do()&&n.au.length>0}function uN(n){Kh(n).start()}function pF(n){return NA.apply(this,arguments)}function NA(){return NA=(0,ye.Z)(function*(n){Kh(n).Xo()}),NA.apply(this,arguments)}function gF(n){return kA.apply(this,arguments)}function kA(){return kA=(0,ye.Z)(function*(n){const e=Kh(n);for(const t of n.au)e.Ho(t.mutations)}),kA.apply(this,arguments)}function mF(n,e,t){return PA.apply(this,arguments)}function PA(){return PA=(0,ye.Z)(function*(n,e,t){const r=n.au.shift(),i=zy.from(r,e,t);yield i_(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Bl(n)}),PA.apply(this,arguments)}function yF(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,ye.Z)(function*(n,e){var t;e&&Kh(n).zo&&(yield(t=(0,ye.Z)(function*(r,i){if(p0(a=i.code)&&a!==de.ABORTED){const l=r.au.shift();Kh(r).No(),yield i_(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Bl(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),aN(n)&&uN(n)}),OA.apply(this,arguments)}function lN(n,e){return FA.apply(this,arguments)}function FA(){return FA=(0,ye.Z)(function*(n,e){const t=we(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=ht(t);t.lu.add(3),yield R(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield C(t)}),FA.apply(this,arguments)}function LA(n,e){return VA.apply(this,arguments)}function VA(){return VA=(0,ye.Z)(function*(n,e){const t=we(n);e?(t.lu.delete(2),yield C(t)):e||(t.lu.add(2),yield R(t),t._u.set("Unknown"))}),VA.apply(this,arguments)}function s_(n){return n.mu||(n.mu=function(e,t,r){const i=we(e);return i.tu(),new c(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:yt.bind(null,n),Jr:kn.bind(null,n),Go:z0.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.mu.No(),et(n)?We(n):n._u.set("Unknown")):(yield n.mu.stop(),Ne(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Kh(n){return n.gu||(n.gu=function(e,t,r){const i=we(e);return i.tu(),new d(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:pF.bind(null,n),Jr:yF.bind(null,n),Yo:gF.bind(null,n),Jo:mF.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.No(),yield Bl(n)):(yield n.gu.stop(),n.au.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class UA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new UA(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o_(n,e){if(Dr("AsyncQueue",`${e}: ${n}`),Hu(n))return new ke(de.UNAVAILABLE,`${e}: ${n}`);throw n}class a_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Kp(),this.sortedSet=new Yn(this.comparator)}static emptySet(e){return new a_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof a_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new a_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class cN{constructor(){this.yu=new Yn(ze.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):it():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class u_{constructor(e,t,r,i,a,l,h,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new u_(e,t,a_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class _F{constructor(){this.Iu=void 0,this.listeners=[]}}class vF{constructor(){this.queries=new Pa(e=>db(e),zp),this.onlineState="Unknown",this.Tu=new Set}}function BA(n,e){return jA.apply(this,arguments)}function jA(){return jA=(0,ye.Z)(function*(n,e){const t=we(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new _F),i)try{a.Iu=yield t.onListen(r)}catch(l){const h=o_(l,`Initialization of query '${o0(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&zA(t)}),jA.apply(this,arguments)}function HA(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,ye.Z)(function*(n,e){const t=we(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),GA.apply(this,arguments)}function wF(n,e){const t=we(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Au(i)&&(r=!0);l.Iu=i}}r&&zA(t)}function EF(n,e,t){const r=we(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function zA(n){n.Tu.forEach(e=>{e.next()})}class WA{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new u_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=u_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class IF{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class dN{constructor(e){this.wt=e}Wi(e){return Fa(this.wt,e)}zi(e){return e.metadata.exists?ZS(this.wt,e.document,!1):Sn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return xr(e)}}class CF{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hN(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=tn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new dN(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Ut()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function iD(n,e,t,r){return gg.apply(this,arguments)}(e.localStore,new dN(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield DA(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function hN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fN{constructor(e){this.key=e}}class pN{constructor(e){this.key=e}}class gN{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Ut(),this.mutatedKeys=Ut(),this.Lu=fb(e),this.Uu=new a_(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new cN,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,A)=>{const k=i.get(D),U=a0(this.query,A)?A:null,Z=!!k&&this.mutatedKeys.has(k.key),me=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let xe=!1;k&&U?k.data.isEqual(U.data)?Z!==me&&(r.track({type:3,doc:U}),xe=!0):this.Qu(k,U)||(r.track({type:2,doc:U}),xe=!0,(y&&this.Lu(U,y)>0||w&&this.Lu(U,w)<0)&&(h=!0)):!k&&U?(r.track({type:0,doc:U}),xe=!0):k&&!U&&(r.track({type:1,doc:k}),xe=!0,(y||w)&&(h=!0)),xe&&(U?(l=l.add(U),a=me?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Uu:l,Gu:r,Mi:h,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((w,D)=>function(A,k){const U=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return U(A)-U(k)}(w.type,D.type)||this.Lu(w.doc,D.doc)),this.ju(r);const l=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,y=h!==this.$u;return this.$u=h,0!==a.length||y?{snapshot:new u_(this.query,e.Uu,i,a,e.mutatedKeys,0===h,y,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new cN,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Ut(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new pN(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new fN(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Ut();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return u_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class bF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class DF{constructor(e){this.key=e,this.Xu=!1}}class TF{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new Pa(h=>db(h),zp),this.ec=new Map,this.nc=new Set,this.sc=new Yn(ze.comparator),this.ic=new Map,this.rc=new Xb,this.oc={},this.uc=new Map,this.cc=ld.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function SF(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,ye.Z)(function*(n,e){const t=gM(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const l=yield fd(t.localStore,us(e));t.isPrimaryClient&&q(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield $A(t,e,r,"current"===h)}return i}),qA.apply(this,arguments)}function $A(n,e,t,r){return KA.apply(this,arguments)}function KA(){return KA=(0,ye.Z)(function*(n,e,t,r){n.hc=(D,A,k)=>{return(U=(0,ye.Z)(function*(Z,me,xe,ct){let mt=me.view.Ku(xe);mt.Mi&&(mt=yield t_(Z.localStore,me.query,!1).then(({documents:Lt})=>me.view.Ku(Lt,mt)));const St=ct&&ct.targetChanges.get(me.targetId),Tt=me.view.applyChanges(mt,Z.isPrimaryClient,St);return iM(Z,me.targetId,Tt.zu),Tt.snapshot}),function(Z,me,xe,ct){return U.apply(this,arguments)})(n,D,A,k);var U};const i=yield t_(n.localStore,e,!0),a=new gN(e,i.ji),l=a.Ku(i.documents),h=Vh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=a.applyChanges(l,n.isPrimaryClient,h);iM(n,t,y.zu);const w=new bF(e,t,a);return n.tc.set(e,w),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),y.snapshot}),KA.apply(this,arguments)}function AF(n,e){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,ye.Z)(function*(n,e){const t=we(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!zp(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield pd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ee(t.remoteStore,r.targetId),l_(t,r.targetId)}).catch(ju))):(l_(t,r.targetId),yield pd(t.localStore,r.targetId,!0))}),ZA.apply(this,arguments)}function YA(){return YA=(0,ye.Z)(function*(n,e,t){const r=mM(n);try{const i=yield function(a,l){const h=we(a),y=jn.now(),w=l.reduce((k,U)=>k.add(U.key),Ut());let D,A;return h.persistence.runTransaction("Locally write mutations","readwrite",k=>{let U=ls(),Z=Ut();return h.Ui.getEntries(k,w).next(me=>{U=me,U.forEach((xe,ct)=>{ct.isValidDocument()||(Z=Z.add(xe))})}).next(()=>h.localDocuments.getOverlayedDocuments(k,U)).next(me=>{D=me;const xe=[];for(const ct of l){const mt=Oy(ct,D.get(ct.key).overlayedDocument);null!=mt&&xe.push(new ka(ct.key,mt,My(mt.value.mapValue),Nn.exists(!0)))}return h.mutationQueue.addMutationBatch(k,y,xe,l)}).next(me=>{A=me;const xe=me.applyToLocalDocumentSet(D,Z);return h.documentOverlayCache.saveOverlays(k,me.batchId,xe)})}).then(()=>({batchId:A.batchId,changes:g0(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let y=a.oc[a.currentUser.toKey()];y||(y=new Yn(Nt)),y=y.insert(l,h),a.oc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield gd(r,i.changes),yield Bl(r.remoteStore)}catch(i){const a=o_(i,"Failed to persist write");t.reject(a)}}),YA.apply(this,arguments)}function mN(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,ye.Z)(function*(n,e){const t=we(n);try{const r=yield CA(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.ic.get(a);l&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Xu=!0:i.modifiedDocuments.size>0?bt(l.Xu):i.removedDocuments.size>0&&(bt(l.Xu),l.Xu=!1))}),yield gd(t,r,e)}catch(r){yield ju(r)}}),QA.apply(this,arguments)}function yN(n,e,t){const r=we(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,l)=>{const h=l.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=we(a);h.onlineState=l;let y=!1;h.queries.forEach((w,D)=>{for(const A of D.listeners)A.Eu(l)&&(y=!0)}),y&&zA(h)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xF(n,e,t){return JA.apply(this,arguments)}function JA(){return JA=(0,ye.Z)(function*(n,e,t){const r=we(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let l=new Yn(ze.comparator);l=l.insert(a,Sn.newNoDocument(a,Dt.min()));const h=Ut().add(a),y=new Qp(Dt.min(),new Map,new nn(Nt),l,h);yield mN(r,y),r.sc=r.sc.remove(a),r.ic.delete(e),sM(r)}else yield pd(r.localStore,e,!1).then(()=>l_(r,e,t)).catch(ju)}),JA.apply(this,arguments)}function RF(n,e){return XA.apply(this,arguments)}function XA(){return XA=(0,ye.Z)(function*(n,e){const t=we(n),r=e.batch.batchId;try{const i=yield IA(t.localStore,e);rM(t,r,null),nM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield gd(t,i)}catch(i){yield ju(i)}}),XA.apply(this,arguments)}function NF(n,e,t){return eM.apply(this,arguments)}function eM(){return eM=(0,ye.Z)(function*(n,e,t){const r=we(n);try{const i=yield function(a,l){const h=we(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return h.mutationQueue.lookupMutationBatch(y,l).next(D=>(bt(null!==D),w=D.keys(),h.mutationQueue.removeMutationBatch(y,D))).next(()=>h.mutationQueue.performConsistencyCheck(y)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(y,w,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>h.localDocuments.getDocuments(y,w))})}(r.localStore,e);rM(r,e,t),nM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield gd(r,i)}catch(i){yield ju(i)}}),eM.apply(this,arguments)}function tM(){return tM=(0,ye.Z)(function*(n,e){const t=we(n);ht(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=we(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=o_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),tM.apply(this,arguments)}function nM(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function rM(n,e,t){const r=we(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function l_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||_N(n,r)})}function _N(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(ee(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),sM(n))}function iM(n,e,t){for(const r of t)r instanceof fN?(n.rc.addReference(r.key,e),PF(n,r)):r instanceof pN?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||_N(n,r.key)):it()}function PF(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.nc.add(r),sM(n))}function sM(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new ze(tn.fromString(e)),r=n.cc.next();n.ic.set(r,new DF(t)),n.sc=n.sc.insert(t,r),q(n.remoteStore,new id(us(Gp(t.path)),r,2,as.ot))}}function gd(n,e,t){return oM.apply(this,arguments)}function oM(){return oM=(0,ye.Z)(function*(n,e,t){const r=we(n),i=[],a=[],l=[];var h;r.tc.isEmpty()||(r.tc.forEach((h,y)=>{l.push(r.hc(y,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w.fromCache?"not-current":"current"),i.push(w);const D=qh.Vi(y.targetId,w);a.push(D)}}))}),yield Promise.all(l),r.Zu.Go(i),yield(h=(0,ye.Z)(function*(y,w){const D=we(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ae.forEach(w,k=>ae.forEach(k.Pi,U=>D.persistence.referenceDelegate.addReference(A,k.targetId,U)).next(()=>ae.forEach(k.vi,U=>D.persistence.referenceDelegate.removeReference(A,k.targetId,U)))))}catch(A){if(!Hu(A))throw A;Pe("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const k=A.targetId;if(!A.fromCache){const U=D.$i.get(k),me=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);D.$i=D.$i.insert(k,me)}}}),function(y,w){return h.apply(this,arguments)})(r.localStore,a))}),oM.apply(this,arguments)}function OF(n,e){return aM.apply(this,arguments)}function aM(){return aM=(0,ye.Z)(function*(n,e){const t=we(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield EA(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(l=>{l.forEach(h=>{h.reject(new ke(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield gd(t,r.Ki)}var i}),aM.apply(this,arguments)}function FF(n,e){const t=we(n),r=t.ic.get(e);if(r&&r.Xu)return Ut().add(r.key);{let i=Ut();const a=t.ec.get(e);if(!a)return i;for(const l of a){const h=t.tc.get(l);i=i.unionWith(h.view.qu)}return i}}function LF(n,e){return uM.apply(this,arguments)}function uM(){return uM=(0,ye.Z)(function*(n,e){const t=we(n),r=yield t_(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&iM(t,e.targetId,i.zu),i}),uM.apply(this,arguments)}function VF(n,e){return lM.apply(this,arguments)}function lM(){return lM=(0,ye.Z)(function*(n,e){const t=we(n);return n_(t.localStore,e).then(r=>gd(t,r))}),lM.apply(this,arguments)}function UF(n,e,t,r){return cM.apply(this,arguments)}function cM(){return cM=(0,ye.Z)(function*(n,e,t,r){const i=we(n),a=yield function(l,h){const y=we(l),w=we(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.yn(D,h).next(A=>A?y.localDocuments.getDocuments(D,A):ae.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Bl(i.remoteStore):"acknowledged"===t||"rejected"===t?(rM(i,e,r||null),nM(i,e),h=e,we(we(i.localStore).mutationQueue).In(h)):it(),yield gd(i,a)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),cM.apply(this,arguments)}function dM(){return dM=(0,ye.Z)(function*(n,e){const t=we(n);if(gM(t),mM(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield vN(t,r.toArray());t.ac=!0,yield LA(t.remoteStore,!0);for(const a of i)q(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(l_(t,l),pd(t.localStore,l,!0))),ee(t.remoteStore,l)}),yield i,yield vN(t,r),function(a){const l=we(a);l.ic.forEach((h,y)=>{ee(l.remoteStore,y)}),l.rc.cs(),l.ic=new Map,l.sc=new Yn(ze.comparator)}(t),t.ac=!1,yield LA(t.remoteStore,!1)}}),dM.apply(this,arguments)}function vN(n,e,t){return hM.apply(this,arguments)}function hM(){return hM=(0,ye.Z)(function*(n,e,t){const r=we(n),i=[],a=[];for(const l of e){let h;const y=r.ec.get(l);if(y&&0!==y.length){h=yield fd(r.localStore,us(y[0]));for(const w of y){const D=r.tc.get(w),A=yield LF(r,D);A.snapshot&&a.push(A.snapshot)}}else{const w=yield U0(r.localStore,l);h=yield fd(r.localStore,w),yield $A(r,wN(w),l,!1)}i.push(h)}return r.Zu.Go(a),i}),hM.apply(this,arguments)}function wN(n){return cb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function jF(n){const e=we(n);return we(we(e.localStore).persistence).Ri()}function HF(n,e,t,r){return fM.apply(this,arguments)}function fM(){return fM=(0,ye.Z)(function*(n,e,t,r){const i=we(n);if(i.ac)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield n_(i.localStore,hb(a[0])),h=Qp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield gd(i,l,h);break}case"rejected":yield pd(i.localStore,e,!0),l_(i,e,r);break;default:it()}}),fM.apply(this,arguments)}function GF(n,e,t){return pM.apply(this,arguments)}function pM(){return pM=(0,ye.Z)(function*(n,e,t){const r=gM(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const a=yield U0(r.localStore,i),l=yield fd(r.localStore,a);yield $A(r,wN(a),l.targetId,!1),q(r.remoteStore,l)}for(const i of t)r.ec.has(i)&&(yield pd(r.localStore,i,!1).then(()=>{ee(r.remoteStore,i),l_(r,i)}).catch(ju))}}),pM.apply(this,arguments)}function gM(n){const e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xF.bind(null,e),e.Zu.Go=wF.bind(null,e.eventManager),e.Zu.lc=EF.bind(null,e.eventManager),e}function mM(n){const e=we(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NF.bind(null,e),e}class EN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.wt=s(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return wA(this.persistence,new vA,e.initialUser,this.wt)}_c(e){return new eD(cg.Os,this.wt)}dc(e){return new AA}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class IN extends EN{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield mM(r.yc.syncEngine),yield Bl(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return wA(this.persistence,new vA,e.initialUser,this.wt)}mc(e,t){return new Kb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new kS(t,this.persistence);return new Fp(e.asyncQueue,r)}_c(e){const t=pg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ns.withCacheSize(this.cacheSizeBytes):Ns.DEFAULT;return new hg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,RA(),G0(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new AA}}class WF extends IN{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof aD&&(r.sharedClientState.syncEngine={kr:UF.bind(null,i),Mr:HF.bind(null,i),Or:GF.bind(null,i),Ri:jF.bind(null,i),Nr:VF.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,ye.Z)(function*(l){yield function BF(n,e){return dM.apply(this,arguments)}(r.yc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}dc(e){const t=RA();if(!aD.V(t))throw new ke(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=pg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new aD(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class yM{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>yN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=OF.bind(null,r.syncEngine),yield LA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new vF}createDatastore(e){const t=s(e.databaseInfo.databaseId),r=new oN(e.databaseInfo);return new g(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>yN(this.syncEngine,h,0),l=xA.V()?new xA:new MA,new I(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,y,w){const D=new TF(r,i,a,l,h,y);return w&&(D.ac=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=we(t);Pe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield R(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function CN(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class uD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qF{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new zr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new IF(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,ye.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class $F{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,l){const h=we(a),y=Uh(h.wt)+"/documents",w={documents:l.map(U=>Oa(h.wt,U))},D=yield h.ao("BatchGetDocuments",y,w,l.length),A=new Map;D.forEach(U=>{const Z=function Mb(n,e){return"found"in e?function(t,r){bt(!!r.found);const i=Fa(t,r.found.name),a=xr(r.found.updateTime),l=new ri({mapValue:{fields:r.found.fields}});return Sn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const i=Fa(t,r.missing),a=xr(r.readTime);return Sn.newNoDocument(i,a)}(n,e):it()}(h.wt,U);A.set(Z.key.toString(),Z)});const k=[];return l.forEach(U=>{const Z=A.get(U.toString());bt(!!Z),k.push(Z)}),k}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ze.fromPath(i);e.mutations.push(new f0(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const l=we(i),h=Uh(l.wt)+"/documents",y={writes:a.map(w=>Bh(l.wt,w))};yield l.ro("Commit",h,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Nn.updateTime(t):Nn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new ke(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nn.updateTime(t)}return Nn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class KF{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new o(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,ye.Z)(function*(){const t=new $F(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!Yc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!p0(t)}return!1}}class ZF{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ar.UNAUTHENTICATED,this.clientId=Ww.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ye.Z)(function*(h){Pe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Pe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=o_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function bN(n,e){return _M.apply(this,arguments)}function _M(){return _M=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield EA(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),_M.apply(this,arguments)}function DN(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wM(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>lN(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>lN(e.remoteStore,a)),n.onlineComponents=e}),vM.apply(this,arguments)}function wM(n){return EM.apply(this,arguments)}function EM(){return EM=(0,ye.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield bN(n,new EN)),n.offlineComponents}),EM.apply(this,arguments)}function lD(n){return IM.apply(this,arguments)}function IM(){return IM=(0,ye.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield DN(n,new yM)),n.onlineComponents}),IM.apply(this,arguments)}function TN(n){return wM(n).then(e=>e.persistence)}function cD(n){return wM(n).then(e=>e.localStore)}function SN(n){return lD(n).then(e=>e.remoteStore)}function CM(n){return lD(n).then(e=>e.syncEngine)}function c_(n){return bM.apply(this,arguments)}function bM(){return bM=(0,ye.Z)(function*(n){const e=yield lD(n),t=e.eventManager;return t.onListen=SF.bind(null,e.syncEngine),t.onUnlisten=AF.bind(null,e.syncEngine),t}),bM.apply(this,arguments)}function AN(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,h,y){const w=new uD({next:A=>{a.enqueueAndForget(()=>HA(i,D));const k=A.docs.has(l);!k&&A.fromCache?y.reject(new ke(de.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&A.fromCache&&h&&"server"===h.source?y.reject(new ke(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),D=new WA(Gp(l.path),w,{includeMetadataChanges:!0,Du:!0});return BA(i,D)}(yield c_(n),n.asyncQueue,e,t,r)})),r.promise}function MN(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,h,y){const w=new uD({next:A=>{a.enqueueAndForget(()=>HA(i,D)),A.fromCache&&"server"===h.source?y.reject(new ke(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),D=new WA(l,w,{includeMetadataChanges:!0,Du:!0});return BA(i,D)}(yield c_(n),n.asyncQueue,e,t,r)})),r.promise}const xN=new Map;function DM(n,e,t){if(!t)throw new ke(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RN(n,e,t,r){if(!0===e&&!0===r)throw new ke(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NN(n){if(!ze.isDocumentKey(n))throw new ke(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kN(n){if(ze.isDocumentKey(n))throw new ke(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dD(n);throw new ke(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function PN(n,e){if(e<=0)throw new ke(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ON{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,RN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ON({}),this._settingsFrozen=!1,e instanceof Gu?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ke(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gu(i.options.projectId)}(e))}get app(){if(!this._app)throw new ke(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ON(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new xS;switch(t.type){case"gapi":const r=t.client;return bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new UR(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xN.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),xN.delete(e),t.terminate())}(this),Promise.resolve()}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class cs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class jl extends cs{constructor(e,t,r){super(e,t,Gp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new ze(e))}withConverter(e){return new jl(this.firestore,e,this._path)}}function FN(n,e,...t){if(n=(0,P.m9)(n),DM("collection","path",e),n instanceof $0){const r=tn.fromString(e,...t);return kN(r),new jl(n,null,r)}{if(!(n instanceof Qn||n instanceof jl))throw new ke(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return kN(r),new jl(n.firestore,null,r)}}function hD(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=Ww.I()),DM("doc","path",e),n instanceof $0){const r=tn.fromString(e,...t);return NN(r),new Qn(n,null,new ze(r))}{if(!(n instanceof Qn||n instanceof jl))throw new ke(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return NN(r),new Qn(n.firestore,n instanceof jl?n.converter:null,new ze(r))}}function LN(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof Qn||n instanceof jl)&&(e instanceof Qn||e instanceof jl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function VN(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof cs&&e instanceof cs&&n.firestore===e.firestore&&zp(n._query,e._query)&&n.converter===e.converter}class oL{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new o(this,"async_queue_retry"),this.Kc=()=>{const t=G0();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=G0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=G0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new zr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!Hu(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Dr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=UA.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&it()}verifyOperationInProgress(){}zc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function TM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class aL{constructor(){this._progressObserver={},this._taskCompletionResolver=new zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ur extends $0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new oL,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||UN(this),this._firestoreClient.terminate()}}function Wr(n){return n._firestoreClient||UN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function UN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new PS(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new ZF(n._authCredentials,n._appCheckCredentials,n._queue,r)}function BN(n,e,t){const r=new zr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield bN(n,t),yield DN(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===de.FAILED_PRECONDITION||l.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;Uu("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function jN(n){if(n._initialized||n._terminated)throw new ke(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class md{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hl(Mr.fromBase64String(e))}catch(t){throw new ke(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hl(Mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wg{constructor(e){this._methodName=e}}class fD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const yL=/^__.*__$/;class _L{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fh(e,this.data,t,this.fieldTransforms)}}class HN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ka(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class pD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new pD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return yD(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(GN(this.Zc)&&yL.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class vL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||s(e)}aa(e,t,r,i=!1){return new pD({Zc:e,methodName:t,ca:r,path:or.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Eg(n){const e=n._freezeSettings(),t=s(n._databaseId);return new vL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gD(n,e,t,r,i,a={}){const l=n.aa(a.merge||a.mergeFields?2:0,e,t,i);xM("Data must be an object, but it was:",l,r);const h=qN(r,l);let y,w;if(a.merge)y=new xs(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const A of a.mergeFields){const k=RM(e,A,t);if(!l.contains(k))throw new ke(de.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);KN(D,k)||D.push(k)}y=new xs(D),w=l.fieldTransforms.filter(A=>y.covers(A.field))}else y=null,w=l.fieldTransforms;return new _L(new ri(h),y,w)}class K0 extends wg{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof K0}}function zN(n,e,t){return new pD({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class SM extends wg{_toFieldTransform(e){return new td(e.path,new $p)}isEqual(e){return e instanceof SM}}class wL extends wg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=zN(this,e,!0),r=this.ha.map(a=>Ig(a,t)),i=new Xc(r);return new td(e.path,i)}isEqual(e){return this===e}}class EL extends wg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=zN(this,e,!0),r=this.ha.map(a=>Ig(a,t)),i=new ed(r);return new td(e.path,i)}isEqual(e){return this===e}}class IL extends wg{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Ph(e.wt,c0(e.wt,this.la));return new td(e.path,t)}isEqual(e){return this===e}}function AM(n,e,t,r){const i=n.aa(1,e,t);xM("Data must be an object, but it was:",i,r);const a=[],l=ri.empty();$c(r,(y,w)=>{const D=mD(e,y,t);w=(0,P.m9)(w);const A=i.ia(D);if(w instanceof K0)a.push(D);else{const k=Ig(w,A);null!=k&&(a.push(D),l.set(D,k))}});const h=new xs(a);return new HN(l,h,i.fieldTransforms)}function MM(n,e,t,r,i,a){const l=n.aa(1,e,t),h=[RM(e,r,t)],y=[i];if(a.length%2!=0)throw new ke(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<a.length;k+=2)h.push(RM(e,a[k])),y.push(a[k+1]);const w=[],D=ri.empty();for(let k=h.length-1;k>=0;--k)if(!KN(w,h[k])){const U=h[k];let Z=y[k];Z=(0,P.m9)(Z);const me=l.ia(U);if(Z instanceof K0)w.push(U);else{const xe=Ig(Z,me);null!=xe&&(w.push(U),D.set(U,xe))}}const A=new xs(w);return new HN(D,A,l.fieldTransforms)}function WN(n,e,t,r=!1){return Ig(t,n.aa(r?4:3,e))}function Ig(n,e){if($N(n=(0,P.m9)(n)))return xM("Unsupported field value:",e,n),qN(n,e);if(n instanceof wg)return function(t,r){if(!GN(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Ig(l,r.ra(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return c0(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=jn.fromDate(t);return{timestampValue:Xp(r.wt,i)}}if(t instanceof jn){const i=new jn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xp(r.wt,i)}}if(t instanceof fD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hl)return{bytesValue:Uy(r.wt,t._byteString)};if(t instanceof Qn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:y0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${dD(t)}`)}(n,e)}function qN(n,e){const t={};return YC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$c(n,(r,i)=>{const a=Ig(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function $N(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof jn||n instanceof fD||n instanceof Hl||n instanceof Qn||n instanceof wg)}function xM(n,e,t){if(!$N(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=dD(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function RM(n,e,t){if((e=(0,P.m9)(e))instanceof md)return e._internalPath;if("string"==typeof e)return mD(n,e);throw yD("Field path arguments must be of type string or ",n,!1,void 0,t)}const CL=new RegExp("[~\\*/\\[\\]]");function mD(n,e,t){if(e.search(CL)>=0)throw yD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new md(...e.split("."))._internalPath}catch{throw yD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(a||l)&&(y+=" (found",a&&(y+=` in field ${r}`),l&&(y+=` in document ${i}`),y+=")"),new ke(de.INVALID_ARGUMENT,h+n+y)}function KN(n,e){return n.some(t=>t.isEqual(e))}class Z0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_D("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bL extends Z0{data(){return super.data()}}function _D(n,e){return"string"==typeof e?mD(n,e):e instanceof md?e._internalPath:e._delegate._internalPath}class Cg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yd extends Z0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Y0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_D("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Y0 extends yd{data(e={}){return super.data(e)}}class Zh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Y0(this._firestore,this._userDataWriter,r.key,r,new Cg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Y0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Cg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new Y0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Cg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==l.type&&(y=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:DL(l.type),doc:h,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function ZN(n,e){return n instanceof yd&&e instanceof yd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Zh&&e instanceof Zh&&n._firestore===e._firestore&&VN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function YN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q0{}function Yh(n,...e){for(const t of e)n=t._apply(n);return n}class TL extends Q0{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Eg(e.firestore),r=function(i,a,l,h,y,w,D){let A;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new ke(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){nk(D,w);const U=[];for(const Z of D)U.push(tk(h,i,Z));A={arrayValue:{values:U}}}else A=tk(h,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||nk(D,w),A=WN(l,"where",D,"in"===w||"not-in"===w);const k=ii.create(y,w,A);return function(U,Z){if(Z.ht()){const xe=s0(U);if(null!==xe&&!xe.isEqual(Z.field))throw new ke(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xe.toString()}' and '${Z.field.toString()}'`);const ct=r0(U);null!==ct&&rk(0,Z.field,ct)}const me=function(xe,ct){for(const mt of xe.filters)if(ct.indexOf(mt.op)>=0)return mt.op;return null}(U,function(xe){switch(xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==me)throw new ke(de.INVALID_ARGUMENT,me===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${me.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new cs(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new zu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class AL extends Q0{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new ke(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Nh(i,a);return function(h,y){if(null===r0(h)){const w=s0(h);null!==w&&rk(0,w,y.field)}}(r,l),l}(e._query,this.fa,this.wa);return new cs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new zu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class QN extends Q0{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new cs(e.firestore,e.converter,ky(e._query,this.ma,this.ga))}}class JN extends Q0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=ek(e,this.type,this.ya,this.pa);return new cs(e.firestore,e.converter,(i=t,new zu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class XN extends Q0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=ek(e,this.type,this.ya,this.pa);return new cs(e.firestore,e.converter,(i=t,new zu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function ek(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof Z0)return function(i,a,l,h,y){if(!h)throw new ke(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const D of kh(i))if(D.field.isKeyField())w.push(Nl(a,h.key));else{const A=h.data.field(D.field);if(Cy(A))throw new ke(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const k=D.field.canonicalString();throw new ke(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}w.push(A)}return new Pl(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Eg(n.firestore);return function(a,l,h,y,w,D){const A=a.explicitOrderBy;if(w.length>A.length)throw new ke(de.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let U=0;U<w.length;U++){const Z=w[U];if(A[U].field.isKeyField()){if("string"!=typeof Z)throw new ke(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Z}`);if(!Ny(a)&&-1!==Z.indexOf("/"))throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${Z}' contains a slash.`);const me=a.path.child(tn.fromString(Z));if(!ze.isDocumentKey(me))throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${me}' is not because it contains an odd number of segments.`);const xe=new ze(me);k.push(Nl(l,xe))}else{const me=WN(h,y,Z);k.push(me)}}return new Pl(k,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function tk(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new ke(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ny(e)&&-1!==t.indexOf("/"))throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!ze.isDocumentKey(r))throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nl(n,new ze(r))}if(t instanceof Qn)return Nl(n,t._key);throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dD(t)}.`)}function nk(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function rk(n,e,t){if(!t.isEqual(e))throw new ke(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const FL={maxAttempts:5};class NM{convertValue(e,t="none"){switch(Qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return $c(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new fD(Hn(e.latitude),Hn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lp(e));default:return null}}convertTimestamp(e){const t=Ml(e);return new jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);bt(w0(r));const i=new Gu(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return i.isEqual(t)||Dr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function vD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class LL extends NM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class ik{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Eg(e)}set(e,t,r){this._verifyNotCommitted();const i=Qh(e,this._firestore),a=vD(i.converter,t,r),l=gD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Nn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Qh(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof md?MM(this._dataReader,"WriteBatch.update",a._key,t,r,i):AM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qh(e,this._firestore);return this._mutations=this._mutations.concat(new Lh(t._key,Nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qh(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new ke(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bg extends NM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function sk(n,e,t){n=rn(n,Qn);const r=rn(n.firestore,ur),i=vD(n.converter,e,t);return d_(r,[gD(Eg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Nn.none())])}function ok(n,e,t,...r){n=rn(n,Qn);const i=rn(n.firestore,ur),a=Eg(i);let l;return l="string"==typeof(e=(0,P.m9)(e))||e instanceof md?MM(a,"updateDoc",n._key,e,t,r):AM(a,"updateDoc",n._key,e),d_(i,[l.toMutation(n._key,Nn.exists(!0))])}function ak(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||TM(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(TM(e[l])){const A=e[l];e[l]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[l+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[l+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let y,w,D;if(n instanceof Qn)w=rn(n.firestore,ur),D=Gp(n._key.path),y={next:A=>{e[l]&&e[l](kM(w,n,A))},error:e[l+1],complete:e[l+2]};else{const A=rn(n,cs);w=rn(A.firestore,ur),D=A._query;const k=new bg(w);y={next:U=>{e[l]&&e[l](new Zh(w,k,A,U))},error:e[l+1],complete:e[l+2]},YN(n._query)}return function(A,k,U,Z){const me=new uD(Z),xe=new WA(k,me,U);return A.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return BA(yield c_(A),xe)})),()=>{me.Tc(),A.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return HA(yield c_(A),xe)}))}}(Wr(w),D,h,y)}function d_(n,e){return function(t,r){const i=new zr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function MF(n,e,t){return YA.apply(this,arguments)}(yield CM(t),r,i)})),i.promise}(Wr(n),e)}function kM(n,e,t){const r=t.docs.get(e._key),i=new bg(n);return new yd(n,i,e._key,r,new Cg(t.hasPendingWrites,t.fromCache),e.converter)}class $L extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Eg(e)}get(e){const t=Qh(e,this._firestore),r=new LL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const a=i[0];if(a.isFoundDocument())return new Z0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Z0(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=Qh(e,this._firestore),a=vD(i.converter,t,r),l=gD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Qh(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof md?MM(this._dataReader,"Transaction.update",a._key,t,r,i):AM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Qh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qh(e,this._firestore),r=new bg(this._firestore);return super.get(e).then(i=>new yd(this._firestore,r,t._key,i._document,new Cg(!1,!1),t.converter))}}function PM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function lk(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function ck(){if(!function JC(){return typeof atob<"u"}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Gc=jo.SDK_VERSION,(0,jo._registerComponent)(new Ru.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new ur(i,new my(t.getProvider("auth-internal")),new HC(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,jo.registerVersion)(Hw,"3.4.14",n),(0,jo.registerVersion)(Hw,"3.4.14","esm2017")}();class J0{constructor(e){this._delegate=e}static fromBase64String(e){return ck(),new J0(Hl.fromBase64String(e))}static fromUint8Array(e){return lk(),new J0(Hl.fromUint8Array(e))}toBase64(){return ck(),this._delegate.toBase64()}toUint8Array(){return lk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function OM(n){return function nV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rV{enableIndexedDbPersistence(e,t){return function lL(n,e){jN(n=rn(n,ur));const t=Wr(n),r=n._freezeSettings(),i=new yM;return BN(t,i,new IN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function cL(n){jN(n=rn(n,ur));const e=Wr(n),t=n._freezeSettings(),r=new yM;return BN(e,r,new WF(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function dL(n){if(n._initialized&&!n._terminated)throw new ke(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!xa.V())return Promise.resolve();const i=r+"main";yield xa.delete(i)}),function(r){return t.apply(this,arguments)})(pg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class dk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Uu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function iL(n,e,t,r={}){var i;const a=(n=rn(n,$0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Uu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Ar.MOCK_USER;else{l=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ke(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ar(y)}n._authCredentials=new gy(new zc(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function fL(n){return function YF(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield TN(n),t=yield SN(n);return e.setNetworkEnabled(!0),function(r){const i=we(r);return i.lu.delete(0),C(i)}(t)}))}(Wr(n=rn(n,ur)))}(this._delegate)}disableNetwork(){return function pL(n){return function QF(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield TN(n),t=yield SN(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=we(i);a.lu.add(0),yield R(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Wr(n=rn(n,ur)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,RN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hL(n){return function(e){const t=new zr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function kF(n,e){return tM.apply(this,arguments)}(yield CM(e),t)})),t.promise}(Wr(n=rn(n,ur)))}(this._delegate)}onSnapshotsInSync(e){return function qL(n,e){return function eL(n,e){const t=new uD(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield c_(n),i=t,we(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield c_(n),i=t,void we(r).Tu.delete(i);var r,i}))}}(Wr(n=rn(n,ur)),TM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new h_(this,FN(this._delegate,e))}catch(t){throw ks(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ua(this,hD(this._delegate,e))}catch(t){throw ks(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ps(this,function sL(n,e){if(n=rn(n,$0),DM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new cs(n,null,(t=e,new zu(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ks(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function KL(n,e,t){n=rn(n,ur);const r=Object.assign(Object.assign({},FL),t);return function(i){if(i.maxAttempts<1)throw new ke(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function tL(n,e,t){const r=new zr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const i=yield(a=n,lD(a).then(l=>l.datastore));var a;new KF(n.asyncQueue,i,t,e,r).run()})),r.promise}(Wr(n),i=>e(new $L(n,i)),r)}(this._delegate,t=>e(new hk(this,t)))}batch(){return Wr(this._delegate),new fk(new ik(this._delegate,e=>d_(this._delegate,e)))}loadBundle(e){return function gL(n,e){const t=Wr(n=rn(n,ur)),r=new aL;return function nL(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,y=function(y,w){if(y instanceof Uint8Array)return CN(y,w);if(y instanceof ArrayBuffer)return CN(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new qF(y,l);var y}(t,s(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function zF(n,e,t){const r=we(n);var i;(i=(0,ye.Z)(function*(a,l,h){try{const y=yield l.getMetadata();if(yield function(k,U){const Z=we(k),me=xr(U.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",xe=>Z.Ds.getBundleMetadata(xe,U.id)).then(xe=>!!xe&&xe.createTime.compareTo(me)>=0)}(a.localStore,y))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=y).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(hN(y));const w=new CF(y,a.localStore,l.wt);let D=yield l.fc();for(;D;){const k=yield w.Nu(D);k&&h._updateProgress(k),D=yield l.fc()}const A=yield w.complete();return yield gd(a,A.Ou,void 0),yield function(k,U){const Z=we(k);return Z.persistence.runTransaction("Save bundle","readwrite",me=>Z.Ds.saveBundleMetadata(me,U))}(a.localStore,y),h._completeWith(A.progress),Promise.resolve(A.Mu)}catch(y){return Uu("SyncEngine",`Loading bundle failed with ${y}`),h._failWith(y),Promise.resolve(new Set)}var k}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield CM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function mL(n,e){return function rL(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=we(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield cD(n),e)}))}(Wr(n=rn(n,ur)),e).then(t=>t?new cs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ps(this,t):null)}}class wD extends NM{constructor(e){super(),this.firestore=e}convertBytes(e){return new J0(new Hl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ua.forKey(t,this.firestore,null)}}class hk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}get(e){const t=Tg(e);return this._delegate.get(t).then(r=>new X0(this._firestore,new yd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Tg(e);return r?(PM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Tg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Tg(e);return this._delegate.delete(t),this}}class fk{constructor(e){this._delegate=e}set(e,t,r){const i=Tg(e);return r?(PM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Tg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Tg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Y0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Dg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Dg(e,new wD(e),t),i.set(t,a)),a}}Dg.INSTANCES=new WeakMap;class Ua{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ua(t,new Qn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new Ua(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new h_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new h_(this.firestore,FN(this._delegate,e))}catch(t){throw ks(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof Qn&&LN(this._delegate,e)}set(e,t){t=PM("DocumentReference.set",t);try{return t?sk(this._delegate,e,t):sk(this._delegate,e)}catch(r){throw ks(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ok(this._delegate,e):ok(this._delegate,e,t,...r)}catch(i){throw ks(i,"updateDoc()","DocumentReference.update()")}}delete(){return function zL(n){return d_(rn(n.firestore,ur),[new Lh(n._key,Nn.none())])}(this._delegate)}onSnapshot(...e){const t=pk(e),r=gk(e,i=>new X0(this.firestore,new yd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ak(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function UL(n){n=rn(n,Qn);const e=rn(n.firestore,ur),t=Wr(e),r=new bg(e);return function JF(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const h=yield function(y,w){const D=we(y);return D.persistence.runTransaction("read document","readonly",A=>D.localDocuments.getDocument(A,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new ke(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const y=o_(h,`Failed to get document '${a} from cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield cD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new yd(e,r,n._key,i,new Cg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function BL(n){n=rn(n,Qn);const e=rn(n.firestore,ur);return AN(Wr(e),n._key,{source:"server"}).then(t=>kM(e,n,t))}(this._delegate):function VL(n){n=rn(n,Qn);const e=rn(n.firestore,ur);return AN(Wr(e),n._key).then(t=>kM(e,n,t))}(this._delegate),t.then(r=>new X0(this.firestore,new yd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ua(this.firestore,this._delegate.withConverter(e?Dg.getInstance(this.firestore,e):null))}}function ks(n,e,t){return n.message=n.message.replace(e,t),n}function pk(n){for(const e of n)if("object"==typeof e&&!OM(e))return e;return{}}function gk(n,e){var t,r;let i;return i=OM(n[0])?n[0]:OM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class X0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ua(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ZN(this._delegate,e._delegate)}}class eE extends X0{data(e){const t=this._delegate.data(e);return function VR(n,e){n||it()}(void 0!==t),t}}class Ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}where(e,t,r){try{return new Ps(this.firestore,Yh(this._delegate,function SL(n,e,t){const r=e,i=_D("where",n);return new TL(i,r,t)}(e,t,r)))}catch(i){throw ks(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ps(this.firestore,Yh(this._delegate,function ML(n,e="asc"){const t=e,r=_D("orderBy",n);return new AL(r,t)}(e,t)))}catch(r){throw ks(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ps(this.firestore,Yh(this._delegate,function xL(n){return PN("limit",n),new QN("limit",n,"F")}(e)))}catch(t){throw ks(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ps(this.firestore,Yh(this._delegate,function RL(n){return PN("limitToLast",n),new QN("limitToLast",n,"L")}(e)))}catch(t){throw ks(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ps(this.firestore,Yh(this._delegate,function NL(...n){return new JN("startAt",n,!0)}(...e)))}catch(t){throw ks(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ps(this.firestore,Yh(this._delegate,function kL(...n){return new JN("startAfter",n,!1)}(...e)))}catch(t){throw ks(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ps(this.firestore,Yh(this._delegate,function PL(...n){return new XN("endBefore",n,!1)}(...e)))}catch(t){throw ks(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ps(this.firestore,Yh(this._delegate,function OL(...n){return new XN("endAt",n,!0)}(...e)))}catch(t){throw ks(t,"endAt()","Query.endAt()")}}isEqual(e){return VN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function HL(n){n=rn(n,cs);const e=rn(n.firestore,ur),t=Wr(e),r=new bg(e);return function XF(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const h=yield t_(i,a,!0),y=new gN(a,h.ji),w=y.Ku(h.documents),D=y.applyChanges(w,!1);l.resolve(D.snapshot)}catch(h){const y=o_(h,`Failed to execute query '${a} against cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield cD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Zh(e,r,n,i))}(this._delegate):"server"===e?.source?function GL(n){n=rn(n,cs);const e=rn(n.firestore,ur),t=Wr(e),r=new bg(e);return MN(t,n._query,{source:"server"}).then(i=>new Zh(e,r,n,i))}(this._delegate):function jL(n){n=rn(n,cs);const e=rn(n.firestore,ur),t=Wr(e),r=new bg(e);return YN(n._query),MN(t,n._query).then(i=>new Zh(e,r,n,i))}(this._delegate),t.then(r=>new FM(this.firestore,new Zh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=pk(e),r=gk(e,i=>new FM(this.firestore,new Zh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ak(this._delegate,t,r)}withConverter(e){return new Ps(this.firestore,this._delegate.withConverter(e?Dg.getInstance(this.firestore,e):null))}}class sV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new eE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class FM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new eE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sV(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new eE(this._firestore,r))})}isEqual(e){return ZN(this._delegate,e._delegate)}}class h_ extends Ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ua(this.firestore,e):null}doc(e){try{return new Ua(this.firestore,void 0===e?hD(this._delegate):hD(this._delegate,e))}catch(t){throw ks(t,"doc()","CollectionReference.doc()")}}add(e){return function WL(n,e){const t=rn(n.firestore,ur),r=hD(n),i=vD(n.converter,e);return d_(t,[gD(Eg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Nn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ua(this.firestore,t))}isEqual(e){return LN(this._delegate,e._delegate)}withConverter(e){return new h_(this.firestore,this._delegate.withConverter(e?Dg.getInstance(this.firestore,e):null))}}function Tg(n){return rn(n,Qn)}class LM{constructor(...e){this._delegate=new md(...e)}static documentId(){return new LM(or.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof md&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function YL(){return new SM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sg(e)}static delete(){const e=function ZL(){return new K0("deleteField")}();return e._methodName="FieldValue.delete",new Sg(e)}static arrayUnion(...e){const t=function QL(...n){return new wL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sg(t)}static arrayRemove(...e){const t=function JL(...n){return new EL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sg(t)}static increment(e){const t=function XL(n){return new IL("increment",n)}(e);return t._methodName="FieldValue.increment",new Sg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oV={Firestore:dk,GeoPoint:fD,Timestamp:jn,Blob:J0,Transaction:hk,WriteBatch:fk,DocumentReference:Ua,DocumentSnapshot:X0,Query:Ps,QueryDocumentSnapshot:eE,QuerySnapshot:FM,CollectionReference:h_,FieldPath:LM,FieldValue:Sg,setLogLevel:function iV(n){!function MS(n){ss.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function mk(n,e){return function lV(n,e=Hv.z){return new Er.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function VM(n,e){return mk(n,e).pipe((0,Je.U)(t=>({payload:t,type:"query"})))}function ED(n,e){return VM(n,e).pipe(hl(void 0),Gv(),(0,Je.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const y=i.find(D=>D.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(l.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function yk(n,e,t){return ED(n,t).pipe(Bn((r,i)=>function dV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return UM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return UM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return UM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),ZI(),(0,Je.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function UM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function _k(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function uV(n){(function aV(n,e){n.INTERNAL.registerComponent(new Ru.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},oV)))})(n,(e,t)=>new dk(e,t,new rV)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(Om.Z);class vk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ED(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Je.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(hl(void 0),Gv(),Qi(([r,i])=>i.length>0||!r),(0,Je.U)(([r,i])=>i),Tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bn((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_k(e);return yk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return VM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Tn.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(Tn.iC)}add(e){return this.ref.add(e)}doc(e){return new wk(this.ref.doc(e),this.afs)}}class wk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Ck(r,t);return new vk(i,a,this.afs)}snapshotChanges(){return function cV(n,e){return mk(n,e).pipe(hl(void 0),Gv(),(0,Je.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Je.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fn.D)(this.ref.get(e)).pipe(Tn.iC)}}class fV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ED(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qi(t=>t.length>0),Tn.iC):ED(this.query,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bn((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_k(e);return yk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return VM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Tn.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(Tn.iC)}}const Ek=new f.OlP("angularfire2.enableFirestorePersistence"),Ik=new f.OlP("angularfire2.firestore.persistenceSettings"),pV=new f.OlP("angularfire2.firestore.settings"),gV=new f.OlP("angularfire2.firestore.use-emulator");function Ck(n,e=(t=>t)){return{query:e(n),ref:n}}let bk=(()=>{class n{constructor(t,r,i,a,l,h,y,w,D,A,k,U,Z,me,xe,ct,mt){this.schedulers=y;const St=(0,gi.on)(t,h,r),Tt=D;A&&jv(St,h,k,Z,me,xe,U,ct),[this.firestore,this.persistenceEnabled$]=(0,gi.cc)(`${St.name}.firestore`,"AngularFirestore",St.name,()=>{const Lt=h.runOutsideAngular(()=>St.firestore());if(a&&Lt.settings(a),Tt&&Lt.useEmulator(...Tt),i&&!$r(l)){const Yt=()=>{try{return(0,fn.D)(Lt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(oi){return typeof console<"u"&&console.warn(oi),Ze(!1)}};return[Lt,h.runOutsideAngular(Yt)]}return[Lt,Ze(!1)]},[a,Tt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=Ck(i,r),h=this.schedulers.ngZone.run(()=>a);return new vk(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new fV(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new wk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(gi.Dh),f.LFG(gi.xv,8),f.LFG(Ek,8),f.LFG(pV,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Tn.HU),f.LFG(Ik,8),f.LFG(gV,8),f.LFG(kc,8),f.LFG(rp,8),f.LFG(Nm,8),f.LFG(ip,8),f.LFG(Bv,8),f.LFG(ba,8),f.LFG(km,8),f.LFG(np,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mV=(()=>{class n{constructor(){$I.Z.registerVersion("angularfire",Tn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Ek,useValue:!0},{provide:Ik,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[bk]}),n})(),tE=(()=>{class n{constructor(t,r,i){this.fireauth=t,this.router=r,this.firestore=i}sendVerificationEmail(){var t=this;return(0,ye.Z)(function*(){return(yield t.fireauth.currentUser).sendEmailVerification()})()}getObject(t,r){return this.firestore.collection(r).doc(t).valueChanges()}login(t){return this.fireauth.signInWithEmailAndPassword(t.mail,t.password)}register(t){return console.log("user value: ",t),this.fireauth.createUserWithEmailAndPassword(t.mail,t.password)}logout(){this.fireauth.signOut().then(()=>{localStorage.clear(),this.router.navigate(["/login"])},t=>{alert(t.message)})}forgotPassword(t){this.fireauth.sendPasswordResetEmail(t).then(()=>{alert("Se ha enviado un enlace de recuperaci\xf3n a tu correo")},r=>{console.log("error: ",r),alert("Algo estuvo mal, no fue posible mandar el correo")})}showUsers(){return this.firestore.collection("users").snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(kc),f.LFG(Ir),f.LFG(bk))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Dk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Ag=(()=>{class n extends Dk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Gl=new f.OlP("NgValueAccessor"),vV={provide:Gl,useExisting:(0,f.Gpc)(()=>f_),multi:!0},EV=new f.OlP("CompositionEventMode");let f_=(()=>{class n extends Dk{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function wV(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(EV,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([vV]),f.qOj]}),n})();function Jh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Sk(n){return null!=n&&"number"==typeof n.length}const ds=new f.OlP("NgValidators"),Xh=new f.OlP("NgAsyncValidators"),CV=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class BM{static min(e){return function Ak(n){return e=>{if(Jh(e.value)||Jh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Mk(n){return e=>{if(Jh(e.value)||Jh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return xk(e)}static requiredTrue(e){return function Rk(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Nk(n){return Jh(n.value)||CV.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function kk(n){return e=>Jh(e.value)||!Sk(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Pk(n){return e=>Sk(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Ok(n){if(!n)return ID;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Jh(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return jk(e)}static composeAsync(e){return Hk(e)}}function xk(n){return Jh(n.value)?{required:!0}:null}function ID(n){return null}function Fk(n){return null!=n}function Lk(n){return(0,f.QGY)(n)?(0,fn.D)(n):n}function Vk(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Uk(n,e){return e.map(t=>t(n))}function Bk(n){return n.map(e=>function bV(n){return!n.validate}(e)?e:t=>e.validate(t))}function jk(n){if(!n)return null;const e=n.filter(Fk);return 0==e.length?null:function(t){return Vk(Uk(t,e))}}function jM(n){return null!=n?jk(Bk(n)):null}function Hk(n){if(!n)return null;const e=n.filter(Fk);return 0==e.length?null:function(t){return function yV(...n){const e=(0,Si.jO)(n),{args:t,keys:r}=Ys(n),i=new Er.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let y=l,w=l;for(let D=0;D<l;D++){let A=!1;(0,Mi.Xf)(t[D]).subscribe((0,ln.x)(a,k=>{A||(A=!0,w--),h[D]=k},()=>y--,void 0,()=>{(!y||!A)&&(w||a.next(r?gu(r,h):h),a.complete())}))}});return e?i.pipe(ha(e)):i}(Uk(t,e).map(Lk)).pipe((0,Je.U)(Vk))}}function HM(n){return null!=n?Hk(Bk(n)):null}function Gk(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zk(n){return n._rawValidators}function Wk(n){return n._rawAsyncValidators}function GM(n){return n?Array.isArray(n)?n:[n]:[]}function CD(n,e){return Array.isArray(n)?n.includes(e):n===e}function qk(n,e){const t=GM(e);return GM(n).forEach(i=>{CD(t,i)||t.push(i)}),t}function $k(n,e){return GM(e).filter(t=>!CD(n,t))}class Kk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=HM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Os extends Kk{get formDirective(){return null}get path(){return null}}class ef extends Kk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Zk{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let bD=(()=>{class n extends Zk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ef,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),DD=(()=>{class n extends Zk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Os,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const nE="VALID",SD="INVALID",p_="PENDING",rE="DISABLED";function $M(n){return(AD(n)?n.validators:n)||null}function Qk(n){return Array.isArray(n)?jM(n):n||null}function KM(n,e){return(AD(e)?e.asyncValidators:n)||null}function Jk(n){return Array.isArray(n)?HM(n):n||null}function AD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Xk(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")}function eP(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})}class MD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Qk(this._rawValidators),this._composedAsyncValidatorFn=Jk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===nE}get invalid(){return this.status===SD}get pending(){return this.status==p_}get disabled(){return this.status===rE}get enabled(){return this.status!==rE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Qk(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Jk(e)}addValidators(e){this.setValidators(qk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($k(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($k(e,this._rawAsyncValidators))}hasValidator(e){return CD(this._rawValidators,e)}hasAsyncValidator(e){return CD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=p_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=rE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=nE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===nE||this.status===p_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rE:nE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=p_,this._hasOwnPendingAsyncValidator=!0;const t=Lk(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?rE:this.errors?SD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(p_)?p_:this._anyControlsHaveStatus(SD)?SD:nE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){AD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class xD extends MD{constructor(e,t,r){super($M(t),KM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){eP(this,0,e),Object.keys(e).forEach(r=>{Xk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function iE(n,e){ZM(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function kV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&tP(n,e)})}(n,e),function OV(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function PV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&tP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function NV(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ND(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),PD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function kD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ZM(n,e){const t=zk(n);null!==e.validator?n.setValidators(Gk(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Wk(n);null!==e.asyncValidator?n.setAsyncValidators(Gk(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();kD(e._rawValidators,i),kD(e._rawAsyncValidators,i)}function PD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=zk(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Wk(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return kD(e._rawValidators,r),kD(e._rawAsyncValidators,r),t}function tP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function sP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function oP(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const g_=class extends MD{constructor(e=null,t,r){super($M(t),KM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),AD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=oP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){oP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let OD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),hP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const XM=new f.OlP("NgModelWithFormControlWarning"),ZV={provide:Os,useExisting:(0,f.Gpc)(()=>m_)};let m_=(()=>{class n extends Os{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(PD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return iE(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ND(t.control||null,t,!1),function UV(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function iP(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ND(r||null,t),(n=>n instanceof g_)(i)&&(iE(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function nP(n,e){ZM(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function FV(n,e){return PD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ZM(this.form,this),this._oldForm&&PD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ds,10),f.Y36(Xh,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([ZV]),f.qOj,f.TTD]}),n})();const JV={provide:ef,useExisting:(0,f.Gpc)(()=>oE)};let oE=(()=>{class n extends ef{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function QM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===f_?t=a:function VV(n){return Object.getPrototypeOf(n.constructor)===Ag}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function YM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function RD(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Os,13),f.Y36(ds,10),f.Y36(Xh,10),f.Y36(Gl,10),f.Y36(XM,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([JV]),f.qOj,f.TTD]}),n})(),Mg=(()=>{class n{constructor(){this._validator=ID}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ID,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const aU={provide:ds,useExisting:(0,f.Gpc)(()=>y_),multi:!0};let y_=(()=>{class n extends Mg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=t=>xk}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([aU]),f.qOj]}),n})(),AP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[hP]}),n})(),fU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[AP]}),n})(),MP=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:XM,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[AP]}),n})();class xP extends MD{constructor(e,t,r){super($M(t),KM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){eP(this,0,e),e.forEach((r,i)=>{Xk(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function RP(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let ix=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return RP(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new xD(i,a)}control(t,r,i){let a={};return this.useNonNullable?(RP(r)?a=r:(a.validators=r,a.asyncValidators=i),new g_(t,{...a,nonNullable:!0})):new g_(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new xP(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof g_||t instanceof MD?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:MP}),n})();function pU(n,e){if(1&n&&(f.TgZ(0,"label",21),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Oqu(t.emptyFields("mail"))}}function gU(n,e){if(1&n&&(f.TgZ(0,"label",21),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Oqu(t.emptyFields("password"))}}const mU=function(){return["/login"]},yU=function(){return["/register"]},_U=function(){return["/recoverPassword"]};let NP=(()=>{class n{constructor(t,r,i){this.auth=t,this.formBuilder=r,this.router=i,this.email="",this.password="",this.userForm=this.formBuilder.group({mail:[""],password:[""],id:null})}ngOnInit(){localStorage.clear(),localStorage.setItem("recarga","true")}login(){var t=this;return(0,ye.Z)(function*(){const r=yield t.auth.login(t.userForm.value).catch(i=>{alert("Credenciales Incorrectas"),console.log("error",i)});r&&r.user.emailVerified?(console.log("inicio exitoso"),console.log("id user: ",r.user.uid),console.log("datos usuario",r.user.email),localStorage.setItem("usuario",r.user.email),t.router.navigate(["/dashboard"])):r?(alert("No ha verificado la cuenta"),t.router.navigate(["/sendEmail"])):t.router.navigate(["/register"])})()}emptyFields(t){return this.userForm.get(t)?.hasError("required")?"El campo es obligatorio":this.userForm.get(t)?"Formato incorrecto":""}get emptyPassword(){return this.userForm.get("password")?.invalid&&this.userForm.get("password")?.touched}get emptyemail(){return this.userForm.get("mail")?.invalid&&this.userForm.get("mail")?.touched}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(tE),f.Y36(ix),f.Y36(Ir))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:41,vars:11,consts:[[1,"navbar","navbar-light","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["routerLink","home",1,"home"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPEAAADRCAMAAAAquaQNAAAAkFBMVEX///8AAADx8fH5+fn19fXo6Oj8/Pzu7u7r6+vj4+OOjo7X19fw8PCfn59XV1ff39/ExMR2dnaioqK4uLhiYmKvr6/Ly8t4eHhra2sxMTElJSVGRkbS0tLZ2dk7OzuGhoZaWlqWlpY4ODhNTU29vb2IiIgeHh6RkZEpKSlnZ2cQEBAvLy8ZGRmqqqoLCwtCQkLwktYFAAAaN0lEQVR4nOUd2YKqOhIEF1QQZHUFxL2l/f+/GxIgpLKg9mkbZ6Ye7j2tCKmk9g1F+Z+CQP3OTsGg62X8IXgqBm///4G0Mc5UAnG/6+X8AagQYr3rBb0bJioLbtdLejMEHMZq1PWa3gkz9ZvHWF38D1P2QYBvAddR1wt7G2zFGKtXreuVvQkGEoRV9d710t4EvKAmEHe9tvdALsdYXXe9uJ/DdOKnoWdlmeWF6R4YVRLBhWHR1XpfBq2/WQe268/T0yGOrAWHidkj115aMP4vsESGwdzJzm041HCof2K1XbXrEpmH0HfDp3Ctz3la/qwVY3XSLU4SMNzUsZYvIFtByc5e6zWfJ651N7q9jmsFQ3SHqPWSa9cIQujnqx9ji+CGrKp2jMtd+QzYpPd/QhdBUtxn137JrGM0awjCf8YWg6msH1zxGUbI+gdiSgJBu6guLugaWQTur+H7BHwCxuO/RPgDFLL99acIq0bH+Ab/Lp9fhG7DApvs8Qp/GTo1rKetXs6bwOwQ4TbP/X0w7Qxf/e8JGoHTGcKjn7sL/wSdpaA2naC7zDozMe0u8M26wrYAvwuEuzS2zE4Q7jCmd+oE4Q6dxLZw8vvg2B3C3ZC0eukMYUEu+09g3xnGXWCbmR1qpnc7/6F74LLHS03p0Jh+F6ZL083TOM7RQ7SZn1BfxZ3Wc83fhHDIPmhWf5N1XArB5QR/Bw78kyraXv49jgBG70E4ETzKUdXbUt12x8AlvClKK4rVaea4r3RfzxS/BWGva7Ra4N/SaBJYfnLN0jviHufuSVcO79DGu08+YWX6+whvPxphZfjrCN8/vD7+16k6+3CEFeX6yxh/QmK0HZ7XTivT3sz6PcKle/FlnyynMTwf8GEceFl4m/MgPg1eCFNv6N8Z0ss+vUhcex5jtamzbNNqaXfIPAft5XQAqDxvi4+56g6X50AigIRAoo+tdU+9tsd9AMgL+gVQ5bbb67M+vnr4pfB8qW7b4yaf7CpikEtdESB1+6gE7+PNrpdKe5BcYqMIrMfZvd2VXywvNG1Z1dRridQxt0Uxm6gTRPX+Fpq00tkLD+k8z+fmKXaS1dft+/u28x6UArNgKxn8swBY8dZhCq2Eoahl8B9AB4kq3G7J9DN1bnbpifqbYCngfjjGAxW0z66g/+fFAOsXLKvH4PfAn1uFNVbZPGnahSXW82GR83XrhaeCw6+ZZVmvBjQ1mHEuhBkj/qB+woGWLgS4VmcRTwFuTBjmZ88uv3oxFWMxogpVZAEBDusdHPRRNw5GhfJ5ebwhaXYiEubVKoH9DPyJqBh8AtDr44+6qcwrTYdsnKammdPn0H8RY5WxQpDrTAsvUE1bar9u2hMxeQnt3lc5OYaVBeiWIEjYU6aeUzb11IffSTioUpsH3p97uYBtBqtHkD1Hs4aPNFjZTV0XCPy96JpZ+iJwHQ9R33LOfPlyFPcOQwk4ukX97eFoEtpZsg+nP8c4L9VI1W7FfvuywnahCkbIpew1fdoa+/tK+bi2d0/VYgC8EgopAXICihVwZVKzWiQe0Gb8ef9HqOblP/DC2GKqVyJ8JYyBR4F2k8u+j6tPHIrC/hTjqj0Qx3k4j855GeUpqKgIWuqk0FbfeU56N8TE9kP2Jmfnvl5fHQHp7LTUGyDPYiJwMN4ME1IkhwuauJznyxgXNEP3nBacIdPqWDN4HVb5YJtgw376eieqB0xLpG/ZANIywtoYc3C/yygnCkzl7IeP4nUC2NCsGylTl/JIbpOZj2wxdIWFH5B22LwWq4JRUYPXQyWFB3GkcIRfzhAh9zG33MonrLrLLmMpxX0qbWcb+7L5ENM2yrALQnZKJVCatdqycCi6KZwfVWcAQdrQVlgXgVh55a0FYX4hIydK2jxLS2oK/3NA65GXirKAvV1h3Xlxj0FTZRD1jRlobJ0r3g1vJBGTM7+jqB+WoNyEBhnGhQ+wFjfGIy+xKd7FOh4Yb6Zyxp5L1w3Gld/A+k9SRh5Lg6GJAooF8CgTEE8ZlxvQfakE1r1c2b6MkeWzLfAtKLF2thUFBjpDtAEfMLmnxI39tGVuWBvGQKitDMGEuc7TMjVuNvPpS6nkEj+FF2lz3njrno0rIcV5E4/mdnBw9k3+N5wl8xEJ5TK+eN1mVuIhSKzsvjhyi/8d6H74hfLHA066RhbDG2pupbDtGtkSHkxT+k3oyK5koap3Oa8yy2vghbTrcXtfZVn2hLD7kLrFMsjDxWGezU2cSWRQao0T6HLcBwW6GOMnB4LMX/nJR4hqpWJkjuCeSrldQJPWg7jvkTPfuwLMgDfu48eZ5CXr07df/jldE6XI4cIC6SOEOa4UnXHlM19v988YKIehtPc5kntQwRfyaUmBMbNWtGDdn35W7V51MryubFM3F9FAGpYPEnX7WahWUKfJODaTi94VF+JGAApZVyfng8gYAGE+Lo8tjdSJw+uwYfuD6+dJWpBN+MkMCkcsc1Pmqvev/IfQpBKYgpSepP+JDR5UwDr/f54wfRbo9Di0JsSh+ItEqfKFBSG8Xc/YTCZG7x2SrB/kY8ezkkt4muf2pn3IFzCs6NT5QOxRSRJkA5ERXtUh6Os8tprt23np/vdCP7o9Fjz6HJmBLGYKDpIyNAfCtz6EkgMeiukhUqb7WDxvM/J/YYixYbZ5O7vYFmAN66nP7Qh/yeYOP/aZRLDy/yl0redP+PUW+wzWRqo5QBOesGyBPx8G5Px4dnP/6RS3R0vaHvtt5THqQkqU+bZMxdvqpbGT1o+K2XovpfSXjSPM9YGUieSROJAp4WGmxmX+auA3E5pvrfDybJpbJXAFWdGhIY1tSqQ0TFBtEV+8WuZ4eS3HuPnJaJoV4h9xWfFOYneIX1PDFLjg9Nrm9fner1ikPx0Sl5ZH+XwxtVCFDiH9Yxnxoylut2edDuPns4escokSnuVAeApMpzXelBf7hwg8Z5T+62BLhIb+FA0Ky69gods34sbBz8flPpOR+uc5PFj6PpWSEOkQRmIiG0r/l3lXi4etuy1KYBvPXTXc79385LRMVS/ndTwx5DZ5vN+IpHstLPK9tbwocqJLS2tkuz2iyWwsK59hRL5qdaIF0oLpMibzWL0JwszMPZFSHcoGA8W53+g24zh1ZaWuEkcUg4z97sRVujQ2kh0Fqfh9cOUpP8o+nLnHs/uNvK6edBISKGcOsJkjKZGST5HUhfRzmPUb/h83r9GxELkYQrbHyb5HhjEf5WQy4al0SSXQTrFfS2VXRKUyLSV0Xk0kiBqH3SexSb2StLrIGkXlG4+qi1mRwu4Qtk7ahBat21KyfxeRYJc4kQIyPJSo+oQVAhLEmZNKU9FhRg8xZiNWrFL8Rk6VQI7GzWd6s2mHmnI3i6a1rgFxLxR/VlltEvVJLY1B8vHbxs0T2czzR2UCjKnPrnKJFDHPMpZB+Wbhnqwhqgn3ju7b5w5PFBHk3THKkWsqs2pnh+JtJTIFNtFEgAa9dPh0trYtFO9kDj/2CMZWtYF2VfHLWaW89BLoTyqWFRNHpG52Hjfmw2wlShgeB60YA2HCxgqwUBSkISvV2tA1kS+LalnHeg84VmNnSg44mdg3vpuLbOL+rqqlUlVy975QvoRtNeSgnI8xw+tHsKpvWbNt0zBCPJHq9ahmowDYoBGbDmIV2a3YM+OLbKFGWpyjUuuvGxvdHiN2Oxsc70xampxoAxPuy73+iiPMxuElXxFxXYoXnZZQ7DFAuuZoAIvzWVNEk9T/OJW7GDZ+3h1LgCl/JogMJMYmXdoGuPVI1sXOUl1+U/UGJMpZ/a2X/6BzUuaB4Qr4ejrW1qq2c0aI71SLVr80QRoaKVvLEYdx+hwtMRViTB0x8MUpq4QxOLeDHsX7hCwq6TrFmfkZJU3XFlcGSutvloDIAU5qzNa14A7wXRu+Luu9y5NhU9tXwWcYGiEwoDUuHbhmVoteuGdQhkStHL7LPw1MjauG7vUdssgY/dMYaWzfKEUb64qBB/X2jTCrROTHuEex6go9iA5ZJK8J6RqU1fwFNDQjFbDemH2TxxKlnDfnsKfU6b2UclA8Nd05jKIHpbt2lVJIyO6g/5A8A35y+V0/s9k7nRVBMJfiKNosg+EKRsrXDZGNYKk3srR198jCoIQDMUhAfI1EIFjv/Qws3n25AfOa9RDGPnH0InKjOTa+maOx+f1UG4ZKm4++GdcRVrp91R/7pKUI5qf9YpFp4xWmhOmgSK5xYIbmrNffIDjh4gUatdO0KwiMHDEWxYji+lZJqcxA0EQRGRLVjlJ2lsWErZnfNIrlRNqq60PGbFc4Er2EXGRT70kFArC2NeHdHRQ9Be3aOaapmmYua2VEGGZVbVwa1UtmhAWSJayuL89pSOlLLgDHMD/1TVRHAcjeov0LXSUiJqKRUNdDf6aUA4yVgA2tsUU7n3P0FKc2L11lXstEpEoL7I2M0u4wHoT2hq3uwRtIMyofpmd+Qb3aWbFqFvWo213sGdk1jeLnKcNSNvhlCRVB2Ec6Q2wWV7rVunKTELVeHlhzwAig17fgn4AFF30V769DubW0IzVqLJ7tqNluBAjBbOaRI7KIDhs56nwADhSTNdO7UFvivQW982agTCsmCGKj/uaOoh2GxcSR4P3QStmGkDGQZoIoPSTqgm10U73Xj9GrYc5EpxZnswjJIojdNfFWWB4BlYk+gIRO+ZEO/Z7kdFN7jIa1rrazcKivWhqyFQmQkHJ+U4uTb/55FYUnwCKrTI29Us3yUaNqJfVdCs5Rk/qn80pMu7vaEAYhRqTzYcaFDnW6Kyq3e5qequ/qQ0GE6Xo8SUK5gJYykM8pF04bh+qSyIh+rJZYTErZV9tdu8aHVQKsSzVzMSecBtQHMmOBBoWZL2NBacl0X6nRalewN8ZnOQznBEM1g7bi2S9hvhwqUYqGNHeJKXWPn0tof9ivFTaOU4xiyGi0h+Oxq2Hjix7VNh1WJssKyzTtu3B0OBYMolRn+GTTgvGXOHsM6DCB3028a3F8OaJdogjzqDJMNOQ+XCImJp9Sd7uxjrPJ7rlJ9U1n5c6VFFQc5JG92I0wE0GizOXzXq6SigigwLlsXC+9OcZpDeR9dZGj2V7KpV2A5B8xXFcQgHXa04ppfSeiZYMFeY4xRhQFZY6eRrWpBtg2lFeRywpzAKOJMgr2alfwFuVYl6QYWwdRMH4Ab5fSfxbSeRTMnYV6D/1JtVcaYQrt6GmKtkSaGj0MyKxZHDa0BM5oJ21XlCaEnriqf1BTSochRAdOJKnooquk5nB19Q4N+nZ6WX5b4z163qkmrFWwCO5jyxggf5rugAgugJZgykkWuZamg6C3lUsqRUZ0FGOt6CdJEc16DEguhjFwZo9mfrxSl1G+y0qZXUX7sR5spPTAvzD9H9BkGonri+UNLNAqvatfY3GpHJVPNEMvFvQAzcxMveR9OuBhweCUqLxxVBx38dXKSXPKcEjqr7VTxKlkeEgbYQKq5a1xQJhGymBiJuriYHNnTYmgi6Gxzc5937t6OT5DmsZ2IMIlHzU6vazmtHNdxwxHaSwSP8APF1Y08InFBkA0sDo5w3eu53APHkaRDkiRFFvuOstsPhPd8AjkqrjypoTxmI6GZqdTaprjTD2Y5jzPfdfd23YQBOv1erKZPVFI0pbGBmdMmbpTe7xaOj7RJJS16C0ONX0OgniXpROaXGk2uYLjaH15HfRyo5ERb/P1ZB3Ye9fP52Z6Gsdx6ERJdn+iBqS1IkWGMYaCxJe44HTq0s9JD8ulMw8CM/FSjsto7fit0DnbpG0d0OVb5W3Vjw+Hu7B4ADAeXdnnGUXHAVm0B+aEY3hgDwDd14ox+4yvS2zu12IjoqVKpIJlS+UkMP05jPV9uHNyO7BNOlF8co5OccvBxndu6jF0gdaRY/y1t9eTmdHvj4ZTXdeACS9lzbPlmO66D/THY4zbCBvYSEDnaMHYShqJ1Fg2F3pahLY2C4K0TOIG0UTzDTD+Ns30EIdh6BQQRRfcCr/drrbPVGcdV9Ept2cY86cK2OQ9tPRVjV0/O2VWugGlEOSqgi4YohmiqvOvEJd/04LhCu4ullyTbLzp9ydP10UuogclYZ6e4v9LOyzpDSv19tANrThgzIUakV2g3gN9IbDNNnl0O0Y5bYEsgZARzRHZe3n5IBjjjf6hhdyscxGyxgbaDrQUzY6t0OVfKYg8shOyrXNlF1tXS9Jprgcp/fAdNBbYqzWziVIC9kcUuRmr1y/HzM0we20GBClaSiQYAxrZRb6wDUU7H33s0niJ4s0UzV9cZB0xtIizoGcHzdfhwaOYA5iOJQWttxN7nKwcfzIy7ALxJzHGkR58saSjBoRDxZfoZpnsygsyPfnppPxZKr4hLUgdmEeldffGuwCNa6qrI3uhhsvzDTfc7bBCGMz2qSOuaqPh1tNLL0Air4EnIiqGn4Xxwq9WVSxlW52MmwVjgYMMQjAnGDZsfCA7i2EN+gR9ua+PkQQmxtWi9eCUfW/jPfrR45LMr4qyJAOIQMyE97HcJB34VTowRLLcqBd+MAteO7E2AthAF3qLdezW36WMf5ZXVZQlSYybOmE7abhntB9nVyt9puHg6+AimSkJ+9DHwBj7o8PKLZCo1coW++VRUv2ZoNj2PIIHzYRvgbmM05y904Idg9jz4sr2SRwUUNBWzRUjpofWyJ94RQhaMOIuCSMD0UXTmm3hcHHvXG3zrPTBbEL7O8yJdkRzNMhTakx5wKywWRccK/iWHtf5wCBG7JfTLB8xG/REow7CeKdKXSgQfCNqWzOX45JiFzU+WZnIn5GxL3oVbuwfkjrGAky4FRsbvlSZCxr0JC88luqPJcJ4WKiqG6VM59C9B8Jw3BdVJW8rjCU9OoCRK2afOedazBBk7FNpuOkRITqDeN5+UibowPaNuRQ+n2Kw0Rujk+qPjRp4uDJKnS0oHpzsKNKD0VFD+CKcpMJY1vAJ5D2SIO6C5BSpHPJOqQRYohORYDeW48a5rJnazoC9OUdmAwedLikQiFfhDYfkIr9HC1rt3rAC6K9EYRVBKBNdjeS1rIUP8FoyO6hxY3PtiXGVutMK+ZVikk/nlMGupSvo16MPYR6P6aQILES8OjHnV+uKyvyLsgFmXVi7dbCYEn/K+V3oU2QVS18PwKScTcqaMoieGG4JtxXn+t1kF4HBDkwszH6M9gSHHJd6N6xp1kaDWPFu99WmKKYEv3qBK8yqYVJkRRneQOTVyyfH77jrKxg0ychkRqqsLK3QumRbMiowDAmspERoFFMHt05K9DdkYUjOV14n2hoTWAezI0IPyv6yqgcYPYsjLlLFZoG80Q7ehpKSzcQT1CjgV8zkFTLqQg5gQCXEYCnOQHDzJnl5qBElm4CCE3XJASadECgyLZuzlS+VRUYbytYeOSI6e3YMwBrFRhiFDcXedJzJx4CKQPSm1WRICvRhxULFeWzBVSlNJnXFspITtEzq4S7eBwuqlzBivIlaFtPyEomSFLN2W0M4LG+q8Wyqm5QUcVxdPBmj/+ff5Mt1NU+IyfHVLMsUz2NUYhJfGjQbjOifRKpLp2YF/VYGYaKnNVHOvHW8NpO5KTGbNPphitGLK/Ita7m+Grngl6uGqWxCrGwtTqzY2yZV3sQsAwcdsnMwc9/P56qNAmGDFR16YO/UsJPgNV/cRG8IzBABRHnTa/OwMv/nVOqt7HwyqAfGiBrYSjXyLRsMvVFCeNZUhhTMok1WjluAn6cr1Uoulyg7bpMoHqemv1+z7Qm0LB+y/bhtfVcIGAF/R2K6USRBKU9qItqX2zem1F02ZptNqKAWm9+lszFZU1WOvZi4pkW9lmFhaEwCd35yuEhYnLv7YGOMdF3TCusfPP3xVC3mZpa+oBJ6lZiv2XpdV2xQhHNkG2loxcuG4hLyjdvcoqScRiORAUpWRUvs1MDzeBw7lyTbLnmS9vIHRC1oA2xWpZiVmKmpqK6htKl2CNYKAO0wXKFGffMB5Z2WZ+oSkRYTGb7Dj+G6h6C2HfT6dsvXAuB2iXzTq62NGuNhjU5CpBPXSAOpiutnqH54aDypfnn3gOiHGfnX6GsgQFjQYjSlJUb72BhF0AhN7pjU9E2qB+u1TGt74mH7D+fS4W7LUdJcUUbPFKOpemzY3d72+EGYQi9BHwar/qCHWOzxUBqu18Qq7xmQJxPZSM5/Xj6Xy0xx1g5fjnMuqM6iah0qTHvNrMCoUWECH7hVFo8yt/94+pCgYgbTHDGudMJiCfnRskCeb0fiJxyKmg8nPuWEBJXEGjThVJ8o/JT/8a/M0BZEU6KpkpIDHRKMG82zVnPBz0QEJVg13T7q1f9uehVGVaiF7xJ8kKZ8HkT9xF4j8/ok/Es5QKLosZjgRCNpiQbUCAq7RuLcsPg7CX63+K2BWcJkD1nVhkSRo1oruaL8mCzDJUqY7iph3TSwXxpbDVkjwskSt18b/a8JE3zf89IJCYhSjzFrT8WBY6kb3hOm9hd4NFNjI1FlcevjWFxV+4svsZBNqcOFLS45h3SvGLlkcHKLSJFVE2ap2UgGYnTpvizB+qtv7WgZFXFfJmMzz8304CwlG6O+UnMCIUn3syHiTt9R9H6Qx9LBCLdffk2J/jiR1QYPRj0/mnt2PS8eVbUIa8T/DaTvDHoCHr7j6uX3m7LwlhcsvTw6i8ATY7qmz1StyOFNA9J/MKsKgfUcvf3LG7rf9560nwzQenqUt8ikeAqyd75ayXh1gFP20Dlr4IdjDOXDZH4H1q+8Ufj8KKoEQX/5/S2FYfMH09HXz3Lc8fV3TbpyjS6EkK8+egv0n+Hn7LXzreEVbg5fYJl/hn27ej6ffjz/9umBmYdfGDb7EmjBWFImuk1/PA8VwzNDUa2OXtzZC8xoRfkxt/sltR9OmHsM+lz26kcMkfsLz/gXGOhDo4Ch/puW3uwkpKBzlP8bAX009N3YWtyQC/F9Xe4sZ+yvu3/b30/hP9wdmIy6DhrlAAAAAElFTkSuQmCC","alt",""],[1,"nav"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"top","row","aling-items-center","justify-content-center"],[1,"col-sm-6"],[1,"card","card_title"],[1,"inicio"],["src","https://s1.1zoom.me/big3/547/345606-admin.jpg",1,"imagen"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","mail","type","email","required","",1,"form-control"],["class","error",4,"ngIf"],["formControlName","password","type","password","required","",1,"form-control"],[3,"routerLink"],["type","submit",1,"btn","btn-primary","button",3,"disabled"],[1,"error"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2)(3,"a",3),f._UZ(4,"img",4),f.qZA(),f.TgZ(5,"ul",5)(6,"li",6)(7,"a",7),f._uU(8,"Inicio de Sesi\xf3n "),f.qZA()(),f.TgZ(9,"li",6)(10,"a",7),f._uU(11,"Registro"),f.qZA()(),f.TgZ(12,"li",6)(13,"a",7),f._uU(14,"Recuperar Contrase\xf1a"),f.qZA()()()()()(),f.TgZ(15,"div",8)(16,"div",9)(17,"div",10)(18,"h2",11),f._uU(19,"Inicio de Sesi\xf3n"),f.qZA(),f._UZ(20,"img",12)(21,"br"),f.TgZ(22,"form",13),f.NdJ("ngSubmit",function(){return r.login()}),f.TgZ(23,"div",14)(24,"label",15)(25,"b"),f._uU(26,"Correo"),f.qZA()(),f._UZ(27,"input",16),f.YNc(28,pU,2,1,"label",17),f.qZA(),f.TgZ(29,"div",14)(30,"label",15)(31,"b"),f._uU(32,"Contrase\xf1a"),f.qZA()(),f._UZ(33,"input",18),f.YNc(34,gU,2,1,"label",17),f.qZA(),f.TgZ(35,"h6"),f._uU(36,"Si a\xfan no tienes cuenta "),f.TgZ(37,"a",19),f._uU(38,"Registrate"),f.qZA()(),f.TgZ(39,"button",20),f._uU(40,"Iniciar sesi\xf3n"),f.qZA()()()()()),2&t&&(f.xp6(7),f.Q6J("routerLink",f.DdM(8,mU)),f.xp6(3),f.Q6J("routerLink",f.DdM(9,yU)),f.xp6(3),f.Q6J("routerLink",f.DdM(10,_U)),f.xp6(9),f.Q6J("formGroup",r.userForm),f.xp6(6),f.Q6J("ngIf",r.emptyemail),f.xp6(6),f.Q6J("ngIf",r.emptyPassword),f.xp6(3),f.Q6J("routerLink","/register"),f.xp6(2),f.Q6J("disabled",!r.userForm.valid))},dependencies:[fr,dh,OD,f_,bD,DD,y_,m_,oE],styles:[".navbar-brand[_ngcontent-%COMP%]{display:contents;width:100%}.navbar-brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:60px}.inicio[_ngcontent-%COMP%]{text-align:center;align-items:center}.home[_ngcontent-%COMP%]{text-decoration:none;color:#f0f8ff;margin-left:1%}.home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:150px;border:2px solid #666;width:75px;height:70px}.nav-link[_ngcontent-%COMP%]{color:#f0f8ff}.imagen[_ngcontent-%COMP%]{height:300px}.top[_ngcontent-%COMP%]{height:100vh;width:90%}"]}),n})();function vU(n,e){if(1&n&&(f.TgZ(0,"label",11),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Oqu(t.emptyFields("email"))}}let wU=(()=>{class n{constructor(t,r,i){this.auth=t,this.formBuilder=r,this.router=i,this.email="",this.recoverForm=this.formBuilder.group({email:[""]})}ngOnInit(){}recoverPassword(){var t=this;return(0,ye.Z)(function*(){const r=t.recoverForm.get("email").value;console.log(r),yield t.auth.forgotPassword(r),t.router.navigate(["/login"])})()}emptyFields(t){return this.recoverForm.get(t)?.hasError("required")?"El campo es obligatorio":this.recoverForm.get(t)?"Formato incorrecto":""}get emptyemail(){return this.recoverForm.get("mail")?.invalid&&this.recoverForm.get("mail")?.touched}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(tE),f.Y36(ix),f.Y36(Ir))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-recover-password"]],decls:18,vars:3,consts:[[1,"top","row","aling-items-center","justify-content-center"],[1,"col-sm-6"],[1,"card","card_title"],[1,"recoverPassword"],["src","https://s1.1zoom.me/big3/547/345606-admin.jpg",1,"imagen"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","email","type","email","required","",1,"form-control"],["class","error",4,"ngIf"],["type","submit",1,"btn","btn-primary","button",3,"disabled"],[1,"error"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),f._uU(4,"Recuperar o Cambiar Contrase\xf1a"),f.qZA(),f._UZ(5,"img",4)(6,"br"),f.TgZ(7,"form",5),f.NdJ("ngSubmit",function(){return r.recoverPassword()}),f.TgZ(8,"div",6)(9,"label",7)(10,"b"),f._uU(11,"Correo"),f.qZA()(),f._UZ(12,"input",8),f.YNc(13,vU,2,1,"label",9),f.qZA(),f.TgZ(14,"h6"),f._uU(15,"Recuerda colocar un correo v\xe1lido o revise su carpeta de SPAM"),f.qZA(),f.TgZ(16,"button",10),f._uU(17,"Recuperar contrase\xf1a"),f.qZA()()()()()),2&t&&(f.xp6(7),f.Q6J("formGroup",r.recoverForm),f.xp6(6),f.Q6J("ngIf",r.emptyemail),f.xp6(3),f.Q6J("disabled",!r.recoverForm.valid))},dependencies:[fr,OD,f_,bD,DD,y_,m_,oE]}),n})();function EU(n,e){if(1&n&&(f.TgZ(0,"label",20),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Oqu(t.emptyFields("mail"))}}function IU(n,e){if(1&n&&(f.TgZ(0,"label",20),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Oqu(t.emptypassword("password"))}}const CU=function(){return["/login"]},bU=function(){return["/register"]};let DU=(()=>{class n{constructor(t,r,i){this.auth=t,this.router=r,this.formBuilder=i,this.email="",this.password="",this.userForm=this.formBuilder.group({mail:["",BM.required],password:new g_(this.password,[BM.required,BM.minLength(6)])})}ngOnInit(){}register(){var t=this;return(0,ye.Z)(function*(){const r=yield t.auth.register(t.userForm.value).catch(i=>{console.log("los datos del usuario son. ",t.userForm),alert("Registro incompleto"),console.log("error",i)});r&&(console.log("Registro en FireAuthentication completo"),alert("Registro con exito"),t.userForm.patchValue({id:r.user.uid}),console.log("datos usuario",t.userForm.value),t.auth.sendVerificationEmail(),t.router.navigate(["/sendEmail"]))})()}delay(t){return(0,ye.Z)(function*(){return new Promise(function(r){setTimeout(r,1e3*t)})})()}myAsyncFunction(){var t=this;return(0,ye.Z)(function*(){console.log("por fa espera"),yield t.delay(2),t.router.navigate(["/dashboard"])})()}emptyFields(t){return this.userForm.get(t)?.hasError("required")?"El campo es obligatorio":this.userForm.get(t)?"Formato incorrecto":""}emptypassword(t){return this.userForm.get(t)?.hasError("required")?"El campo es obligatorio":this.userForm.get(t)?"La contrase\xf1a debe tener m\xednimo 6 caracteres":""}get Password(){return this.userForm.get("password")?.invalid&&this.userForm.get("password")?.touched}get Email(){return this.userForm.get("mail")?.invalid&&this.userForm.get("mail")?.touched}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(tE),f.Y36(Ir),f.Y36(ix))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-register"]],decls:34,vars:8,consts:[[1,"navbar","navbar-light","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["routerLink","home",1,"home"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPEAAADRCAMAAAAquaQNAAAAkFBMVEX///8AAADx8fH5+fn19fXo6Oj8/Pzu7u7r6+vj4+OOjo7X19fw8PCfn59XV1ff39/ExMR2dnaioqK4uLhiYmKvr6/Ly8t4eHhra2sxMTElJSVGRkbS0tLZ2dk7OzuGhoZaWlqWlpY4ODhNTU29vb2IiIgeHh6RkZEpKSlnZ2cQEBAvLy8ZGRmqqqoLCwtCQkLwktYFAAAaN0lEQVR4nOUd2YKqOhIEF1QQZHUFxL2l/f+/GxIgpLKg9mkbZ6Ye7j2tCKmk9g1F+Z+CQP3OTsGg62X8IXgqBm///4G0Mc5UAnG/6+X8AagQYr3rBb0bJioLbtdLejMEHMZq1PWa3gkz9ZvHWF38D1P2QYBvAddR1wt7G2zFGKtXreuVvQkGEoRV9d710t4EvKAmEHe9tvdALsdYXXe9uJ/DdOKnoWdlmeWF6R4YVRLBhWHR1XpfBq2/WQe268/T0yGOrAWHidkj115aMP4vsESGwdzJzm041HCof2K1XbXrEpmH0HfDp3Ctz3la/qwVY3XSLU4SMNzUsZYvIFtByc5e6zWfJ651N7q9jmsFQ3SHqPWSa9cIQujnqx9ji+CGrKp2jMtd+QzYpPd/QhdBUtxn137JrGM0awjCf8YWg6msH1zxGUbI+gdiSgJBu6guLugaWQTur+H7BHwCxuO/RPgDFLL99acIq0bH+Ab/Lp9fhG7DApvs8Qp/GTo1rKetXs6bwOwQ4TbP/X0w7Qxf/e8JGoHTGcKjn7sL/wSdpaA2naC7zDozMe0u8M26wrYAvwuEuzS2zE4Q7jCmd+oE4Q6dxLZw8vvg2B3C3ZC0eukMYUEu+09g3xnGXWCbmR1qpnc7/6F74LLHS03p0Jh+F6ZL083TOM7RQ7SZn1BfxZ3Wc83fhHDIPmhWf5N1XArB5QR/Bw78kyraXv49jgBG70E4ETzKUdXbUt12x8AlvClKK4rVaea4r3RfzxS/BWGva7Ra4N/SaBJYfnLN0jviHufuSVcO79DGu08+YWX6+whvPxphZfjrCN8/vD7+16k6+3CEFeX6yxh/QmK0HZ7XTivT3sz6PcKle/FlnyynMTwf8GEceFl4m/MgPg1eCFNv6N8Z0ss+vUhcex5jtamzbNNqaXfIPAft5XQAqDxvi4+56g6X50AigIRAoo+tdU+9tsd9AMgL+gVQ5bbb67M+vnr4pfB8qW7b4yaf7CpikEtdESB1+6gE7+PNrpdKe5BcYqMIrMfZvd2VXywvNG1Z1dRridQxt0Uxm6gTRPX+Fpq00tkLD+k8z+fmKXaS1dft+/u28x6UArNgKxn8swBY8dZhCq2Eoahl8B9AB4kq3G7J9DN1bnbpifqbYCngfjjGAxW0z66g/+fFAOsXLKvH4PfAn1uFNVbZPGnahSXW82GR83XrhaeCw6+ZZVmvBjQ1mHEuhBkj/qB+woGWLgS4VmcRTwFuTBjmZ88uv3oxFWMxogpVZAEBDusdHPRRNw5GhfJ5ebwhaXYiEubVKoH9DPyJqBh8AtDr44+6qcwrTYdsnKammdPn0H8RY5WxQpDrTAsvUE1bar9u2hMxeQnt3lc5OYaVBeiWIEjYU6aeUzb11IffSTioUpsH3p97uYBtBqtHkD1Hs4aPNFjZTV0XCPy96JpZ+iJwHQ9R33LOfPlyFPcOQwk4ukX97eFoEtpZsg+nP8c4L9VI1W7FfvuywnahCkbIpew1fdoa+/tK+bi2d0/VYgC8EgopAXICihVwZVKzWiQe0Gb8ef9HqOblP/DC2GKqVyJ8JYyBR4F2k8u+j6tPHIrC/hTjqj0Qx3k4j855GeUpqKgIWuqk0FbfeU56N8TE9kP2Jmfnvl5fHQHp7LTUGyDPYiJwMN4ME1IkhwuauJznyxgXNEP3nBacIdPqWDN4HVb5YJtgw376eieqB0xLpG/ZANIywtoYc3C/yygnCkzl7IeP4nUC2NCsGylTl/JIbpOZj2wxdIWFH5B22LwWq4JRUYPXQyWFB3GkcIRfzhAh9zG33MonrLrLLmMpxX0qbWcb+7L5ENM2yrALQnZKJVCatdqycCi6KZwfVWcAQdrQVlgXgVh55a0FYX4hIydK2jxLS2oK/3NA65GXirKAvV1h3Xlxj0FTZRD1jRlobJ0r3g1vJBGTM7+jqB+WoNyEBhnGhQ+wFjfGIy+xKd7FOh4Yb6Zyxp5L1w3Gld/A+k9SRh5Lg6GJAooF8CgTEE8ZlxvQfakE1r1c2b6MkeWzLfAtKLF2thUFBjpDtAEfMLmnxI39tGVuWBvGQKitDMGEuc7TMjVuNvPpS6nkEj+FF2lz3njrno0rIcV5E4/mdnBw9k3+N5wl8xEJ5TK+eN1mVuIhSKzsvjhyi/8d6H74hfLHA066RhbDG2pupbDtGtkSHkxT+k3oyK5koap3Oa8yy2vghbTrcXtfZVn2hLD7kLrFMsjDxWGezU2cSWRQao0T6HLcBwW6GOMnB4LMX/nJR4hqpWJkjuCeSrldQJPWg7jvkTPfuwLMgDfu48eZ5CXr07df/jldE6XI4cIC6SOEOa4UnXHlM19v988YKIehtPc5kntQwRfyaUmBMbNWtGDdn35W7V51MryubFM3F9FAGpYPEnX7WahWUKfJODaTi94VF+JGAApZVyfng8gYAGE+Lo8tjdSJw+uwYfuD6+dJWpBN+MkMCkcsc1Pmqvev/IfQpBKYgpSepP+JDR5UwDr/f54wfRbo9Di0JsSh+ItEqfKFBSG8Xc/YTCZG7x2SrB/kY8ezkkt4muf2pn3IFzCs6NT5QOxRSRJkA5ERXtUh6Os8tprt23np/vdCP7o9Fjz6HJmBLGYKDpIyNAfCtz6EkgMeiukhUqb7WDxvM/J/YYixYbZ5O7vYFmAN66nP7Qh/yeYOP/aZRLDy/yl0redP+PUW+wzWRqo5QBOesGyBPx8G5Px4dnP/6RS3R0vaHvtt5THqQkqU+bZMxdvqpbGT1o+K2XovpfSXjSPM9YGUieSROJAp4WGmxmX+auA3E5pvrfDybJpbJXAFWdGhIY1tSqQ0TFBtEV+8WuZ4eS3HuPnJaJoV4h9xWfFOYneIX1PDFLjg9Nrm9fner1ikPx0Sl5ZH+XwxtVCFDiH9Yxnxoylut2edDuPns4escokSnuVAeApMpzXelBf7hwg8Z5T+62BLhIb+FA0Ky69gods34sbBz8flPpOR+uc5PFj6PpWSEOkQRmIiG0r/l3lXi4etuy1KYBvPXTXc79385LRMVS/ndTwx5DZ5vN+IpHstLPK9tbwocqJLS2tkuz2iyWwsK59hRL5qdaIF0oLpMibzWL0JwszMPZFSHcoGA8W53+g24zh1ZaWuEkcUg4z97sRVujQ2kh0Fqfh9cOUpP8o+nLnHs/uNvK6edBISKGcOsJkjKZGST5HUhfRzmPUb/h83r9GxELkYQrbHyb5HhjEf5WQy4al0SSXQTrFfS2VXRKUyLSV0Xk0kiBqH3SexSb2StLrIGkXlG4+qi1mRwu4Qtk7ahBat21KyfxeRYJc4kQIyPJSo+oQVAhLEmZNKU9FhRg8xZiNWrFL8Rk6VQI7GzWd6s2mHmnI3i6a1rgFxLxR/VlltEvVJLY1B8vHbxs0T2czzR2UCjKnPrnKJFDHPMpZB+Wbhnqwhqgn3ju7b5w5PFBHk3THKkWsqs2pnh+JtJTIFNtFEgAa9dPh0trYtFO9kDj/2CMZWtYF2VfHLWaW89BLoTyqWFRNHpG52Hjfmw2wlShgeB60YA2HCxgqwUBSkISvV2tA1kS+LalnHeg84VmNnSg44mdg3vpuLbOL+rqqlUlVy975QvoRtNeSgnI8xw+tHsKpvWbNt0zBCPJHq9ahmowDYoBGbDmIV2a3YM+OLbKFGWpyjUuuvGxvdHiN2Oxsc70xampxoAxPuy73+iiPMxuElXxFxXYoXnZZQ7DFAuuZoAIvzWVNEk9T/OJW7GDZ+3h1LgCl/JogMJMYmXdoGuPVI1sXOUl1+U/UGJMpZ/a2X/6BzUuaB4Qr4ejrW1qq2c0aI71SLVr80QRoaKVvLEYdx+hwtMRViTB0x8MUpq4QxOLeDHsX7hCwq6TrFmfkZJU3XFlcGSutvloDIAU5qzNa14A7wXRu+Luu9y5NhU9tXwWcYGiEwoDUuHbhmVoteuGdQhkStHL7LPw1MjauG7vUdssgY/dMYaWzfKEUb64qBB/X2jTCrROTHuEex6go9iA5ZJK8J6RqU1fwFNDQjFbDemH2TxxKlnDfnsKfU6b2UclA8Nd05jKIHpbt2lVJIyO6g/5A8A35y+V0/s9k7nRVBMJfiKNosg+EKRsrXDZGNYKk3srR198jCoIQDMUhAfI1EIFjv/Qws3n25AfOa9RDGPnH0InKjOTa+maOx+f1UG4ZKm4++GdcRVrp91R/7pKUI5qf9YpFp4xWmhOmgSK5xYIbmrNffIDjh4gUatdO0KwiMHDEWxYji+lZJqcxA0EQRGRLVjlJ2lsWErZnfNIrlRNqq60PGbFc4Er2EXGRT70kFArC2NeHdHRQ9Be3aOaapmmYua2VEGGZVbVwa1UtmhAWSJayuL89pSOlLLgDHMD/1TVRHAcjeov0LXSUiJqKRUNdDf6aUA4yVgA2tsUU7n3P0FKc2L11lXstEpEoL7I2M0u4wHoT2hq3uwRtIMyofpmd+Qb3aWbFqFvWo213sGdk1jeLnKcNSNvhlCRVB2Ec6Q2wWV7rVunKTELVeHlhzwAig17fgn4AFF30V769DubW0IzVqLJ7tqNluBAjBbOaRI7KIDhs56nwADhSTNdO7UFvivQW982agTCsmCGKj/uaOoh2GxcSR4P3QStmGkDGQZoIoPSTqgm10U73Xj9GrYc5EpxZnswjJIojdNfFWWB4BlYk+gIRO+ZEO/Z7kdFN7jIa1rrazcKivWhqyFQmQkHJ+U4uTb/55FYUnwCKrTI29Us3yUaNqJfVdCs5Rk/qn80pMu7vaEAYhRqTzYcaFDnW6Kyq3e5qequ/qQ0GE6Xo8SUK5gJYykM8pF04bh+qSyIh+rJZYTErZV9tdu8aHVQKsSzVzMSecBtQHMmOBBoWZL2NBacl0X6nRalewN8ZnOQznBEM1g7bi2S9hvhwqUYqGNHeJKXWPn0tof9ivFTaOU4xiyGi0h+Oxq2Hjix7VNh1WJssKyzTtu3B0OBYMolRn+GTTgvGXOHsM6DCB3028a3F8OaJdogjzqDJMNOQ+XCImJp9Sd7uxjrPJ7rlJ9U1n5c6VFFQc5JG92I0wE0GizOXzXq6SigigwLlsXC+9OcZpDeR9dZGj2V7KpV2A5B8xXFcQgHXa04ppfSeiZYMFeY4xRhQFZY6eRrWpBtg2lFeRywpzAKOJMgr2alfwFuVYl6QYWwdRMH4Ab5fSfxbSeRTMnYV6D/1JtVcaYQrt6GmKtkSaGj0MyKxZHDa0BM5oJ21XlCaEnriqf1BTSochRAdOJKnooquk5nB19Q4N+nZ6WX5b4z163qkmrFWwCO5jyxggf5rugAgugJZgykkWuZamg6C3lUsqRUZ0FGOt6CdJEc16DEguhjFwZo9mfrxSl1G+y0qZXUX7sR5spPTAvzD9H9BkGonri+UNLNAqvatfY3GpHJVPNEMvFvQAzcxMveR9OuBhweCUqLxxVBx38dXKSXPKcEjqr7VTxKlkeEgbYQKq5a1xQJhGymBiJuriYHNnTYmgi6Gxzc5937t6OT5DmsZ2IMIlHzU6vazmtHNdxwxHaSwSP8APF1Y08InFBkA0sDo5w3eu53APHkaRDkiRFFvuOstsPhPd8AjkqrjypoTxmI6GZqdTaprjTD2Y5jzPfdfd23YQBOv1erKZPVFI0pbGBmdMmbpTe7xaOj7RJJS16C0ONX0OgniXpROaXGk2uYLjaH15HfRyo5ERb/P1ZB3Ye9fP52Z6Gsdx6ERJdn+iBqS1IkWGMYaCxJe44HTq0s9JD8ulMw8CM/FSjsto7fit0DnbpG0d0OVb5W3Vjw+Hu7B4ADAeXdnnGUXHAVm0B+aEY3hgDwDd14ox+4yvS2zu12IjoqVKpIJlS+UkMP05jPV9uHNyO7BNOlF8co5OccvBxndu6jF0gdaRY/y1t9eTmdHvj4ZTXdeACS9lzbPlmO66D/THY4zbCBvYSEDnaMHYShqJ1Fg2F3pahLY2C4K0TOIG0UTzDTD+Ns30EIdh6BQQRRfcCr/drrbPVGcdV9Ept2cY86cK2OQ9tPRVjV0/O2VWugGlEOSqgi4YohmiqvOvEJd/04LhCu4ullyTbLzp9ydP10UuogclYZ6e4v9LOyzpDSv19tANrThgzIUakV2g3gN9IbDNNnl0O0Y5bYEsgZARzRHZe3n5IBjjjf6hhdyscxGyxgbaDrQUzY6t0OVfKYg8shOyrXNlF1tXS9Jprgcp/fAdNBbYqzWziVIC9kcUuRmr1y/HzM0we20GBClaSiQYAxrZRb6wDUU7H33s0niJ4s0UzV9cZB0xtIizoGcHzdfhwaOYA5iOJQWttxN7nKwcfzIy7ALxJzHGkR58saSjBoRDxZfoZpnsygsyPfnppPxZKr4hLUgdmEeldffGuwCNa6qrI3uhhsvzDTfc7bBCGMz2qSOuaqPh1tNLL0Air4EnIiqGn4Xxwq9WVSxlW52MmwVjgYMMQjAnGDZsfCA7i2EN+gR9ua+PkQQmxtWi9eCUfW/jPfrR45LMr4qyJAOIQMyE97HcJB34VTowRLLcqBd+MAteO7E2AthAF3qLdezW36WMf5ZXVZQlSYybOmE7abhntB9nVyt9puHg6+AimSkJ+9DHwBj7o8PKLZCo1coW++VRUv2ZoNj2PIIHzYRvgbmM05y904Idg9jz4sr2SRwUUNBWzRUjpofWyJ94RQhaMOIuCSMD0UXTmm3hcHHvXG3zrPTBbEL7O8yJdkRzNMhTakx5wKywWRccK/iWHtf5wCBG7JfTLB8xG/REow7CeKdKXSgQfCNqWzOX45JiFzU+WZnIn5GxL3oVbuwfkjrGAky4FRsbvlSZCxr0JC88luqPJcJ4WKiqG6VM59C9B8Jw3BdVJW8rjCU9OoCRK2afOedazBBk7FNpuOkRITqDeN5+UibowPaNuRQ+n2Kw0Rujk+qPjRp4uDJKnS0oHpzsKNKD0VFD+CKcpMJY1vAJ5D2SIO6C5BSpHPJOqQRYohORYDeW48a5rJnazoC9OUdmAwedLikQiFfhDYfkIr9HC1rt3rAC6K9EYRVBKBNdjeS1rIUP8FoyO6hxY3PtiXGVutMK+ZVikk/nlMGupSvo16MPYR6P6aQILES8OjHnV+uKyvyLsgFmXVi7dbCYEn/K+V3oU2QVS18PwKScTcqaMoieGG4JtxXn+t1kF4HBDkwszH6M9gSHHJd6N6xp1kaDWPFu99WmKKYEv3qBK8yqYVJkRRneQOTVyyfH77jrKxg0ychkRqqsLK3QumRbMiowDAmspERoFFMHt05K9DdkYUjOV14n2hoTWAezI0IPyv6yqgcYPYsjLlLFZoG80Q7ehpKSzcQT1CjgV8zkFTLqQg5gQCXEYCnOQHDzJnl5qBElm4CCE3XJASadECgyLZuzlS+VRUYbytYeOSI6e3YMwBrFRhiFDcXedJzJx4CKQPSm1WRICvRhxULFeWzBVSlNJnXFspITtEzq4S7eBwuqlzBivIlaFtPyEomSFLN2W0M4LG+q8Wyqm5QUcVxdPBmj/+ff5Mt1NU+IyfHVLMsUz2NUYhJfGjQbjOifRKpLp2YF/VYGYaKnNVHOvHW8NpO5KTGbNPphitGLK/Ita7m+Grngl6uGqWxCrGwtTqzY2yZV3sQsAwcdsnMwc9/P56qNAmGDFR16YO/UsJPgNV/cRG8IzBABRHnTa/OwMv/nVOqt7HwyqAfGiBrYSjXyLRsMvVFCeNZUhhTMok1WjluAn6cr1Uoulyg7bpMoHqemv1+z7Qm0LB+y/bhtfVcIGAF/R2K6USRBKU9qItqX2zem1F02ZptNqKAWm9+lszFZU1WOvZi4pkW9lmFhaEwCd35yuEhYnLv7YGOMdF3TCusfPP3xVC3mZpa+oBJ6lZiv2XpdV2xQhHNkG2loxcuG4hLyjdvcoqScRiORAUpWRUvs1MDzeBw7lyTbLnmS9vIHRC1oA2xWpZiVmKmpqK6htKl2CNYKAO0wXKFGffMB5Z2WZ+oSkRYTGb7Dj+G6h6C2HfT6dsvXAuB2iXzTq62NGuNhjU5CpBPXSAOpiutnqH54aDypfnn3gOiHGfnX6GsgQFjQYjSlJUb72BhF0AhN7pjU9E2qB+u1TGt74mH7D+fS4W7LUdJcUUbPFKOpemzY3d72+EGYQi9BHwar/qCHWOzxUBqu18Qq7xmQJxPZSM5/Xj6Xy0xx1g5fjnMuqM6iah0qTHvNrMCoUWECH7hVFo8yt/94+pCgYgbTHDGudMJiCfnRskCeb0fiJxyKmg8nPuWEBJXEGjThVJ8o/JT/8a/M0BZEU6KpkpIDHRKMG82zVnPBz0QEJVg13T7q1f9uehVGVaiF7xJ8kKZ8HkT9xF4j8/ok/Es5QKLosZjgRCNpiQbUCAq7RuLcsPg7CX63+K2BWcJkD1nVhkSRo1oruaL8mCzDJUqY7iph3TSwXxpbDVkjwskSt18b/a8JE3zf89IJCYhSjzFrT8WBY6kb3hOm9hd4NFNjI1FlcevjWFxV+4svsZBNqcOFLS45h3SvGLlkcHKLSJFVE2ap2UgGYnTpvizB+qtv7WgZFXFfJmMzz8304CwlG6O+UnMCIUn3syHiTt9R9H6Qx9LBCLdffk2J/jiR1QYPRj0/mnt2PS8eVbUIa8T/DaTvDHoCHr7j6uX3m7LwlhcsvTw6i8ATY7qmz1StyOFNA9J/MKsKgfUcvf3LG7rf9560nwzQenqUt8ikeAqyd75ayXh1gFP20Dlr4IdjDOXDZH4H1q+8Ufj8KKoEQX/5/S2FYfMH09HXz3Lc8fV3TbpyjS6EkK8+egv0n+Hn7LXzreEVbg5fYJl/hn27ej6ffjz/9umBmYdfGDb7EmjBWFImuk1/PA8VwzNDUa2OXtzZC8xoRfkxt/sltR9OmHsM+lz26kcMkfsLz/gXGOhDo4Ch/puW3uwkpKBzlP8bAX009N3YWtyQC/F9Xe4sZ+yvu3/b30/hP9wdmIy6DhrlAAAAAElFTkSuQmCC","alt",""],[1,"nav"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"top","row","aling-items-center","justify-content-center"],[1,"col-sm-6"],[1,"card","card_title"],[1,"inicio"],["src","https://s1.1zoom.me/big3/547/345606-admin.jpg",1,"imagen"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","mail","type","email","required","",1,"form-control"],["class","error",4,"ngIf"],["formControlName","password","type","password","ng-minlength","6","ng-maxlength","20","required","",1,"form-control"],["type","submit",1,"btn","btn-primary","button","w-100",3,"disabled"],[1,"error"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2)(3,"a",3),f._UZ(4,"img",4),f.qZA(),f.TgZ(5,"ul",5)(6,"li",6)(7,"a",7),f._uU(8,"Inicio de Sesi\xf3n "),f.qZA()(),f.TgZ(9,"li",6)(10,"a",7),f._uU(11,"Registro"),f.qZA()()()()()(),f.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"h2",11),f._uU(16,"Registrar Ciclista "),f.qZA(),f._UZ(17,"img",12)(18,"br"),f.TgZ(19,"form",13),f.NdJ("ngSubmit",function(){return r.register()}),f.TgZ(20,"div",14)(21,"label",15)(22,"b"),f._uU(23,"Correo"),f.qZA()(),f._UZ(24,"input",16),f.YNc(25,EU,2,1,"label",17),f.qZA(),f.TgZ(26,"div",14)(27,"label",15)(28,"b"),f._uU(29,"Contrase\xf1a"),f.qZA()(),f._UZ(30,"input",18),f.YNc(31,IU,2,1,"label",17),f.qZA(),f.TgZ(32,"button",19),f._uU(33,"Registrar"),f.qZA()()()()()),2&t&&(f.xp6(7),f.Q6J("routerLink",f.DdM(6,CU)),f.xp6(3),f.Q6J("routerLink",f.DdM(7,bU)),f.xp6(9),f.Q6J("formGroup",r.userForm),f.xp6(6),f.Q6J("ngIf",r.Email),f.xp6(6),f.Q6J("ngIf",r.Password),f.xp6(1),f.Q6J("disabled",!r.userForm.valid))},dependencies:[fr,dh,OD,f_,bD,DD,y_,m_,oE],styles:[".navbar-brand[_ngcontent-%COMP%]{display:contents;width:100%}.navbar-brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:60px}.home[_ngcontent-%COMP%]{text-decoration:none;color:#f0f8ff;margin-left:1%}.home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:150px;border:2px solid #666;width:75px;height:70px}.nav-link[_ngcontent-%COMP%]{color:#f0f8ff}.imagen[_ngcontent-%COMP%]{height:300px}.top[_ngcontent-%COMP%]{height:100vh;width:90%}.btn[_ngcontent-%COMP%]{margin:0%;padding:0%;height:49px}.inicio[_ngcontent-%COMP%]{text-align:center;align-items:center}"]}),n})(),TU=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}ngOnInit(){this.user=localStorage.getItem("usuario")}onSendEmail(){this.auth.sendVerificationEmail(),alert("Se envi\xf3 un correo de verificaci\xf3n de cuenta"),this.router.navigate(["/login"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(tE),f.Y36(Ir))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-send-email"]],decls:14,vars:1,consts:[[1,"car","mt-5"],[1,"card-body"],[1,"card-title","text-center"],[1,"form-group","mt-2"],[1,"text-center"],[1,"form-group","text-center","mt-5"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),f._uU(3," Gracias por registrarte "),f.qZA(),f.TgZ(4,"div",3)(5,"p",4),f._uU(6," Hemos enviado un link de confirmaci\xf3n de cuenta a tu correo "),f.TgZ(7,"strong"),f._uU(8),f.qZA()(),f.TgZ(9,"p",4),f._uU(10," Por favor revisa tu correo electr\xf3nico, en caso de no encontrar el correo busca en la carpeta de SPAM "),f.qZA()(),f.TgZ(11,"div",5)(12,"button",6),f.NdJ("click",function(){return r.onSendEmail()}),f._uU(13,"Reenviar correo de verificaci\xf3n"),f.qZA()()()()),2&t&&(f.xp6(8),f.Oqu(r.user))}}),n})();var kP=L(5032);const PP="@firebase/database";let sx="";function FP(n){sx=n}class MU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class xU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const LP=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new MU(e)}}catch{}return new xU},xg=LP("localStorage"),ox=LP("sessionStorage"),__=new Ts.Yd("@firebase/database"),VP=function(){let n=1;return function(){return n++}}(),UP=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},aE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=aE.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let Rg=null,BP=!0;const jP=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(__.logLevel=Ts.in.VERBOSE,Rg=__.log.bind(__),e&&ox.set("logging_enabled",!0)):"function"==typeof n?Rg=n:(Rg=null,ox.remove("logging_enabled"))},vi=function(...n){if(!0===BP&&(BP=!1,null===Rg&&!0===ox.get("logging_enabled")&&jP(!0)),Rg){const e=aE.apply(null,n);Rg(e)}},uE=function(n){return function(...e){vi(n,...e)}},ax=function(...n){const e="FIREBASE INTERNAL ERROR: "+aE(...n);__.error(e)},zl=function(...n){const e=`FIREBASE FATAL ERROR: ${aE(...n)}`;throw __.error(e),new Error(e)},hs=function(...n){const e="FIREBASE WARNING: "+aE(...n);__.warn(e)},FD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},_d="[MIN_NAME]",Wl="[MAX_NAME]",Ng=function(n,e){if(n===e)return 0;if(n===_d||e===Wl)return-1;if(e===_d||n===Wl)return 1;{const t=LD(n),r=LD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},kU=function(n,e){return n===e?0:n<e?-1:1},lE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},ux=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=ux(n[e[r]]);return t+="}",t},HP=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function wi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const GP=function(n){(0,P.hu)(!FD(n),"Invalid JSON number");const r=1023;let i,a,l,h,y;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(y=52;y;y-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(y=11;y;y-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const D=w.join("");let A="";for(y=0;y<64;y+=8){let k=parseInt(D.substr(y,8),2).toString(16);1===k.length&&(k="0"+k),A+=k}return A.toLowerCase()},LU=new RegExp("^-?(0*)\\d{1,10}$"),zP=-2147483648,lx=2147483647,LD=function(n){if(LU.test(n)){const e=Number(n);if(e>=zP&&e<=lx)return e}return null},v_=function(n){try{n()}catch(e){setTimeout(()=>{throw hs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},cE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class UU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){hs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class BU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(vi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hs(e)}}let dE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ZP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,JP="websocket",XP="long_polling";class dx{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function eO(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===JP)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==XP)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function jU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return wi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class HU{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const hx={},fx={};function px(n){const e=n.toString();return hx[e]||(hx[e]=new HU),hx[e]}class zU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&v_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class tf{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uE(e),this.stats_=px(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),eO(t,XP,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new zU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gx((...a)=>{const[l,h,y,w,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=y;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&ZP.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){tf.forceAllow_=!0}static forceDisallow(){tf.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!tf.forceAllow_&&(tf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=HP(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=VP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=gx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){vi("frame writing exception"),h.stack&&vi(h.stack),vi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||vi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{vi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let UD=null;typeof MozWebSocket<"u"?UD=MozWebSocket:typeof WebSocket<"u"&&(UD=WebSocket);let w_=(()=>{class n{constructor(t,r,i,a,l,h,y){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uE(this.connId),this.stats_=px(r),this.connURL=n.connectionURL_(r,h,y,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&ZP.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),eO(t,JP,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xg.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${sx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new UD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==UD&&!n.forceDisallow_}static previouslyFailed(){return xg.isInMemoryStorage||!0===xg.get("previous_websocket_failure")}markConnectionHealthy(){xg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=HP(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),aO=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[tf,w_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=w_&&w_.isAvailable();let i=r&&!w_.previouslyFailed();if(t.webSocketOnly&&(r||hs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[w_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class pO{constructor(e,t,r,i,a,l,h,y,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=y,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uE("c:"+this.id+":"),this.transportManager_=new aO(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=cE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=lE("t",e),r=lE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=lE("t",e),r=lE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=lE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ax("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ax("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&hs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),cE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class gO{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class mO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class BD extends mO{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new BD}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class yn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function pn(){return new yn("")}function qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function nf(n){return n.pieces_.length-n.pieceNum_}function Pn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new yn(n.pieces_,e)}function yx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function hE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function vO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new yn(e,0)}function lr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof yn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new yn(t,0)}function $t(n){return n.pieceNum_>=n.pieces_.length}function Fs(n,e){const t=qt(n),r=qt(e);if(null===t)return e;if(t===r)return Fs(Pn(n),Pn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function hB(n,e){const t=hE(n,0),r=hE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Ng(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function _x(n,e){if(nf(n)!==nf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ba(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(nf(n)>nf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class fB{constructor(e,t){this.errorPrefix_=t,this.parts_=hE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);wO(this)}}function wO(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+kg(n))}function kg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class vx extends mO{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new vx}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const fE=1e3;let HD,Pg=(()=>{class n extends gO{constructor(t,r,i,a,l,h,y,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=y,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=uE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&BD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,P.Pz)(l)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const y=h.d;"ok"===h.s?r.resolve(y):r.reject(y)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const y={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,y=>{const w=y.d,D=y.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",y),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();hs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ax("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=fE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=fE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ye.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let y=!1,w=null;const D=function(){w?w.close():(y=!0,a())};t.realtime_={close:D,sendRequest:function(U){(0,P.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(U)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,Z]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);y?vi("getToken() completed but was canceled"):(vi("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=Z&&Z.token,w=new pO(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,me=>{hs(me+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(U){t.log_("Failed to get token: "+U),y||(t.repoInfo_.nodeAdmin&&hs(U),D())}}})()}interrupt(t){vi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){vi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=fE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>ux(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new yn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){vi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){vi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+sx.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=BD.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Zt(e,t)}}class jD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Zt(_d,e),i=new Zt(_d,t);return 0!==this.compare(r,i)}minPost(){return Zt.MIN}}class CO extends jD{static get __EMPTY_NODE(){return HD}static set __EMPTY_NODE(e){HD=e}compare(e,t){return Ng(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(Wl,HD)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Zt(e,HD)}toString(){return".key"}}const ql=new CO;class GD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Ex,Ku=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??go.EMPTY_NODE,this.right=l??go.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return go.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return go.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class go{constructor(e,t=go.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new go(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ku.BLACK,null,null))}remove(e){return new go(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ku.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new GD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new GD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new GD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new GD(this.root_,null,this.comparator_,!0,e)}}function EB(n,e){return Ng(n.name,e.name)}function wx(n,e){return Ng(n,e)}go.EMPTY_NODE=new class wB{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ku(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const bO=function(n){return"number"==typeof n?"number:"+GP(n):"string:"+n},DO=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===Ex||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===Ex||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let TO,SO,AO,E_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),DO(this.priorityNode_)}static set __childrenNodeConstructor(t){TO=t}static get __childrenNodeConstructor(){return TO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return $t(t)?this:".priority"===qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=qt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===nf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+bO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?GP(this.value_):this.value_,this.lazyHash_=UP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Gn=new class DB extends jD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Ng(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(Wl,new E_("[PRIORITY-POST]",AO))}makePost(e,t){const r=SO(e);return new Zt(t,new E_("[PRIORITY-POST]",r))}toString(){return".priority"}},TB=Math.log(2);class SB{constructor(e){this.count=parseInt(Math.log(e+1)/TB,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const zD=function(n,e,t,r){n.sort(e);const i=function(y,w){const D=w-y;let A,k;if(0===D)return null;if(1===D)return A=n[y],k=t?t(A):A,new Ku(k,A.node,Ku.BLACK,null,null);{const U=parseInt(D/2,10)+y,Z=i(y,U),me=i(U+1,w);return A=n[U],k=t?t(A):A,new Ku(k,A.node,Ku.BLACK,Z,me)}},h=function(y){let w=null,D=null,A=n.length;const k=function(Z,me){const xe=A-Z,ct=A;A-=Z;const mt=i(xe+1,ct),St=n[xe],Tt=t?t(St):St;U(new Ku(Tt,St.node,me,null,mt))},U=function(Z){w?(w.left=Z,w=Z):(D=Z,w=Z)};for(let Z=0;Z<y.count;++Z){const me=y.nextBitIsOne(),xe=Math.pow(2,y.count-(Z+1));me?k(xe,Ku.BLACK):(k(xe,Ku.BLACK),k(xe,Ku.RED))}return D}(new SB(n.length));return new go(r||e,h)};let Ix;const I_={};class vd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(I_&&Gn,"ChildrenNode.ts has not been loaded"),Ix=Ix||new vd({".priority":I_},{".priority":Gn}),Ix}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof go?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==ql,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Zt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?zD(r,e.getCompare()):I_;const y=e.toString(),w=Object.assign({},this.indexSet_);w[y]=e;const D=Object.assign({},this.indexes_);return D[y]=h,new vd(D,w)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const l=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(l,"Missing index implementation for "+a),i===I_){if(l.isDefinedOn(e.node)){const h=[],y=t.getIterator(Zt.Wrap);let w=y.getNext();for(;w;)w.name!==e.name&&h.push(w),w=y.getNext();return h.push(e),zD(h,l.getCompare())}return I_}{const h=t.get(e.name);let y=i;return h&&(y=y.remove(new Zt(e.name,h))),y.insert(e,e.node)}});return new vd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===I_)return i;{const a=t.get(e.name);return a?i.remove(new Zt(e.name,a)):i}});return new vd(r,this.indexSet_)}}let pE,Bt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&DO(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pE||(pE=new n(new go(wx),null,vd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?pE:r}}getChild(t){const r=qt(t);return null===r?this:this.getImmediateChild(r).getChild(Pn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Zt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?pE:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=qt(t);if(null===i)return r;{(0,P.hu)(".priority"!==qt(t)||1===nf(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Pn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Gn,(h,y)=>{r[h]=y.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const y in r)h[y]=r[y];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+bO(this.getPriority().val())+":"),this.forEachChild(Gn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":UP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Zt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===gE?-1:0}withIndex(t){if(t===ql||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ql||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Gn),a=r.getIterator(Gn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===ql?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const gE=new class AB extends Bt{constructor(){super(new go(wx),Bt.EMPTY_NODE,vd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Bt.EMPTY_NODE}isEmpty(){return!1}};function mr(n,e=null){if(null===n)return Bt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new E_(n,mr(e));if(n instanceof Array){let t=Bt.EMPTY_NODE;return wi(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=mr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(mr(e))}{const t=[];let r=!1;if(wi(n,(l,h)=>{if("."!==l.substring(0,1)){const y=mr(h);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new Zt(l,y)))}}),0===t.length)return Bt.EMPTY_NODE;const a=zD(t,EB,l=>l.name,wx);if(r){const l=zD(t,Gn.getCompare());return new Bt(a,mr(e),new vd({".priority":l},{".priority":Gn}))}return new Bt(a,mr(e),vd.Default)}}Object.defineProperties(Zt,{MIN:{value:new Zt(_d,Bt.EMPTY_NODE)},MAX:{value:new Zt(Wl,gE)}}),CO.__EMPTY_NODE=Bt.EMPTY_NODE,E_.__childrenNodeConstructor=Bt,function IB(n){Ex=n}(gE),function bB(n){AO=n}(gE),function CB(n){SO=n}(mr);class Cx extends jD{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!$t(e)&&".priority"!==qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Ng(e.name,t.name):a}makePost(e,t){const r=mr(e),i=Bt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Zt(t,i)}maxPost(){const e=Bt.EMPTY_NODE.updateChild(this.indexPath_,gE);return new Zt(Wl,e)}toString(){return hE(this.indexPath_,0).join("/")}}const bx=new class xB extends jD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ng(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(e,t){const r=mr(e);return new Zt(t,r)}toString(){return".value"}},C_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",RB=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=C_.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=C_.charAt(e[i]);return(0,P.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),RO=function(n){if(n===""+lx)return"-";const e=LD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Wl;const a=C_.charAt(C_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},NO=function(n){if(n===""+zP)return _d;const e=LD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+lx:(delete t[t.length-1],t.join("")):(t[t.length-1]=C_.charAt(C_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function kO(n){return{type:"value",snapshotNode:n}}function b_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function mE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function yE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Tx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(mE(t,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(b_(t,r)):l.trackChildChange(yE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Gn,(i,a)=>{t.hasChild(i)||r.trackChildChange(mE(i,a))}),t.isLeafNode()||t.forEachChild(Gn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(yE(i,a,l))}else r.trackChildChange(b_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Bt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class _E{constructor(e){this.indexedFilter_=new Tx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_E.getStartPost_(e),this.endPost_=_E.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new Zt(t,r))||(r=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Bt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Bt.EMPTY_NODE);const a=this;return t.forEachChild(Gn,(l,h)=>{a.matches(new Zt(l,h))||(i=i.updateImmediateChild(l,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class kB{constructor(e){this.rangedFilter_=new _E(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new Zt(t,r))||(r=Bt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Bt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!y)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,y;if(i=t.withIndex(this.index_),i=i.updatePriority(Bt.EMPTY_NODE),this.reverse_){y=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();h=(k,U)=>A(U,k)}else y=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,D=!1;for(;y.hasNext();){const A=y.getNext();!D&&h(a,A)<=0&&(D=!0),D&&w<this.limit_&&h(A,l)<=0?w++:i=i.updateImmediateChild(A.name,Bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const A=this.index_.getCompare();l=(k,U)=>A(U,k)}else l=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const y=new Zt(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(y);if(h.hasChild(t)){const A=h.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=k&&(k.name===t||h.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const U=null==k?1:l(k,y);if(D&&!r.isEmpty()&&U>=0)return a?.trackChildChange(yE(t,r,A)),h.updateImmediateChild(t,r);{a?.trackChildChange(mE(t,A));const me=h.updateImmediateChild(t,Bt.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(a?.trackChildChange(b_(k.name,k.node)),me.updateImmediateChild(k.name,k.node)):me}}return r.isEmpty()?e:D&&l(w,y)>=0?(null!=a&&(a.trackChildChange(mE(w.name,w.node)),a.trackChildChange(b_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Bt.EMPTY_NODE)):e}}class WD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_d}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gn}copy(){const e=new WD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Sx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ax(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function qD(n,e){const t=n.copy();return t.index_=e,t}function PO(n){const e={};if(n.isDefault())return e;let t;return n.index_===Gn?t="$priority":n.index_===bx?t="$value":n.index_===ql?t="$key":((0,P.hu)(n.index_ instanceof Cx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function OO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Gn&&(e.i=n.index_.toString()),e}class $D extends gO{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=uE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=$D.getListenId_(e,r),h={};this.listens_[l]=h;const y=PO(e._queryParams);this.restRequest_(a+".json",y,(w,D)=>{let A=D;if(404===w&&(A=null,w=null),null===w&&this.onDataUpdate_(a,A,!1,r),(0,P.DV)(this.listens_,l)===h){let k;k=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(k,null)}})}unlisten(e,t){const r=$D.getListenId_(e,t);delete this.listens_[r]}get(e){const t=PO(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let y=null;if(h.status>=200&&h.status<300){try{y=(0,P.cI)(h.responseText)}catch{hs("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,y)}else 401!==h.status&&404!==h.status&&hs("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class UB{constructor(){this.rootNode_=Bt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function KD(){return{value:null,children:new Map}}function D_(n,e,t){if($t(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=qt(e);n.children.has(r)||n.children.set(r,KD()),D_(n.children.get(r),e=Pn(e),t)}}function Mx(n,e){if($t(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Gn,(r,i)=>{D_(n,new yn(r),i)}),Mx(n,e)}}if(n.children.size>0){const t=qt(e);return e=Pn(e),n.children.has(t)&&Mx(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function xx(n,e,t){null!==n.value?t(e,n.value):function BB(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{xx(i,new yn(e.toString()+"/"+r),t)})}class jB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&wi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class zB{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new jB(e);const r=1e4+2e4*Math.random();cE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;wi(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),cE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ja=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ja||(ja={})),ja))();function kx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ZD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ja.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if($t(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new yn(e));return new ZD(pn(),t,this.revert)}}return(0,P.hu)(qt(this.path)===e,"operationForChild called for unrelated child."),new ZD(Pn(this.path),this.affectedTree,this.revert)}}class vE{constructor(e,t){this.source=e,this.path=t,this.type=ja.LISTEN_COMPLETE}operationForChild(e){return $t(this.path)?new vE(this.source,pn()):new vE(this.source,Pn(this.path))}}class Og{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ja.OVERWRITE}operationForChild(e){return $t(this.path)?new Og(this.source,pn(),this.snap.getImmediateChild(e)):new Og(this.source,Pn(this.path),this.snap)}}class T_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ja.MERGE}operationForChild(e){if($t(this.path)){const t=this.children.subtree(new yn(e));return t.isEmpty()?null:t.value?new Og(this.source,pn(),t.value):new T_(this.source,pn(),t)}return(0,P.hu)(qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new T_(this.source,Pn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class rf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($t(e))return this.isFullyInitialized()&&!this.filtered_;const t=qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class WB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function wE(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,y)=>function KB(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Zt(e.childName,e.snapshotNode),i=new Zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,y)),l.forEach(h=>{const y=function $B(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(y,n.query_))})})}function YD(n,e){return{eventCache:n,serverCache:e}}function EE(n,e,t,r){return YD(new rf(e,t,r),n.serverCache)}function LO(n,e,t,r){return YD(n.eventCache,new rf(e,t,r))}function QD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Fg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Px;class zn{constructor(e,t=(()=>(Px||(Px=new go(kU)),Px))()){this.value=e,this.children=t}static fromObject(e){let t=new zn(null);return wi(e,(r,i)=>{t=t.set(new yn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:pn(),value:this.value};if($t(e))return null;{const r=qt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Pn(e),t);return null!=a?{path:lr(new yn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($t(e))return this;{const t=qt(e),r=this.children.get(t);return null!==r?r.subtree(Pn(e)):new zn(null)}}set(e,t){if($t(e))return new zn(t,this.children);{const r=qt(e),a=(this.children.get(r)||new zn(null)).set(Pn(e),t),l=this.children.insert(r,a);return new zn(this.value,l)}}remove(e){if($t(e))return this.children.isEmpty()?new zn(null):new zn(null,this.children);{const t=qt(e),r=this.children.get(t);if(r){const i=r.remove(Pn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new zn(null):new zn(this.value,a)}return this}}get(e){if($t(e))return this.value;{const t=qt(e),r=this.children.get(t);return r?r.get(Pn(e)):null}}setTree(e,t){if($t(e))return t;{const r=qt(e),a=(this.children.get(r)||new zn(null)).setTree(Pn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new zn(this.value,l)}}fold(e){return this.fold_(pn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(lr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,pn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if($t(e))return null;{const a=qt(e),l=this.children.get(a);return l?l.findOnPath_(Pn(e),lr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,pn(),t)}foreachOnPath_(e,t,r){if($t(e))return this;{this.value&&r(t,this.value);const i=qt(e),a=this.children.get(i);return a?a.foreachOnPath_(Pn(e),lr(t,i),r):new zn(null)}}foreach(e){this.foreach_(pn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(lr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Zu{constructor(e){this.writeTree_=e}static empty(){return new Zu(new zn(null))}}function IE(n,e,t){if($t(e))return new Zu(new zn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Fs(i,e);return a=a.updateChild(l,t),new Zu(n.writeTree_.set(i,a))}{const i=new zn(t),a=n.writeTree_.setTree(e,i);return new Zu(a)}}}function Ox(n,e,t){let r=n;return wi(t,(i,a)=>{r=IE(r,lr(e,i),a)}),r}function VO(n,e){if($t(e))return Zu.empty();{const t=n.writeTree_.setTree(e,new zn(null));return new Zu(t)}}function Fx(n,e){return null!=Lg(n,e)}function Lg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Fs(t.path,e)):null}function UO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Gn,(r,i)=>{e.push(new Zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Zt(r,i.value))}),e}function sf(n,e){if($t(e))return n;{const t=Lg(n,e);return new Zu(null!=t?new zn(t):n.writeTree_.subtree(e))}}function Lx(n){return n.writeTree_.isEmpty()}function S_(n,e){return BO(pn(),n.writeTree_,e)}function BO(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=BO(lr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(lr(n,".priority"),r)),t}}function JD(n,e){return WO(e,n)}function e2(n,e){if(n.snap)return Ba(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ba(lr(n.path,t),e))return!0;return!1}function n2(n){return n.visible}function jO(n,e,t){let r=Zu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Ba(t,l)?(h=Fs(t,l),r=IE(r,h,a.snap)):Ba(l,t)&&(h=Fs(l,t),r=IE(r,pn(),a.snap.getChild(h)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Ba(t,l))h=Fs(t,l),r=Ox(r,h,a.children);else if(Ba(l,t))if(h=Fs(l,t),$t(h))r=Ox(r,pn(),a.children);else{const y=(0,P.DV)(a.children,qt(h));if(y){const w=y.getChild(Pn(h));r=IE(r,pn(),w)}}}}}return r}function HO(n,e,t,r,i){if(r||i){const a=sf(n.visibleWrites,e);return!i&&Lx(a)?t:i||null!=t||Fx(a,pn())?S_(jO(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Ba(w.path,e)||Ba(e,w.path))},e),t||Bt.EMPTY_NODE):null}{const a=Lg(n.visibleWrites,e);if(null!=a)return a;{const l=sf(n.visibleWrites,e);return Lx(l)?t:null!=t||Fx(l,pn())?S_(l,t||Bt.EMPTY_NODE):null}}}function XD(n,e,t,r){return HO(n.writeTree,n.treePath,e,t,r)}function Vx(n,e){return function r2(n,e,t){let r=Bt.EMPTY_NODE;const i=Lg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Gn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=sf(n.visibleWrites,e);return t.forEachChild(Gn,(l,h)=>{const y=S_(sf(a,new yn(l)),h);r=r.updateImmediateChild(l,y)}),UO(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return UO(sf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function GO(n,e,t,r){return function i2(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=lr(e,t);if(Fx(n.visibleWrites,a))return null;{const l=sf(n.visibleWrites,a);return Lx(l)?i.getChild(t):S_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function eT(n,e){return function o2(n,e){return Lg(n.visibleWrites,e)}(n.writeTree,lr(n.treePath,e))}function Ux(n,e,t){return function s2(n,e,t,r){const i=lr(e,t),a=Lg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?S_(sf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function zO(n,e){return WO(lr(n.treePath,e),n.writeTree)}function WO(n,e){return{treePath:n,writeTree:e}}class c2{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,yE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,mE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,b_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,yE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const qO=new class d2{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Bx{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new rf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ux(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Fg(this.viewCache_),a=function l2(n,e,t,r,i,a){return function a2(n,e,t,r,i,a,l){let h;const y=sf(n.visibleWrites,e),w=Lg(y,pn());if(null!=w)h=w;else{if(null==t)return[];h=S_(y,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],A=l.getCompare(),k=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let U=k.getNext();for(;U&&D.length<i;)0!==A(U,r)&&D.push(U),U=k.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function $O(n,e,t,r,i,a){const l=e.eventCache;if(null!=eT(r,t))return e;{let h,y;if($t(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Fg(e),A=Vx(r,w instanceof Bt?w:Bt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),A,a)}else{const w=XD(r,Fg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=qt(t);if(".priority"===w){(0,P.hu)(1===nf(t),"Can't have a priority with additional path components");const D=l.getNode();y=e.serverCache.getNode();const A=GO(r,t,D,y);h=null!=A?n.filter.updatePriority(D,A):l.getNode()}else{const D=Pn(t);let A;if(l.isCompleteForChild(w)){y=e.serverCache.getNode();const k=GO(r,t,l.getNode(),y);A=null!=k?l.getNode().getImmediateChild(w).updateChild(D,k):l.getNode().getImmediateChild(w)}else A=Ux(r,w,e.serverCache);h=null!=A?n.filter.updateChild(l.getNode(),w,A,D,i,a):l.getNode()}}return EE(e,h,l.isFullyInitialized()||$t(t),n.filter.filtersNodes())}}function tT(n,e,t,r,i,a,l,h){const y=e.serverCache;let w;const D=l?n.filter:n.filter.getIndexedFilter();if($t(t))w=D.updateFullNode(y.getNode(),r,null);else if(D.filtersNodes()&&!y.isFiltered()){const U=y.getNode().updateChild(t,r);w=D.updateFullNode(y.getNode(),U,null)}else{const U=qt(t);if(!y.isCompleteForPath(t)&&nf(t)>1)return e;const Z=Pn(t),xe=y.getNode().getImmediateChild(U).updateChild(Z,r);w=".priority"===U?D.updatePriority(y.getNode(),xe):D.updateChild(y.getNode(),U,xe,Z,qO,null)}const A=LO(e,w,y.isFullyInitialized()||$t(t),D.filtersNodes());return $O(n,A,t,i,new Bx(i,A,a),h)}function jx(n,e,t,r,i,a,l){const h=e.eventCache;let y,w;const D=new Bx(i,e,a);if($t(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),y=EE(e,w,!0,n.filter.filtersNodes());else{const A=qt(t);if(".priority"===A)w=n.filter.updatePriority(e.eventCache.getNode(),r),y=EE(e,w,h.isFullyInitialized(),h.isFiltered());else{const k=Pn(t),U=h.getNode().getImmediateChild(A);let Z;if($t(k))Z=r;else{const me=D.getCompleteChild(A);Z=null!=me?".priority"===yx(k)&&me.getChild(vO(k)).isEmpty()?me:me.updateChild(k,r):Bt.EMPTY_NODE}y=U.equals(Z)?e:EE(e,n.filter.updateChild(h.getNode(),A,Z,k,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return y}function KO(n,e){return n.eventCache.isCompleteForChild(e)}function ZO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Hx(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,y=e;w=$t(t)?r:new zn(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((A,k)=>{if(D.hasChild(A)){const Z=ZO(0,e.serverCache.getNode().getImmediateChild(A),k);y=tT(n,y,new yn(A),Z,i,a,l,h)}}),w.children.inorderTraversal((A,k)=>{const U=!e.serverCache.isCompleteForChild(A)&&null===k.value;if(!D.hasChild(A)&&!U){const me=ZO(0,e.serverCache.getNode().getImmediateChild(A),k);y=tT(n,y,new yn(A),me,i,a,l,h)}}),y}class w2{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Tx(r.getIndex()),a=function PB(n){return n.loadsAllData()?new Tx(n.getIndex()):n.hasLimit()?new kB(n):new _E(n)}(r);this.processor_=function h2(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,y=i.updateFullNode(Bt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Bt.EMPTY_NODE,h.getNode(),null),D=new rf(y,l.isFullyInitialized(),i.filtersNodes()),A=new rf(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=YD(A,D),this.eventGenerator_=new WB(this.query_)}get query(){return this.query_}}function C2(n,e){const t=Fg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$t(e)&&!t.getImmediateChild(qt(e)).isEmpty())?t.getChild(e):null}function YO(n){return 0===n.eventRegistrations_.length}function QO(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function JO(n,e,t,r){e.type===ja.MERGE&&null!==e.source.queryId&&((0,P.hu)(Fg(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(QD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function p2(n,e,t,r,i){const a=new c2;let l,h;if(t.type===ja.OVERWRITE){const w=t;w.source.fromUser?l=jx(n,e,w.path,w.snap,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!$t(w.path),l=tT(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===ja.MERGE){const w=t;w.source.fromUser?l=function m2(n,e,t,r,i,a,l){let h=e;return r.foreach((y,w)=>{const D=lr(t,y);KO(e,qt(D))&&(h=jx(n,h,D,w,i,a,l))}),r.foreach((y,w)=>{const D=lr(t,y);KO(e,qt(D))||(h=jx(n,h,D,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=Hx(n,e,w.path,w.children,r,i,h,a))}else if(t.type===ja.ACK_USER_WRITE){const w=t;l=w.revert?function v2(n,e,t,r,i,a){let l;if(null!=eT(r,t))return e;{const h=new Bx(r,e,i),y=e.eventCache.getNode();let w;if($t(t)||".priority"===qt(t)){let D;if(e.serverCache.isFullyInitialized())D=XD(r,Fg(e));else{const A=e.serverCache.getNode();(0,P.hu)(A instanceof Bt,"serverChildren would be complete if leaf node"),D=Vx(r,A)}w=n.filter.updateFullNode(y,D,a)}else{const D=qt(t);let A=Ux(r,D,e.serverCache);null==A&&e.serverCache.isCompleteForChild(D)&&(A=y.getImmediateChild(D)),w=null!=A?n.filter.updateChild(y,D,A,Pn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(y,D,Bt.EMPTY_NODE,Pn(t),h,a):y,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=XD(r,Fg(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=eT(r,pn()),EE(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function y2(n,e,t,r,i,a,l){if(null!=eT(i,t))return e;const h=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if($t(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return tT(n,e,t,y.getNode().getChild(t),i,a,h,l);if($t(t)){let w=new zn(null);return y.getNode().forEachChild(ql,(D,A)=>{w=w.set(new yn(D),A)}),Hx(n,e,t,w,i,a,h,l)}return e}{let w=new zn(null);return r.foreach((D,A)=>{const k=lr(t,D);y.isCompleteForPath(k)&&(w=w.set(D,y.getNode().getChild(k)))}),Hx(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==ja.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);l=function _2(n,e,t,r,i){const a=e.serverCache;return $O(n,LO(e,a.getNode(),a.isFullyInitialized()||$t(t),a.isFiltered()),t,r,qO,i)}(n,e,t.path,r,a)}const y=a.getChanges();return function g2(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=QD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(kO(QD(e)))}}(e,l,y),{viewCache:l,changes:y}}(n.processor_,i,e,t,r);return function f2(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,XO(n,a.changes,a.viewCache.eventCache.getNode(),null)}function XO(n,e,t,r){return function qB(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function NB(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),wE(n,i,"child_removed",e,r,t),wE(n,i,"child_added",e,r,t),wE(n,i,"child_moved",a,r,t),wE(n,i,"child_changed",e,r,t),wE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let nT,iT;class e1{constructor(){this.views=new Map}}function Gx(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),JO(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(JO(l,e,t,r));return a}}function t1(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=XD(t,i?r:null),y=!1;h?y=!0:r instanceof Bt?(h=Vx(t,r),y=!1):(h=Bt.EMPTY_NODE,y=!1);const w=YD(new rf(h,y,!1),new rf(r,i,!1));return new w2(e,w)}return l}function n1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function af(n,e){let t=null;for(const r of n.views.values())t=t||C2(r,e);return t}function r1(n,e){return e._queryParams.loadsAllData()?rT(n):n.views.get(e._queryIdentifier)}function i1(n,e){return null!=r1(n,e)}function uf(n){return null!=rT(n)}function rT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let k2=1;class s1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zn(null),this.pendingWriteTree_=function u2(){return{visibleWrites:Zu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zx(n,e,t,r,i){return function YB(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=IE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?A_(n,new Og({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function lf(n,e,t=!1){const r=function JB(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function XB(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&e2(h,r.path)?i=!1:Ba(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function t2(n){n.visibleWrites=jO(n.allWrites,n2,pn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=VO(n.visibleWrites,r.path):wi(r.children,y=>{n.visibleWrites=VO(n.visibleWrites,lr(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let a=new zn(null);return null!=r.snap?a=a.set(pn(),!0):wi(r.children,l=>{a=a.set(new yn(l),!0)}),A_(n,new ZD(r.path,a,t))}return[]}function CE(n,e,t){return A_(n,new Og({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function sT(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||i1(l,e))){const y=function x2(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=uf(n);if("default"===i)for(const[y,w]of n.views.entries())l=l.concat(QO(w,t,r)),YO(w)&&(n.views.delete(y),w.query._queryParams.loadsAllData()||a.push(w.query));else{const y=n.views.get(i);y&&(l=l.concat(QO(y,t,r)),YO(y)&&(n.views.delete(i),y.query._queryParams.loadsAllData()||a.push(y.query)))}return h&&!uf(n)&&a.push(new(function S2(){return(0,P.hu)(nT,"Reference.ts has not been loaded"),nT}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function A2(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=y.removed;if(h=y.events,!i){const D=-1!==w.findIndex(k=>k._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(a,(k,U)=>uf(U));if(D&&!A){const k=n.syncPointTree_.subtree(a);if(!k.isEmpty()){const U=function B2(n){return n.fold((e,t,r)=>{if(t&&uf(t))return[rT(t)];{let i=[];return t&&(i=n1(t)),wi(r,(a,l)=>{i=i.concat(l)}),i}})}(k);for(let Z=0;Z<U.length;++Z){const me=U[Z],xe=me.query,ct=l1(n,me);n.listenProvider_.startListening(DE(xe),bE(n,xe),ct.hashFn,ct.onComplete)}}}!A&&w.length>0&&!r&&(D?n.listenProvider_.stopListening(DE(e),null):w.forEach(k=>{const U=n.queryToTagMap.get(aT(k));n.listenProvider_.stopListening(DE(k),U)}))}!function j2(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=aT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function o1(n,e,t,r){const i=qx(n,r);if(null!=i){const a=$x(i),l=a.path,h=a.queryId,y=Fs(l,e);return Kx(n,l,new Og(kx(h),y,t))}return[]}function Wx(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(k,U)=>{const Z=Fs(k,i);a=a||af(U,Z),l=l||uf(U)});let y,h=n.syncPointTree_.get(i);h?(l=l||uf(h),a=a||af(h,pn())):(h=new e1,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?y=!0:(y=!1,a=Bt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((U,Z)=>{const me=af(Z,pn());me&&(a=a.updateImmediateChild(U,me))}));const w=i1(h,e);if(!w&&!e._queryParams.loadsAllData()){const k=aT(e);(0,P.hu)(!n.queryToTagMap.has(k),"View does not exist, but we have a tag");const U=function H2(){return k2++}();n.queryToTagMap.set(k,U),n.tagToQueryMap.set(U,k)}let A=function M2(n,e,t,r,i,a){const l=t1(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function b2(n,e){n.eventRegistrations_.push(e)}(l,t),function D2(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Gn,(a,l)=>{r.push(b_(a,l))}),t.isFullyInitialized()&&r.push(kO(t.getNode())),XO(n,r,t.getNode(),e)}(l,t)}(h,e,t,JD(n.pendingWriteTree_,i),a,y);if(!w&&!l&&!r){const k=r1(h,e);A=A.concat(function G2(n,e,t){const r=e._path,i=bE(n,e),a=l1(n,t),l=n.listenProvider_.startListening(DE(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!uf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const y=h.fold((w,D,A)=>{if(!$t(w)&&D&&uf(D))return[rT(D).query];{let k=[];return D&&(k=k.concat(n1(D).map(U=>U.query))),wi(A,(U,Z)=>{k=k.concat(Z)}),k}});for(let w=0;w<y.length;++w){const D=y[w];n.listenProvider_.stopListening(DE(D),bE(n,D))}}return l}(n,e,k))}return A}function oT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=af(h,Fs(l,e));if(w)return w});return HO(i,e,a,t,!0)}function A_(n,e){return a1(e,n.syncPointTree_,null,JD(n.pendingWriteTree_,pn()))}function a1(n,e,t,r){if($t(n.path))return u1(n,e,t,r);{const i=e.get(pn());null==t&&null!=i&&(t=af(i,pn()));let a=[];const l=qt(n.path),h=n.operationForChild(l),y=e.children.get(l);if(y&&h){const w=t?t.getImmediateChild(l):null,D=zO(r,l);a=a.concat(a1(h,y,w,D))}return i&&(a=a.concat(Gx(i,n,r,t))),a}}function u1(n,e,t,r){const i=e.get(pn());null==t&&null!=i&&(t=af(i,pn()));let a=[];return e.children.inorderTraversal((l,h)=>{const y=t?t.getImmediateChild(l):null,w=zO(r,l),D=n.operationForChild(l);D&&(a=a.concat(u1(D,h,y,w)))}),i&&(a=a.concat(Gx(i,n,r,t))),a}function l1(n,e){const t=e.query,r=bE(n,t);return{hashFn:()=>(function E2(n){return n.viewCache_.serverCache.getNode()}(e)||Bt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function L2(n,e,t){const r=qx(n,t);if(r){const i=$x(r),a=i.path,l=i.queryId,h=Fs(a,e);return Kx(n,a,new vE(kx(l),h))}return[]}(n,t._path,r):function F2(n,e){return A_(n,new vE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function FU(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return sT(n,t,null,a)}}}}function bE(n,e){const t=aT(e);return n.queryToTagMap.get(t)}function aT(n){return n._path.toString()+"$"+n._queryIdentifier}function qx(n,e){return n.tagToQueryMap.get(e)}function $x(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new yn(n.substr(0,e))}}function Kx(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),Gx(r,t,JD(n.pendingWriteTree_,e),null)}function DE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function N2(){return(0,P.hu)(iT,"Reference.ts has not been loaded"),iT}())(n._repo,n._path):n}class Zx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Zx(t)}node(){return this.node_}}class Yx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=lr(this.path_,e);return new Yx(this.syncTree_,t)}node(){return oT(this.syncTree_,this.path_)}}const c1=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?W2(n[".sv"],e,t):"object"==typeof n[".sv"]?q2(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},W2=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},q2=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},d1=function(n,e,t,r){return Jx(e,new Yx(t,n),r)},Qx=function(n,e,t){return Jx(n,new Zx(e),t)};function Jx(n,e,t){const r=n.getPriority().val(),i=c1(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=c1(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new E_(h,mr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new E_(i))),l.forEachChild(Gn,(h,y)=>{const w=Jx(y,e.getImmediateChild(h),t);w!==y&&(a=a.updateImmediateChild(h,w))}),a}}class Xx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function uT(n,e){let t=e instanceof yn?e:new yn(e),r=n,i=qt(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new Xx(i,r,a),t=Pn(t),i=qt(t)}return r}function Vg(n){return n.node.value}function eR(n,e){n.node.value=e,tR(n)}function h1(n){return n.node.childCount>0}function lT(n,e){wi(n.node.children,(t,r)=>{e(new Xx(t,n,r))})}function f1(n,e,t,r){t&&!r&&e(n),lT(n,i=>{f1(i,e,!0,r)}),t&&r&&e(n)}function TE(n){return new yn(null===n.parent?n.name:TE(n.parent)+"/"+n.name)}function tR(n){null!==n.parent&&function Z2(n,e,t){const r=function $2(n){return void 0===Vg(n)&&!h1(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,tR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,tR(n))}(n.parent,n.name,n)}const Y2=/[\[\].#$\/\u0000-\u001F\u007F]/,Q2=/[\[\].#$\u0000-\u001F\u007F]/,nR=10485760,cT=function(n){return"string"==typeof n&&0!==n.length&&!Y2.test(n)},p1=function(n){return"string"==typeof n&&0!==n.length&&!Q2.test(n)},SE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!FD(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},$l=function(n,e,t,r){r&&void 0===e||AE((0,P.gK)(n,"value"),e,t)},AE=function(n,e,t){const r=t instanceof yn?new fB(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+kg(r));if("function"==typeof e)throw new Error(n+"contains a function "+kg(r)+" with contents = "+e.toString());if(FD(e))throw new Error(n+"contains "+e.toString()+" "+kg(r));if("string"==typeof e&&e.length>nR/3&&(0,P.ug)(e)>nR)throw new Error(n+"contains a string greater than "+nR+" utf8 bytes "+kg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(wi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!cT(l)))throw new Error(n+" contains an invalid key ("+l+") "+kg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function pB(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),wO(n)})(r,l),AE(n,h,r),function gB(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+kg(r)+" in addition to actual children.")}},g1=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];wi(e,(l,h)=>{const y=new yn(l);if(AE(i,h,lr(t,y)),".priority"===yx(y)&&!SE(h))throw new Error(i+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=hE(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!cT(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(hB);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ba(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},rR=function(n,e,t){if(!t||void 0!==e){if(FD(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!SE(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ME=function(n,e,t,r){if(!(r&&void 0===t||cT(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},xE=function(n,e,t,r){if(!(r&&void 0===t||p1(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ha=function(n,e){if(".info"===qt(e))throw new Error(n+" failed = Can't modify data under /.info/")},m1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!cT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),p1(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class tj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function dT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!_x(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function y1(n,e,t){dT(n,t),_1(n,r=>_x(r,e))}function qo(n,e,t){dT(n,t),_1(n,r=>Ba(r,e)||Ba(e,r))}function _1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(nj(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function nj(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Rg&&vi("event: "+t.toString()),v_(r)}}}const v1="repo_interrupt";class ij{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=KD(),this.transactionQueueTree_=new Xx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function w1(n){const t=n.infoData_.getNode(new yn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function RE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:w1(n)})}function E1(n,e,t,r,i){n.dataUpdateCount++;const a=new yn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const y=(0,P.UI)(t,w=>mr(w));l=function V2(n,e,t,r){const i=qx(n,r);if(i){const a=$x(i),l=a.path,h=a.queryId,y=Fs(l,e),w=zn.fromObject(t);return Kx(n,l,new T_(kx(h),y,w))}return[]}(n.serverSyncTree_,a,y,i)}else{const y=mr(t);l=o1(n.serverSyncTree_,a,y,i)}else if(r){const y=(0,P.UI)(t,w=>mr(w));l=function O2(n,e,t){const r=zn.fromObject(t);return A_(n,new T_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,y)}else{const y=mr(t);l=CE(n.serverSyncTree_,a,y)}let h=a;l.length>0&&(h=x_(n,a)),qo(n.eventQueue_,h,l)}function I1(n,e){iR(n,"connected",e),!1===e&&function lj(n){M_(n,"onDisconnectEvents");const e=RE(n),t=KD();xx(n.onDisconnect_,pn(),(i,a)=>{const l=d1(i,a,n.serverSyncTree_,e);D_(t,i,l)});let r=[];xx(t,pn(),(i,a)=>{r=r.concat(CE(n.serverSyncTree_,i,a));const l=uR(n,i);x_(n,l)}),n.onDisconnect_=KD(),qo(n.eventQueue_,pn(),r)}(n)}function iR(n,e,t){const r=new yn("/.info/"+e),i=mr(t);n.infoData_.updateSnapshot(r,i);const a=CE(n.infoSyncTree_,r,i);qo(n.eventQueue_,r,a)}function hT(n){return n.nextWriteId_++}function sR(n,e,t,r,i){M_(n,"set",{path:e.toString(),value:t,priority:r});const a=RE(n),l=mr(t,r),h=oT(n.serverSyncTree_,e),y=Qx(l,h,a),w=hT(n),D=zx(n.serverSyncTree_,e,y,w,!0);dT(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(k,U)=>{const Z="ok"===k;Z||hs("set at "+e+" failed: "+k);const me=lf(n.serverSyncTree_,w,!Z);qo(n.eventQueue_,e,me),cf(0,i,k,U)});const A=uR(n,e);x_(n,A),qo(n.eventQueue_,A,[])}function cj(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Mx(n.onDisconnect_,e),cf(0,t,r,i)})}function C1(n,e,t,r){const i=mr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&D_(n.onDisconnect_,e,i),cf(0,r,a,l)})}function oR(n,e,t){let r;r=".info"===qt(e._path)?sT(n.infoSyncTree_,e,t):sT(n.serverSyncTree_,e,t),y1(n.eventQueue_,e._path,r)}function b1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(v1)}function M_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),vi(t,...e)}function cf(n,e,t,r){e&&v_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function aR(n,e,t){return oT(n.serverSyncTree_,e,t)||Bt.EMPTY_NODE}function fT(n,e=n.transactionQueueTree_){if(e||pT(n,e),Vg(e)){const t=T1(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function mj(n,e,t){const r=t.map(w=>w.currentWriteId),i=aR(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,P.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const A=Fs(e,D.path);a=a.updateChild(A,D.currentOutputSnapshotRaw)}const h=a.val(!0),y=e;n.server_.put(y.toString(),h,w=>{M_(n,"transaction put response",{path:y.toString(),status:w});let D=[];if("ok"===w){const A=[];for(let k=0;k<t.length;k++)t[k].status=2,D=D.concat(lf(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&A.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();pT(n,uT(n.transactionQueueTree_,e)),fT(n,n.transactionQueueTree_),qo(n.eventQueue_,e,D);for(let k=0;k<A.length;k++)v_(A[k])}else{if("datastale"===w)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{hs("transaction at "+y.toString()+" failed: "+w);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=w}x_(n,e)}},l)}(n,TE(e),t)}else h1(e)&&lT(e,t=>{fT(n,t)})}function x_(n,e){const t=D1(n,e),r=TE(t);return function yj(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const y=e[h],w=Fs(t,y.path);let A,D=!1;if((0,P.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)D=!0,A=y.abortReason,i=i.concat(lf(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)D=!0,A="maxretry",i=i.concat(lf(n.serverSyncTree_,y.currentWriteId,!0));else{const k=aR(n,y.path,l);y.currentInputSnapshot=k;const U=e[h].update(k.val());if(void 0!==U){AE("transaction failed: Data returned ",U,y.path);let Z=mr(U);"object"==typeof U&&null!=U&&(0,P.r3)(U,".priority")||(Z=Z.updatePriority(k.getPriority()));const xe=y.currentWriteId,ct=RE(n),mt=Qx(Z,k,ct);y.currentOutputSnapshotRaw=Z,y.currentOutputSnapshotResolved=mt,y.currentWriteId=hT(n),l.splice(l.indexOf(xe),1),i=i.concat(zx(n.serverSyncTree_,y.path,mt,y.currentWriteId,y.applyLocally)),i=i.concat(lf(n.serverSyncTree_,xe,!0))}else D=!0,A="nodata",i=i.concat(lf(n.serverSyncTree_,y.currentWriteId,!0))}qo(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===A?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(A),!1,null)))}pT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)v_(r[h]);fT(n,n.transactionQueueTree_)}(n,T1(n,t),r),r}function D1(n,e){let t,r=n.transactionQueueTree_;for(t=qt(e);null!==t&&void 0===Vg(r);)r=uT(r,t),t=qt(e=Pn(e));return r}function T1(n,e){const t=[];return S1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function S1(n,e,t){const r=Vg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);lT(e,i=>{S1(n,i,t)})}function pT(n,e){const t=Vg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,eR(e,t.length>0?t:void 0)}lT(e,r=>{pT(n,r)})}function uR(n,e){const t=TE(D1(n,e)),r=uT(n.transactionQueueTree_,e);return function K2(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{lR(n,i)}),lR(n,r),f1(r,i=>{lR(n,i)}),t}function lR(n,e){const t=Vg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,P.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,P.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(lf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?eR(e,void 0):t.length=a+1,qo(n.eventQueue_,TE(e),i);for(let l=0;l<r.length;l++)v_(r[l])}}const cR=function(n,e){const t=wj(n),r=t.namespace;return"firebase.com"===t.domain&&zl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&zl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new dx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new yn(t.pathString)}},wj=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",y=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(D,A)),D<A&&(i=function _j(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,A)));const k=function vj(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):hs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,y=parseInt(e.substring(w+1),10)):w=e.length;const U=e.slice(0,w);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),a=r}"ns"in k&&(a=k.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class A1{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class M1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class dR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class x1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return cj(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ha("OnDisconnect.remove",this._path);const e=new P.BH;return C1(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ha("OnDisconnect.set",this._path),$l("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return C1(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ha("OnDisconnect.setWithPriority",this._path),$l("OnDisconnect.setWithPriority",e,this._path,!1),rR("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function dj(n,e,t,r,i){const a=mr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&D_(n.onDisconnect_,e,a),cf(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ha("OnDisconnect.update",this._path),g1("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function hj(n,e,t,r){if((0,P.xb)(t))return vi("onDisconnect().update() called with empty data.  Don't do anything."),void cf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&wi(t,(l,h)=>{const y=mr(h);D_(n.onDisconnect_,lr(e,l),y)}),cf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class mo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return $t(this._path)?null:yx(this._path)}get ref(){return new Ga(this._repo,this._path)}get _queryIdentifier(){const e=OO(this._queryParams),t=ux(e);return"{}"===t?"default":t}get _queryObject(){return OO(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof mo))return!1;const t=this._repo===e._repo,r=_x(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function dB(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function gT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function df(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===ql){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==_d)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Wl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Gn){if(null!=e&&!SE(e)||null!=t&&!SE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof Cx||n.getIndex()===bx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function mT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ga extends mo{constructor(e,t){super(e,t,new WD,!1)}get parent(){const e=vO(this._path);return null===e?null:new Ga(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ug{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new yn(e),r=Bg(this.ref,e);return new Ug(this._node.getChild(t),r,Gn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ug(i,Bg(this.ref,r),Gn)))}hasChild(e){const t=new yn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function R1(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?Bg(n._root,e):n._root}function N1(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=cR(e,n._repo.repoInfo_.nodeAdmin);m1("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&zl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),R1(n,t.path.toString())}function Bg(n,e){return null===qt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),xE("child","path",t,!1)):xE("child","path",e,!1),new Ga(n._repo,lr(n._path,e));var t}function hR(n,e){n=(0,P.m9)(n),Ha("set",n._path),$l("set",e,n._path,!1);const t=new P.BH;return sR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Dj(n,e){g1("update",e,n._path,!1);const t=new P.BH;return function uj(n,e,t,r){M_(n,"update",{path:e.toString(),value:t});let i=!0;const a=RE(n),l={};if(wi(t,(h,y)=>{i=!1,l[h]=d1(lr(e,h),mr(y),n.serverSyncTree_,a)}),i)vi("update() called with empty data.  Don't do anything."),cf(0,r,"ok",void 0);else{const h=hT(n),y=function P2(n,e,t,r){!function QB(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Ox(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=zn.fromObject(t);return A_(n,new T_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);dT(n.eventQueue_,y),n.server_.merge(e.toString(),t,(w,D)=>{const A="ok"===w;A||hs("update at "+e+" failed: "+w);const k=lf(n.serverSyncTree_,h,!A),U=k.length>0?x_(n,e):e;qo(n.eventQueue_,U,k),cf(0,r,w,D)}),wi(t,w=>{const D=uR(n,lr(e,w));x_(n,D)}),qo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Tj(n){n=(0,P.m9)(n);const e=new dR(()=>{}),t=new NE(e);return function aj(n,e,t){const r=function U2(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const A=Fs(w,t);r=r||af(D,A)});let i=n.syncPointTree_.get(t);i?r=r||af(i,pn()):(i=new e1,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new rf(r,!0,!1):null;return function I2(n){return QD(n.viewCache_)}(t1(i,e,JD(n.pendingWriteTree_,e._path),a?l.getNode():Bt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=mr(i).withIndex(e._queryParams.getIndex());let l;if(Wx(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=CE(n.serverSyncTree_,e._path,a);else{const h=bE(n.serverSyncTree_,e);l=o1(n.serverSyncTree_,e._path,a,h)}return qo(n.eventQueue_,e._path,l),sT(n.serverSyncTree_,e,t,null,!0),a},i=>(M_(n,"get for query "+(0,P.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Ug(r,new Ga(n._repo,n._path),n._queryParams.getIndex()))}class NE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new A1("value",this,new Ug(e.snapshotNode,new Ga(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new M1(this,e,t):null}matches(e){return e instanceof NE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class yT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new M1(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=Bg(new Ga(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new A1(e.type,this,new Ug(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof yT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function kE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const y=t,w=(D,A)=>{oR(n._repo,n,h),y(D,A)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new dR(t,a||void 0),h="value"===e?new NE(l):new yT(e,l);return function fj(n,e,t){let r;r=".info"===qt(e._path)?Wx(n.infoSyncTree_,e,t):Wx(n.serverSyncTree_,e,t),y1(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>oR(n._repo,n,h)}function fR(n,e,t,r){return kE(n,"value",e,t,r)}function k1(n,e,t,r){return kE(n,"child_added",e,t,r)}function P1(n,e,t,r){return kE(n,"child_changed",e,t,r)}function O1(n,e,t,r){return kE(n,"child_moved",e,t,r)}function F1(n,e,t,r){return kE(n,"child_removed",e,t,r)}function L1(n,e,t){let r=null;const i=t?new dR(t):null;"value"===e?r=new NE(i):e&&(r=new yT(e,i)),oR(n._repo,n,r)}class Yu{}class V1 extends Yu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("endAt",this._value,e._path,!0);const t=Ax(e._queryParams,this._value,this._key);if(mT(t),df(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class Aj extends Yu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("endBefore",this._value,e._path,!1);const t=function VB(n,e,t){let r,i;return n.index_===ql?("string"==typeof e&&(e=NO(e)),i=Ax(n,e,t)):(r=null==t?_d:NO(t),i=Ax(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(mT(t),df(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class U1 extends Yu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("startAt",this._value,e._path,!0);const t=Sx(e._queryParams,this._value,this._key);if(mT(t),df(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class Rj extends Yu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("startAfter",this._value,e._path,!1);const t=function LB(n,e,t){let r;if(n.index_===ql)"string"==typeof e&&(e=RO(e)),r=Sx(n,e,t);else{let i;i=null==t?Wl:RO(t),r=Sx(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(mT(t),df(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class kj extends Yu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new mo(e._repo,e._path,function OB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Oj extends Yu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new mo(e._repo,e._path,function FB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Lj extends Yu{constructor(e){super(),this._path=e}_apply(e){gT(e,"orderByChild");const t=new yn(this._path);if($t(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Cx(t),i=qD(e._queryParams,r);return df(i),new mo(e._repo,e._path,i,!0)}}class Uj extends Yu{_apply(e){gT(e,"orderByKey");const t=qD(e._queryParams,ql);return df(t),new mo(e._repo,e._path,t,!0)}}class jj extends Yu{_apply(e){gT(e,"orderByPriority");const t=qD(e._queryParams,Gn);return df(t),new mo(e._repo,e._path,t,!0)}}class Gj extends Yu{_apply(e){gT(e,"orderByValue");const t=qD(e._queryParams,bx);return df(t),new mo(e._repo,e._path,t,!0)}}class Wj extends Yu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if($l("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new V1(this._value,this._key)._apply(new U1(this._value,this._key)._apply(e))}}function Qu(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function T2(n){(0,P.hu)(!nT,"__referenceConstructor has already been defined"),nT=n})(Ga),function R2(n){(0,P.hu)(!iT,"__referenceConstructor has already been defined"),iT=n}(Ga);const pR={};function j1(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||zl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,w,l=cR(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(y=!0,a=`http://${w}?ns=${h.namespace}`,l=cR(a,i),h=l.repoInfo):y=!l.repoInfo.secure;const D=i&&y?new dE(dE.OWNER):new BU(n.name,n.options,e);m1("Invalid Firebase Database URL",l),$t(l.path)||zl("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function Yj(n,e,t,r){let i=pR[e.name];i||(i={},pR[e.name]=i);let a=i[n.toURLString()];return a&&zl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new ij(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new UU(n.name,t));return new Jj(A,n)}class Jj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function sj(n,e,t){if(n.stats_=px(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new $D(n.repoInfo_,(r,i,a,l)=>{E1(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>I1(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Pg(n.repoInfo_,e,(r,i,a,l)=>{E1(n,r,i,a,l)},r=>{I1(n,r)},r=>{!function oj(n,e){wi(e,(t,r)=>{iR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function GU(n,e){const t=n.toString();return fx[t]||(fx[t]=e()),fx[t]}(n.repoInfo_,()=>new zB(n.stats_,n.server_)),n.infoData_=new UB,n.infoSyncTree_=new s1({startListening:(r,i,a,l)=>{let h=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(h=CE(n.infoSyncTree_,r._path,y),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),iR(n,"connected",!1),n.serverSyncTree_=new s1({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,y)=>{const w=l(h,y);qo(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ga(this._repo,pn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Zj(n,e){const t=pR[e];(!t||t[n.key]!==n)&&zl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),b1(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&zl("Cannot call "+e+" on a deleted database.")}}function H1(){aO.IS_TRANSPORT_INITIALIZED&&hs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Xj(){H1(),tf.forceDisallow()}function eH(){H1(),w_.forceDisallow(),tf.forceAllow()}function iH(n,e){jP(n,e)}const oH={".sv":"timestamp"};class lH{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Pg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Pg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function sH(n){FP(jo.SDK_VERSION),(0,jo._registerComponent)(new Ru.wA("database",(e,{instanceIdentifier:t})=>j1(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,jo.registerVersion)(PP,"0.13.5",n),(0,jo.registerVersion)(PP,"0.13.5","esm2017")}();const fH=new Ts.Yd("@firebase/database-compat"),G1=function(n){fH.warn("FIREBASE WARNING: "+n)};class mH{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,G1("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class yH{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class hf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),xE("DataSnapshot.child","path",e,!1),new hf(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),xE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new hf(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new $o(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ji{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const l=ji.getCancelAndContextArgs_("Query.on",r,i),h=(w,D)=>{t.call(l.context,new hf(this.database,w),D)};h.userCallback=t,h.context=l.context;const y=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return fR(this._delegate,h,y),t;case"child_added":return k1(this._delegate,h,y),t;case"child_removed":return F1(this._delegate,h,y),t;case"child_changed":return P1(this._delegate,h,y),t;case"child_moved":return O1(this._delegate,h,y),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,L1(this._delegate,e,i)}else L1(this._delegate,e)}get(){return Tj(this._delegate).then(e=>new hf(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=ji.getCancelAndContextArgs_("Query.once",r,i),l=new P.BH,h=(w,D)=>{const A=new hf(this.database,w);t&&t.call(a.context,A,D),l.resolve(A)};h.userCallback=t,h.context=a.context;const y=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":fR(this._delegate,h,y,{onlyOnce:!0});break;case"child_added":k1(this._delegate,h,y,{onlyOnce:!0});break;case"child_removed":F1(this._delegate,h,y,{onlyOnce:!0});break;case"child_changed":P1(this._delegate,h,y,{onlyOnce:!0});break;case"child_moved":O1(this._delegate,h,y,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new ji(this.database,Qu(this._delegate,function Pj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new kj(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new ji(this.database,Qu(this._delegate,function Fj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Oj(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new ji(this.database,Qu(this._delegate,function Vj(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xE("orderByChild","path",n,!1),new Lj(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new ji(this.database,Qu(this._delegate,function Bj(){return new Uj}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new ji(this.database,Qu(this._delegate,function Hj(){return new jj}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new ji(this.database,Qu(this._delegate,function zj(){return new Gj}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new ji(this.database,Qu(this._delegate,function xj(n=null,e){return ME("startAt","key",e,!0),new U1(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new ji(this.database,Qu(this._delegate,function Nj(n,e){return ME("startAfter","key",e,!0),new Rj(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new ji(this.database,Qu(this._delegate,function Sj(n,e){return ME("endAt","key",e,!0),new V1(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new ji(this.database,Qu(this._delegate,function Mj(n,e){return ME("endBefore","key",e,!0),new Aj(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new ji(this.database,Qu(this._delegate,function qj(n,e){return ME("equalTo","key",e,!0),new Wj(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ji))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new $o(this.database,new Ga(this._delegate._repo,this._delegate._path))}}class $o extends ji{constructor(e,t){super(e,new mo(t._repo,t._path,new WD,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new $o(this.database,Bg(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new $o(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new $o(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=hR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,G1("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ha("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=Dj(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function bj(n,e,t){if(Ha("setWithPriority",n._path),$l("setWithPriority",e,n._path,!1),rR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return sR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function Ij(n){return Ha("remove",n._path),hR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function cH(n,e,t){var r;if(n=(0,P.m9)(n),Ha("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new P.BH,h=fR(n,()=>{});return function gj(n,e,t,r,i,a){M_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:VP(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=aR(n,e,void 0);l.currentInputSnapshot=h;const y=l.update(h.val());if(void 0===y)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{AE("transaction failed: Data returned ",y,l.path),l.status=0;const w=uT(n.transactionQueueTree_,e),D=Vg(w)||[];let A;D.push(l),eR(w,D),"object"==typeof y&&null!==y&&(0,P.r3)(y,".priority")?(A=(0,P.DV)(y,".priority"),(0,P.hu)(SE(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(oT(n.serverSyncTree_,e)||Bt.EMPTY_NODE).getPriority().val();const k=RE(n),U=mr(y,A),Z=Qx(U,h,k);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=Z,l.currentWriteId=hT(n);const me=zx(n.serverSyncTree_,e,Z,l.currentWriteId,l.applyLocally);qo(n.eventQueue_,e,me),fT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,w,D)=>{let A=null;y?a.reject(y):(A=new Ug(D,new Ga(n._repo,n._path),Gn),a.resolve(new lH(w,A)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new yH(a.committed,new hf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Cj(n,e){n=(0,P.m9)(n),Ha("setPriority",n._path),rR("setPriority",e,!1);const t=new P.BH;return sR(n._repo,lr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function Ej(n,e){n=(0,P.m9)(n),Ha("push",n._path),$l("push",e,n._path,!0);const t=w1(n._repo),r=RB(t),i=Bg(n,r),a=Bg(n,r);let l;return l=null!=e?hR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new $o(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new $o(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ha("Reference.onDisconnect",this._delegate._path),new mH(new x1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class PE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Xj,forceLongPolling:eH}}useEmulator(e,t,r={}){!function tH(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&zl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&zl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new dE(dE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new dE(l)}!function Kj(n,e,t,r){n.repoInfo_=new dx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof $o){const t=N1(this._delegate,e.toString());return new $o(this,t)}{const t=R1(this._delegate,e);return new $o(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=N1(this._delegate,e);return new $o(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function nH(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),b1(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function rH(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function pj(n){n.persistentConnection_&&n.persistentConnection_.resume(v1)}(n._repo)}(this._delegate)}}PE.ServerValue={TIMESTAMP:function aH(){return oH}(),increment:n=>function uH(n){return{".sv":{increment:n}}}(n)};var vH=Object.freeze({__proto__:null,initStandalone:function _H({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){FP(t);const l=new Ru.zt("auth-internal",new Ru.H0("database-standalone"));return l.setComponent(new Ru.wA("auth-internal",()=>r,"PRIVATE")),{instance:new PE(j1(n,l,void 0,e,a),n),namespace:i}}});const wH=PE.ServerValue;function z1(n){return null==n}function W1(n){return"function"==typeof n.set}function q1(n,e){return W1(e)?e:n.ref(e)}function $1(n,e){if(function IH(n){return"string"==typeof n}(n))return e.stringCase();if(W1(n))return e.firebaseCase();if(function CH(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function OE(n,e,t="on",r=Hv.z){return new Er.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Je.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,gI.B)())}function K1(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function TH(n,e){const{payload:t,prevKey:r,key:i}=e,a=K1(n,i),l=function DH(n,e){if(z1(e))return 0;{const t=K1(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(y=>{const w={payload:y,type:"value",prevKey:h,key:y.key};return h=y.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function Z1(n){return(z1(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Y1(n,e,t){return function bH(n,e,t){return OE(n,"value","once",t).pipe($n(r=>{const i=[Ze(r)];return e.forEach(a=>i.push(OE(n,a,"on",t))),(0,$f.T)(...i).pipe(Bn(TH,[]))}),ZI())}(n,e=Z1(e),t)}function Q1(n,e,t){const r=(e=Z1(e)).map(i=>OE(n,i,"on",t));return(0,$f.T)(...r)}function J1(n,e){return function(r,i){return $1(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function xH(n){return function(t){return t?$1(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function X1(n,e){return function(){return OE(n,"value","on",e)}}!function EH(n){n.INTERNAL.registerComponent(new Ru.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new PE(i,r)},"PUBLIC").setServiceProps({Reference:$o,Query:ji,Database:PE,DataSnapshot:hf,enableLogging:iH,INTERNAL:vH,ServerValue:wH}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.5")}(Om.Z);const kH=new f.OlP("angularfire2.realtimeDatabaseURL"),PH=new f.OlP("angularfire2.database.use-emulator");let OH=(()=>{class n{constructor(t,r,i,a,l,h,y,w,D,A,k,U,Z,me,xe){this.schedulers=h;const ct=y,mt=(0,gi.on)(t,l,r);w&&jv(mt,l,D,k,U,Z,A,me),this.database=(0,gi.cc)(`${mt.name}.database.${i}`,"AngularFireDatabase",mt.name,()=>{const St=l.runOutsideAngular(()=>mt.database(i||void 0));return ct&&St.useEmulator(...ct),St},[ct])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>q1(this.database,t));let a=i;return r&&(a=r(i)),function RH(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:J1(r,"update"),set:J1(r,"set"),push:i=>r.push(i),remove:xH(r),snapshotChanges:i=>Y1(n,i,t).pipe(Tn.iC),stateChanges:i=>Q1(n,i,t).pipe(Tn.iC),auditTrail:i=>function SH(n,e,t){return function MH(n,e,t){return function AH(n,e){return OE(n,"value","on",e).pipe((0,Je.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function SU(...n){const e=(0,Si.jO)(n);return(0,gt.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let y=0;y<i;y++)(0,Mi.Xf)(n[y]).subscribe((0,ln.x)(r,w=>{a[y]=w,!h&&!l[y]&&(l[y]=!0,(h=l.every(fi.y))&&(l=null))},kP.Z));t.subscribe((0,ln.x)(r,y=>{if(h){const w=[y,...a];r.next(e?e(...w):w)}}))})}(e),(0,Je.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(y=>y.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function AU(n){return(0,gt.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,ln.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Je.U)(i=>i.actions))}(n,Q1(n,e).pipe(Bn((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Tn.iC),valueChanges:(i,a)=>Y1(n,i,t).pipe((0,Je.U)(h=>h.map(y=>a&&a.idField?Object.assign(Object.assign({},y.payload.val()),{[a.idField]:y.key}):y.payload.val())),Tn.iC)}}(a,this)}object(t){return function NH(n,e){return{query:n,snapshotChanges:()=>X1(n,e.schedulers.outsideAngular)().pipe(Tn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>X1(n,e.schedulers.outsideAngular)().pipe(Tn.iC,(0,Je.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>q1(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(gi.Dh),f.LFG(gi.xv,8),f.LFG(kH,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Tn.HU),f.LFG(PH,8),f.LFG(kc,8),f.LFG(rp,8),f.LFG(Nm,8),f.LFG(ip,8),f.LFG(Bv,8),f.LFG(ba,8),f.LFG(km,8),f.LFG(np,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),FH=(()=>{class n{constructor(t){this.db=t,this.dbciclistas="/CiclistaModel",this.misciclistas=t.list(this.dbciclistas)}getAll(){return this.misciclistas}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(OH))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LH(n,e){if(1&n&&(f.TgZ(0,"tbody")(1,"tr")(2,"td"),f._uU(3),f.qZA(),f.TgZ(4,"td"),f._uU(5),f.qZA(),f.TgZ(6,"td"),f._uU(7),f.qZA(),f.TgZ(8,"td")(9,"a",16),f._uU(10,"Ubicaci\xf3n del Ciclista "),f.qZA()()()()),2&n){const t=e.$implicit;f.xp6(3),f.Oqu(t.Nombre),f.xp6(2),f.Oqu(t.Latitud),f.xp6(2),f.Oqu(t.Longitud),f.xp6(2),f.hYB("href","https://maps.google.com/?q=",t.Latitud,",",t.Longitud,"",f.LSH)}}const VH=[{path:"",component:NP},{path:"login",component:NP},{path:"dashboard",component:(()=>{class n{constructor(t,r,i){this.auth=t,this.zone=r,this.servCiclismo=i,this.ciclista_Index=-1,this.collectionName="geolocation"}ngOnInit(){this.recibirDatos(),this.ciclistaUsuario=localStorage.getItem("usuario")}logout(){this.auth.logout()}recibirDatos(){this.servCiclismo.getAll().snapshotChanges().pipe((0,Je.U)(t=>t.map(r=>({id:r.payload.key,...r.payload.val()})))).subscribe(t=>{this.ciclistas=t})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(tE),f.Y36(f.R0b),f.Y36(FH))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:29,vars:2,consts:[[1,"navbar","navbar-light","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["routerLink","home",1,"home"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPEAAADRCAMAAAAquaQNAAAAkFBMVEX///8AAADx8fH5+fn19fXo6Oj8/Pzu7u7r6+vj4+OOjo7X19fw8PCfn59XV1ff39/ExMR2dnaioqK4uLhiYmKvr6/Ly8t4eHhra2sxMTElJSVGRkbS0tLZ2dk7OzuGhoZaWlqWlpY4ODhNTU29vb2IiIgeHh6RkZEpKSlnZ2cQEBAvLy8ZGRmqqqoLCwtCQkLwktYFAAAaN0lEQVR4nOUd2YKqOhIEF1QQZHUFxL2l/f+/GxIgpLKg9mkbZ6Ye7j2tCKmk9g1F+Z+CQP3OTsGg62X8IXgqBm///4G0Mc5UAnG/6+X8AagQYr3rBb0bJioLbtdLejMEHMZq1PWa3gkz9ZvHWF38D1P2QYBvAddR1wt7G2zFGKtXreuVvQkGEoRV9d710t4EvKAmEHe9tvdALsdYXXe9uJ/DdOKnoWdlmeWF6R4YVRLBhWHR1XpfBq2/WQe268/T0yGOrAWHidkj115aMP4vsESGwdzJzm041HCof2K1XbXrEpmH0HfDp3Ctz3la/qwVY3XSLU4SMNzUsZYvIFtByc5e6zWfJ651N7q9jmsFQ3SHqPWSa9cIQujnqx9ji+CGrKp2jMtd+QzYpPd/QhdBUtxn137JrGM0awjCf8YWg6msH1zxGUbI+gdiSgJBu6guLugaWQTur+H7BHwCxuO/RPgDFLL99acIq0bH+Ab/Lp9fhG7DApvs8Qp/GTo1rKetXs6bwOwQ4TbP/X0w7Qxf/e8JGoHTGcKjn7sL/wSdpaA2naC7zDozMe0u8M26wrYAvwuEuzS2zE4Q7jCmd+oE4Q6dxLZw8vvg2B3C3ZC0eukMYUEu+09g3xnGXWCbmR1qpnc7/6F74LLHS03p0Jh+F6ZL083TOM7RQ7SZn1BfxZ3Wc83fhHDIPmhWf5N1XArB5QR/Bw78kyraXv49jgBG70E4ETzKUdXbUt12x8AlvClKK4rVaea4r3RfzxS/BWGva7Ra4N/SaBJYfnLN0jviHufuSVcO79DGu08+YWX6+whvPxphZfjrCN8/vD7+16k6+3CEFeX6yxh/QmK0HZ7XTivT3sz6PcKle/FlnyynMTwf8GEceFl4m/MgPg1eCFNv6N8Z0ss+vUhcex5jtamzbNNqaXfIPAft5XQAqDxvi4+56g6X50AigIRAoo+tdU+9tsd9AMgL+gVQ5bbb67M+vnr4pfB8qW7b4yaf7CpikEtdESB1+6gE7+PNrpdKe5BcYqMIrMfZvd2VXywvNG1Z1dRridQxt0Uxm6gTRPX+Fpq00tkLD+k8z+fmKXaS1dft+/u28x6UArNgKxn8swBY8dZhCq2Eoahl8B9AB4kq3G7J9DN1bnbpifqbYCngfjjGAxW0z66g/+fFAOsXLKvH4PfAn1uFNVbZPGnahSXW82GR83XrhaeCw6+ZZVmvBjQ1mHEuhBkj/qB+woGWLgS4VmcRTwFuTBjmZ88uv3oxFWMxogpVZAEBDusdHPRRNw5GhfJ5ebwhaXYiEubVKoH9DPyJqBh8AtDr44+6qcwrTYdsnKammdPn0H8RY5WxQpDrTAsvUE1bar9u2hMxeQnt3lc5OYaVBeiWIEjYU6aeUzb11IffSTioUpsH3p97uYBtBqtHkD1Hs4aPNFjZTV0XCPy96JpZ+iJwHQ9R33LOfPlyFPcOQwk4ukX97eFoEtpZsg+nP8c4L9VI1W7FfvuywnahCkbIpew1fdoa+/tK+bi2d0/VYgC8EgopAXICihVwZVKzWiQe0Gb8ef9HqOblP/DC2GKqVyJ8JYyBR4F2k8u+j6tPHIrC/hTjqj0Qx3k4j855GeUpqKgIWuqk0FbfeU56N8TE9kP2Jmfnvl5fHQHp7LTUGyDPYiJwMN4ME1IkhwuauJznyxgXNEP3nBacIdPqWDN4HVb5YJtgw376eieqB0xLpG/ZANIywtoYc3C/yygnCkzl7IeP4nUC2NCsGylTl/JIbpOZj2wxdIWFH5B22LwWq4JRUYPXQyWFB3GkcIRfzhAh9zG33MonrLrLLmMpxX0qbWcb+7L5ENM2yrALQnZKJVCatdqycCi6KZwfVWcAQdrQVlgXgVh55a0FYX4hIydK2jxLS2oK/3NA65GXirKAvV1h3Xlxj0FTZRD1jRlobJ0r3g1vJBGTM7+jqB+WoNyEBhnGhQ+wFjfGIy+xKd7FOh4Yb6Zyxp5L1w3Gld/A+k9SRh5Lg6GJAooF8CgTEE8ZlxvQfakE1r1c2b6MkeWzLfAtKLF2thUFBjpDtAEfMLmnxI39tGVuWBvGQKitDMGEuc7TMjVuNvPpS6nkEj+FF2lz3njrno0rIcV5E4/mdnBw9k3+N5wl8xEJ5TK+eN1mVuIhSKzsvjhyi/8d6H74hfLHA066RhbDG2pupbDtGtkSHkxT+k3oyK5koap3Oa8yy2vghbTrcXtfZVn2hLD7kLrFMsjDxWGezU2cSWRQao0T6HLcBwW6GOMnB4LMX/nJR4hqpWJkjuCeSrldQJPWg7jvkTPfuwLMgDfu48eZ5CXr07df/jldE6XI4cIC6SOEOa4UnXHlM19v988YKIehtPc5kntQwRfyaUmBMbNWtGDdn35W7V51MryubFM3F9FAGpYPEnX7WahWUKfJODaTi94VF+JGAApZVyfng8gYAGE+Lo8tjdSJw+uwYfuD6+dJWpBN+MkMCkcsc1Pmqvev/IfQpBKYgpSepP+JDR5UwDr/f54wfRbo9Di0JsSh+ItEqfKFBSG8Xc/YTCZG7x2SrB/kY8ezkkt4muf2pn3IFzCs6NT5QOxRSRJkA5ERXtUh6Os8tprt23np/vdCP7o9Fjz6HJmBLGYKDpIyNAfCtz6EkgMeiukhUqb7WDxvM/J/YYixYbZ5O7vYFmAN66nP7Qh/yeYOP/aZRLDy/yl0redP+PUW+wzWRqo5QBOesGyBPx8G5Px4dnP/6RS3R0vaHvtt5THqQkqU+bZMxdvqpbGT1o+K2XovpfSXjSPM9YGUieSROJAp4WGmxmX+auA3E5pvrfDybJpbJXAFWdGhIY1tSqQ0TFBtEV+8WuZ4eS3HuPnJaJoV4h9xWfFOYneIX1PDFLjg9Nrm9fner1ikPx0Sl5ZH+XwxtVCFDiH9Yxnxoylut2edDuPns4escokSnuVAeApMpzXelBf7hwg8Z5T+62BLhIb+FA0Ky69gods34sbBz8flPpOR+uc5PFj6PpWSEOkQRmIiG0r/l3lXi4etuy1KYBvPXTXc79385LRMVS/ndTwx5DZ5vN+IpHstLPK9tbwocqJLS2tkuz2iyWwsK59hRL5qdaIF0oLpMibzWL0JwszMPZFSHcoGA8W53+g24zh1ZaWuEkcUg4z97sRVujQ2kh0Fqfh9cOUpP8o+nLnHs/uNvK6edBISKGcOsJkjKZGST5HUhfRzmPUb/h83r9GxELkYQrbHyb5HhjEf5WQy4al0SSXQTrFfS2VXRKUyLSV0Xk0kiBqH3SexSb2StLrIGkXlG4+qi1mRwu4Qtk7ahBat21KyfxeRYJc4kQIyPJSo+oQVAhLEmZNKU9FhRg8xZiNWrFL8Rk6VQI7GzWd6s2mHmnI3i6a1rgFxLxR/VlltEvVJLY1B8vHbxs0T2czzR2UCjKnPrnKJFDHPMpZB+Wbhnqwhqgn3ju7b5w5PFBHk3THKkWsqs2pnh+JtJTIFNtFEgAa9dPh0trYtFO9kDj/2CMZWtYF2VfHLWaW89BLoTyqWFRNHpG52Hjfmw2wlShgeB60YA2HCxgqwUBSkISvV2tA1kS+LalnHeg84VmNnSg44mdg3vpuLbOL+rqqlUlVy975QvoRtNeSgnI8xw+tHsKpvWbNt0zBCPJHq9ahmowDYoBGbDmIV2a3YM+OLbKFGWpyjUuuvGxvdHiN2Oxsc70xampxoAxPuy73+iiPMxuElXxFxXYoXnZZQ7DFAuuZoAIvzWVNEk9T/OJW7GDZ+3h1LgCl/JogMJMYmXdoGuPVI1sXOUl1+U/UGJMpZ/a2X/6BzUuaB4Qr4ejrW1qq2c0aI71SLVr80QRoaKVvLEYdx+hwtMRViTB0x8MUpq4QxOLeDHsX7hCwq6TrFmfkZJU3XFlcGSutvloDIAU5qzNa14A7wXRu+Luu9y5NhU9tXwWcYGiEwoDUuHbhmVoteuGdQhkStHL7LPw1MjauG7vUdssgY/dMYaWzfKEUb64qBB/X2jTCrROTHuEex6go9iA5ZJK8J6RqU1fwFNDQjFbDemH2TxxKlnDfnsKfU6b2UclA8Nd05jKIHpbt2lVJIyO6g/5A8A35y+V0/s9k7nRVBMJfiKNosg+EKRsrXDZGNYKk3srR198jCoIQDMUhAfI1EIFjv/Qws3n25AfOa9RDGPnH0InKjOTa+maOx+f1UG4ZKm4++GdcRVrp91R/7pKUI5qf9YpFp4xWmhOmgSK5xYIbmrNffIDjh4gUatdO0KwiMHDEWxYji+lZJqcxA0EQRGRLVjlJ2lsWErZnfNIrlRNqq60PGbFc4Er2EXGRT70kFArC2NeHdHRQ9Be3aOaapmmYua2VEGGZVbVwa1UtmhAWSJayuL89pSOlLLgDHMD/1TVRHAcjeov0LXSUiJqKRUNdDf6aUA4yVgA2tsUU7n3P0FKc2L11lXstEpEoL7I2M0u4wHoT2hq3uwRtIMyofpmd+Qb3aWbFqFvWo213sGdk1jeLnKcNSNvhlCRVB2Ec6Q2wWV7rVunKTELVeHlhzwAig17fgn4AFF30V769DubW0IzVqLJ7tqNluBAjBbOaRI7KIDhs56nwADhSTNdO7UFvivQW982agTCsmCGKj/uaOoh2GxcSR4P3QStmGkDGQZoIoPSTqgm10U73Xj9GrYc5EpxZnswjJIojdNfFWWB4BlYk+gIRO+ZEO/Z7kdFN7jIa1rrazcKivWhqyFQmQkHJ+U4uTb/55FYUnwCKrTI29Us3yUaNqJfVdCs5Rk/qn80pMu7vaEAYhRqTzYcaFDnW6Kyq3e5qequ/qQ0GE6Xo8SUK5gJYykM8pF04bh+qSyIh+rJZYTErZV9tdu8aHVQKsSzVzMSecBtQHMmOBBoWZL2NBacl0X6nRalewN8ZnOQznBEM1g7bi2S9hvhwqUYqGNHeJKXWPn0tof9ivFTaOU4xiyGi0h+Oxq2Hjix7VNh1WJssKyzTtu3B0OBYMolRn+GTTgvGXOHsM6DCB3028a3F8OaJdogjzqDJMNOQ+XCImJp9Sd7uxjrPJ7rlJ9U1n5c6VFFQc5JG92I0wE0GizOXzXq6SigigwLlsXC+9OcZpDeR9dZGj2V7KpV2A5B8xXFcQgHXa04ppfSeiZYMFeY4xRhQFZY6eRrWpBtg2lFeRywpzAKOJMgr2alfwFuVYl6QYWwdRMH4Ab5fSfxbSeRTMnYV6D/1JtVcaYQrt6GmKtkSaGj0MyKxZHDa0BM5oJ21XlCaEnriqf1BTSochRAdOJKnooquk5nB19Q4N+nZ6WX5b4z163qkmrFWwCO5jyxggf5rugAgugJZgykkWuZamg6C3lUsqRUZ0FGOt6CdJEc16DEguhjFwZo9mfrxSl1G+y0qZXUX7sR5spPTAvzD9H9BkGonri+UNLNAqvatfY3GpHJVPNEMvFvQAzcxMveR9OuBhweCUqLxxVBx38dXKSXPKcEjqr7VTxKlkeEgbYQKq5a1xQJhGymBiJuriYHNnTYmgi6Gxzc5937t6OT5DmsZ2IMIlHzU6vazmtHNdxwxHaSwSP8APF1Y08InFBkA0sDo5w3eu53APHkaRDkiRFFvuOstsPhPd8AjkqrjypoTxmI6GZqdTaprjTD2Y5jzPfdfd23YQBOv1erKZPVFI0pbGBmdMmbpTe7xaOj7RJJS16C0ONX0OgniXpROaXGk2uYLjaH15HfRyo5ERb/P1ZB3Ye9fP52Z6Gsdx6ERJdn+iBqS1IkWGMYaCxJe44HTq0s9JD8ulMw8CM/FSjsto7fit0DnbpG0d0OVb5W3Vjw+Hu7B4ADAeXdnnGUXHAVm0B+aEY3hgDwDd14ox+4yvS2zu12IjoqVKpIJlS+UkMP05jPV9uHNyO7BNOlF8co5OccvBxndu6jF0gdaRY/y1t9eTmdHvj4ZTXdeACS9lzbPlmO66D/THY4zbCBvYSEDnaMHYShqJ1Fg2F3pahLY2C4K0TOIG0UTzDTD+Ns30EIdh6BQQRRfcCr/drrbPVGcdV9Ept2cY86cK2OQ9tPRVjV0/O2VWugGlEOSqgi4YohmiqvOvEJd/04LhCu4ullyTbLzp9ydP10UuogclYZ6e4v9LOyzpDSv19tANrThgzIUakV2g3gN9IbDNNnl0O0Y5bYEsgZARzRHZe3n5IBjjjf6hhdyscxGyxgbaDrQUzY6t0OVfKYg8shOyrXNlF1tXS9Jprgcp/fAdNBbYqzWziVIC9kcUuRmr1y/HzM0we20GBClaSiQYAxrZRb6wDUU7H33s0niJ4s0UzV9cZB0xtIizoGcHzdfhwaOYA5iOJQWttxN7nKwcfzIy7ALxJzHGkR58saSjBoRDxZfoZpnsygsyPfnppPxZKr4hLUgdmEeldffGuwCNa6qrI3uhhsvzDTfc7bBCGMz2qSOuaqPh1tNLL0Air4EnIiqGn4Xxwq9WVSxlW52MmwVjgYMMQjAnGDZsfCA7i2EN+gR9ua+PkQQmxtWi9eCUfW/jPfrR45LMr4qyJAOIQMyE97HcJB34VTowRLLcqBd+MAteO7E2AthAF3qLdezW36WMf5ZXVZQlSYybOmE7abhntB9nVyt9puHg6+AimSkJ+9DHwBj7o8PKLZCo1coW++VRUv2ZoNj2PIIHzYRvgbmM05y904Idg9jz4sr2SRwUUNBWzRUjpofWyJ94RQhaMOIuCSMD0UXTmm3hcHHvXG3zrPTBbEL7O8yJdkRzNMhTakx5wKywWRccK/iWHtf5wCBG7JfTLB8xG/REow7CeKdKXSgQfCNqWzOX45JiFzU+WZnIn5GxL3oVbuwfkjrGAky4FRsbvlSZCxr0JC88luqPJcJ4WKiqG6VM59C9B8Jw3BdVJW8rjCU9OoCRK2afOedazBBk7FNpuOkRITqDeN5+UibowPaNuRQ+n2Kw0Rujk+qPjRp4uDJKnS0oHpzsKNKD0VFD+CKcpMJY1vAJ5D2SIO6C5BSpHPJOqQRYohORYDeW48a5rJnazoC9OUdmAwedLikQiFfhDYfkIr9HC1rt3rAC6K9EYRVBKBNdjeS1rIUP8FoyO6hxY3PtiXGVutMK+ZVikk/nlMGupSvo16MPYR6P6aQILES8OjHnV+uKyvyLsgFmXVi7dbCYEn/K+V3oU2QVS18PwKScTcqaMoieGG4JtxXn+t1kF4HBDkwszH6M9gSHHJd6N6xp1kaDWPFu99WmKKYEv3qBK8yqYVJkRRneQOTVyyfH77jrKxg0ychkRqqsLK3QumRbMiowDAmspERoFFMHt05K9DdkYUjOV14n2hoTWAezI0IPyv6yqgcYPYsjLlLFZoG80Q7ehpKSzcQT1CjgV8zkFTLqQg5gQCXEYCnOQHDzJnl5qBElm4CCE3XJASadECgyLZuzlS+VRUYbytYeOSI6e3YMwBrFRhiFDcXedJzJx4CKQPSm1WRICvRhxULFeWzBVSlNJnXFspITtEzq4S7eBwuqlzBivIlaFtPyEomSFLN2W0M4LG+q8Wyqm5QUcVxdPBmj/+ff5Mt1NU+IyfHVLMsUz2NUYhJfGjQbjOifRKpLp2YF/VYGYaKnNVHOvHW8NpO5KTGbNPphitGLK/Ita7m+Grngl6uGqWxCrGwtTqzY2yZV3sQsAwcdsnMwc9/P56qNAmGDFR16YO/UsJPgNV/cRG8IzBABRHnTa/OwMv/nVOqt7HwyqAfGiBrYSjXyLRsMvVFCeNZUhhTMok1WjluAn6cr1Uoulyg7bpMoHqemv1+z7Qm0LB+y/bhtfVcIGAF/R2K6USRBKU9qItqX2zem1F02ZptNqKAWm9+lszFZU1WOvZi4pkW9lmFhaEwCd35yuEhYnLv7YGOMdF3TCusfPP3xVC3mZpa+oBJ6lZiv2XpdV2xQhHNkG2loxcuG4hLyjdvcoqScRiORAUpWRUvs1MDzeBw7lyTbLnmS9vIHRC1oA2xWpZiVmKmpqK6htKl2CNYKAO0wXKFGffMB5Z2WZ+oSkRYTGb7Dj+G6h6C2HfT6dsvXAuB2iXzTq62NGuNhjU5CpBPXSAOpiutnqH54aDypfnn3gOiHGfnX6GsgQFjQYjSlJUb72BhF0AhN7pjU9E2qB+u1TGt74mH7D+fS4W7LUdJcUUbPFKOpemzY3d72+EGYQi9BHwar/qCHWOzxUBqu18Qq7xmQJxPZSM5/Xj6Xy0xx1g5fjnMuqM6iah0qTHvNrMCoUWECH7hVFo8yt/94+pCgYgbTHDGudMJiCfnRskCeb0fiJxyKmg8nPuWEBJXEGjThVJ8o/JT/8a/M0BZEU6KpkpIDHRKMG82zVnPBz0QEJVg13T7q1f9uehVGVaiF7xJ8kKZ8HkT9xF4j8/ok/Es5QKLosZjgRCNpiQbUCAq7RuLcsPg7CX63+K2BWcJkD1nVhkSRo1oruaL8mCzDJUqY7iph3TSwXxpbDVkjwskSt18b/a8JE3zf89IJCYhSjzFrT8WBY6kb3hOm9hd4NFNjI1FlcevjWFxV+4svsZBNqcOFLS45h3SvGLlkcHKLSJFVE2ap2UgGYnTpvizB+qtv7WgZFXFfJmMzz8304CwlG6O+UnMCIUn3syHiTt9R9H6Qx9LBCLdffk2J/jiR1QYPRj0/mnt2PS8eVbUIa8T/DaTvDHoCHr7j6uX3m7LwlhcsvTw6i8ATY7qmz1StyOFNA9J/MKsKgfUcvf3LG7rf9560nwzQenqUt8ikeAqyd75ayXh1gFP20Dlr4IdjDOXDZH4H1q+8Ufj8KKoEQX/5/S2FYfMH09HXz3Lc8fV3TbpyjS6EkK8+egv0n+Hn7LXzreEVbg5fYJl/hn27ej6ffjz/9umBmYdfGDb7EmjBWFImuk1/PA8VwzNDUa2OXtzZC8xoRfkxt/sltR9OmHsM+lz26kcMkfsLz/gXGOhDo4Ch/puW3uwkpKBzlP8bAX009N3YWtyQC/F9Xe4sZ+yvu3/b30/hP9wdmIy6DhrlAAAAAElFTkSuQmCC","alt",""],[1,"nav"],[1,"nav-item"],[1,"bienvenido"],[1,"btn","btn-primary",3,"click"],[1,"Politrip"],[1,"titulo"],["src","https://i.gifer.com/origin/fd/fd4638442247e11430ff221fea8bede2.gif",1,"img-fluid"],[1,"table","table-dark","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-grid","gap-2","button"],["target","_blank",3,"href"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2)(3,"a",3),f._UZ(4,"img",4),f.qZA(),f.TgZ(5,"ul",5)(6,"li",6)(7,"h6",7),f._uU(8),f.qZA()(),f.TgZ(9,"li",6)(10,"button",8),f.NdJ("click",function(){return r.logout()}),f._uU(11,"Cerrar Sesi\xf3n"),f.qZA()()()()()(),f.TgZ(12,"div",9)(13,"h2",10),f._uU(14,"Informaci\xf3n de Ciclistas de Politrip "),f.qZA(),f._UZ(15,"img",11),f.TgZ(16,"table",12)(17,"thead")(18,"tr")(19,"th",13),f._uU(20,"Ciclistas"),f.qZA(),f.TgZ(21,"th",13),f._uU(22,"Latitud"),f.qZA(),f.TgZ(23,"th",13),f._uU(24,"Longitud"),f.qZA(),f.TgZ(25,"th",13),f._uU(26,"Mapa"),f.qZA()()(),f.YNc(27,LH,11,5,"tbody",14),f.qZA(),f._UZ(28,"div",15),f.qZA()),2&t&&(f.xp6(8),f.Oqu(r.ciclistaUsuario),f.xp6(19),f.Q6J("ngForOf",r.ciclistas))},dependencies:[gs,dh],styles:[".img-fluid[_ngcontent-%COMP%]{height:180px;width:50%;margin-top:30px;text-align:center;align-items:center;margin-left:25%}.titulo[_ngcontent-%COMP%]{text-align:center;align-items:center}.table[_ngcontent-%COMP%]{margin-left:50px;width:95%}.navbar-brand[_ngcontent-%COMP%]{display:contents}.navbar-brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:60px}.inicio[_ngcontent-%COMP%]{text-align:center;align-items:center}.home[_ngcontent-%COMP%]{text-decoration:none;color:#f0f8ff;margin-left:1%}.home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:150px;border:2px solid #666;width:75px;height:70px}.nav-link[_ngcontent-%COMP%]{color:#fff}.bienvenido[_ngcontent-%COMP%]{color:#fff;text-align:center;align-items:center;padding-top:10px;padding-left:5px}.btn[_ngcontent-%COMP%]{margin-left:5px}"]}),n})()},{path:"register",component:DU},{path:"recoverPassword",component:wU},{path:"sendEmail",component:TU}];let UH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[dI.forRoot(VH),dI]}),n})(),BH=(()=>{class n{constructor(){this.title="Politrip"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[rh]}),n})();const eF_firebaseConfig={apiKey:"AIzaSyBLGOVxBDyNc9m75N-8g09KPohWabUBhhk",authDomain:"politrip.firebaseapp.com",databaseURL:"https://politrip-default-rtdb.firebaseio.com",projectId:"politrip",storageBucket:"politrip.appspot.com",messagingSenderId:"39828289178",appId:"1:39828289178:web:7920be6841ead142875123",measurementId:"G-WR0FZG19SG"};let iG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),sG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[BH]}),n.\u0275inj=f.cJS({imports:[Dn,UH,gi.hO.initializeApp(eF_firebaseConfig),oS,mV,fU,MP,iG]}),n})();(0,f.G48)(),mf().bootstrapModule(sG).catch(n=>console.error(n))},5867:(at,Se,L)=>{L.d(Se,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=L(9681);(0,f.registerVersion)("firebase","9.9.3","app")},127:(at,Se,L)=>{L.d(Se,{Z:()=>f.Z});var f=L(3942);f.Z.registerVersion("firebase","9.9.3","app-compat")},1451:(at,Se,L)=>{L.r(Se);var f=L(5861),ne=L(3942),O=L(2090),ue=L(9681),se=L(655),he=L(1877),ce=L(4859);const Ie=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},tt=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new he.Yd("@firebase/auth");function st(_,...p){Ye.logLevel<=he.in.ERROR&&Ye.error(`Auth (${ue.SDK_VERSION}): ${_}`,...p)}function Me(_,...p){throw Ge(_,...p)}function Ee(_,...p){return Ge(_,...p)}function be(_,p,m){const E=Object.assign(Object.assign({},tt()),{[p]:m});return new O.LL("auth","Firebase",E).create(p,{appName:_.name})}function je(_,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Me(_,"argument-error"),be(_,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(_,...p){if("string"!=typeof _){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return ve.create(_,...p)}function j(_,p,...m){if(!_)throw Ge(p,...m)}function _e(_){const p="INTERNAL ASSERTION FAILED: "+_;throw st(p),new Error(p)}function Q(_,p){_||_e(p)}const te=new Map;function oe(_){Q(_ instanceof Function,"Expected a class definition");let p=te.get(_);return p?(Q(p instanceof _,"Instance stored in cache mismatched with class"),p):(p=new _,te.set(_,p),p)}function Fe(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function dt(){return"http:"===Wt()||"https:"===Wt()}function Wt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class an{constructor(p,m){this.shortDelay=p,this.longDelay=m,Q(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function jt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function On(_,p){Q(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Qt{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Nr=new an(3e4,6e4);function kt(_,p){return _.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:_.tenantId}):p}function un(_,p,m,E){return _o.apply(this,arguments)}function _o(){return(_o=(0,f.Z)(function*(_,p,m,E,M={}){return ai(_,M,(0,f.Z)(function*(){let N={},K={};E&&("GET"===p?K=E:N={body:JSON.stringify(E)});const le=(0,O.xO)(Object.assign({key:_.config.apiKey},K)).slice(1),Ve=yield _._getAdditionalHeaders();return Ve["Content-Type"]="application/json",_.languageCode&&(Ve["X-Firebase-Locale"]=_.languageCode),Qt.fetch()(fs(_,_.config.apiHost,m,le),Object.assign({method:p,headers:Ve,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ai(_,p,m){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,f.Z)(function*(_,p,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},Jt),p);try{const M=new ui(_),N=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const K=yield N.json();if("needConfirmation"in K)throw Ii(_,"account-exists-with-different-credential",K);if(N.ok&&!("errorMessage"in K))return K;{const le=N.ok?K.errorMessage:K.error.message,[Ve,Xe]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Ii(_,"credential-already-in-use",K);if("EMAIL_EXISTS"===Ve)throw Ii(_,"email-already-in-use",K);if("USER_DISABLED"===Ve)throw Ii(_,"user-disabled",K);const _t=E[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw be(_,_t,Xe);Me(_,_t)}}catch(M){if(M instanceof O.ZR)throw M;Me(_,"network-request-failed")}})).apply(this,arguments)}function kr(_,p,m,E){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,f.Z)(function*(_,p,m,E,M={}){const N=yield un(_,p,m,E,M);return"mfaPendingCredential"in N&&Me(_,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function fs(_,p,m,E){const M=`${p}${m}?${E}`;return _.config.emulator?On(_.config,M):`${_.config.apiScheme}://${M}`}class ui{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),Nr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ii(_,p,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const M=Ee(_,p,E);return M.customData._tokenResponse=m,M}function gn(){return(gn=(0,f.Z)(function*(_,p){return un(_,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ci(_,p){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,f.Z)(function*(_,p){return un(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Gi(_,p){return zi.apply(this,arguments)}function zi(){return(zi=(0,f.Z)(function*(_,p){return un(_,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function An(_){if(_)try{const p=new Date(Number(_));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function mn(){return(mn=(0,f.Z)(function*(_,p=!1){const m=(0,O.m9)(_),E=yield m.getIdToken(p),M=Ke(E);j(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const N="object"==typeof M.firebase?M.firebase:void 0,K=N?.sign_in_provider;return{claims:M,token:E,authTime:An(nt(M.auth_time)),issuedAtTime:An(nt(M.iat)),expirationTime:An(nt(M.exp)),signInProvider:K||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function nt(_){return 1e3*Number(_)}function Ke(_){var p;const[m,E,M]=_.split(".");if(void 0===m||void 0===E||void 0===M)return st("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,O.tV)(E);return N?JSON.parse(N):(st("Failed to decode base64 JWT payload"),null)}catch(N){return st("Caught error parsing JWT payload as JSON",null===(p=N)||void 0===p?void 0:p.toString()),null}}function cr(_,p){return vn.apply(this,arguments)}function vn(){return(vn=(0,f.Z)(function*(_,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof O.ZR&&Pt(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Pt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Wn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,f.Z)(function*(){var m;try{yield p.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&p.schedule(!0))}p.schedule()})()}}class Vs{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=An(this.lastLoginAt),this.creationTime=An(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xt(_){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,f.Z)(function*(_){var p;const m=_.auth,E=yield _.getIdToken(),M=yield cr(_,Gi(m,{idToken:E}));j(M?.users.length,m,"internal-error");const N=M.users[0];_._notifyReloadListener(N);const K=null!==(p=N.providerUserInfo)&&void 0!==p&&p.length?B(N.providerUserInfo):[],le=z(_.providerData,K),_t=!!_.isAnonymous&&!(_.email&&N.passwordHash||le?.length),lt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:le,metadata:new Vs(N.createdAt,N.lastLoginAt),isAnonymous:_t};Object.assign(_,lt)})).apply(this,arguments)}function Y(){return(Y=(0,f.Z)(function*(_){const p=(0,O.m9)(_);yield Xt(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function z(_,p){return[..._.filter(E=>!p.some(M=>M.providerId===E.providerId)),...p]}function B(_){return _.map(p=>{var{providerId:m}=p,E=(0,se._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function $(){return($=(0,f.Z)(function*(_,p){const m=yield ai(_,{},(0,f.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:N}=_.config,K=fs(_,M,"/v1/token",`key=${N}`),le=yield _._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",Qt.fetch()(K,{method:"POST",headers:le,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){j(p.idToken,"internal-error"),j(typeof p.idToken<"u","internal-error"),j(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Ko(_){const p=Ke(_);return j(p,"internal-error"),j(typeof p.exp<"u","internal-error"),j(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,f.Z)(function*(){return j(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,f.Z)(function*(){const{accessToken:M,refreshToken:N,expiresIn:K}=yield function W(_,p){return $.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(M,N,Number(K))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:M,expirationTime:N}=m,K=new Te;return E&&(j("string"==typeof E,"internal-error",{appName:p}),K.refreshToken=E),M&&(j("string"==typeof M,"internal-error",{appName:p}),K.accessToken=M),N&&(j("number"==typeof N,"internal-error",{appName:p}),K.expirationTime=N),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Te,this.toJSON())}_performRefresh(){return _e("not implemented")}}function Be(_,p){j("string"==typeof _||typeof _>"u","internal-error",{appName:p})}class ut{constructor(p){var{uid:m,auth:E,stsTokenManager:M}=p,N=(0,se._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Vs(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,f.Z)(function*(){const E=yield cr(m,m.stsTokenManager.getToken(m.auth,p));return j(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function Ls(_){return mn.apply(this,arguments)}(this,p)}reload(){return function Vt(_){return Y.apply(this,arguments)}(this)}_assign(p){this!==p&&(j(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new ut(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,f.Z)(function*(){let M=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),M=!0),m&&(yield Xt(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,f.Z)(function*(){const m=yield p.getIdToken();return yield cr(p,function pt(_,p){return gn.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,M,N,K,le,Ve,Xe,_t;const lt=null!==(E=m.displayName)&&void 0!==E?E:void 0,ir=null!==(M=m.email)&&void 0!==M?M:void 0,rs=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,Ia=null!==(K=m.photoURL)&&void 0!==K?K:void 0,wl=null!==(le=m.tenantId)&&void 0!==le?le:void 0,El=null!==(Ve=m._redirectEventId)&&void 0!==Ve?Ve:void 0,Il=null!==(Xe=m.createdAt)&&void 0!==Xe?Xe:void 0,zf=null!==(_t=m.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:Ac,emailVerified:nv,isAnonymous:rv,providerData:Mc,stsTokenManager:iv}=m;j(Ac&&iv,p,"internal-error");const Wf=Te.fromJSON(this.name,iv);j("string"==typeof Ac,p,"internal-error"),Be(lt,p.name),Be(ir,p.name),j("boolean"==typeof nv,p,"internal-error"),j("boolean"==typeof rv,p,"internal-error"),Be(rs,p.name),Be(Ia,p.name),Be(wl,p.name),Be(El,p.name),Be(Il,p.name),Be(zf,p.name);const am=new ut({uid:Ac,auth:p,email:ir,emailVerified:nv,displayName:lt,isAnonymous:rv,photoURL:Ia,phoneNumber:rs,tenantId:wl,stsTokenManager:Wf,createdAt:Il,lastLoginAt:zf});return Mc&&Array.isArray(Mc)&&(am.providerData=Mc.map($E=>Object.assign({},$E))),El&&(am._redirectEventId=El),am}static _fromIdTokenResponse(p,m,E=!1){return(0,f.Z)(function*(){const M=new Te;M.updateFromServerResponse(m);const N=new ut({uid:m.localId,auth:p,stsTokenManager:M,isAnonymous:E});return yield Xt(N),N})()}}const en=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(m,E){var M=this;return(0,f.Z)(function*(){M.storage[m]=E})()}_get(m){var E=this;return(0,f.Z)(function*(){const M=E.storage[m];return void 0===M?null:M})()}_remove(m){var E=this;return(0,f.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function Jn(_,p,m){return`firebase:${_}:${p}:${m}`}class rt{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:M,name:N}=this.auth;this.fullUserKey=Jn(this.userKey,M.apiKey,N),this.fullPersistenceKey=Jn("persistence",M.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?ut._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,f.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,f.Z)(function*(){if(!m.length)return new rt(oe(en),p,E);const M=(yield Promise.all(m.map(function(){var Xe=(0,f.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let N=M[0]||oe(en);const K=Jn(E,p.config.apiKey,p.name);let le=null;for(const Xe of m)try{const _t=yield Xe._get(K);if(_t){const lt=ut._fromJSON(p,_t);Xe!==N&&(le=lt),N=Xe;break}}catch{}const Ve=M.filter(Xe=>Xe._shouldAllowMigration);return N._shouldAllowMigration&&Ve.length?(N=Ve[0],le&&(yield N._set(K,le.toJSON())),yield Promise.all(m.map(function(){var Xe=(0,f.Z)(function*(_t){if(_t!==N)try{yield _t._remove(K)}catch{}});return function(_t){return Xe.apply(this,arguments)}}())),new rt(N,p,E)):new rt(N,p,E)})()}}function hn(_){const p=_.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if($e(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(wn(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(sn(p))return"Blackberry";if(Ln(p))return"Webos";if(dr(p))return"Safari";if((p.includes("chrome/")||yr(p))&&!p.includes("edge/"))return"Chrome";if(vt(p))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function wn(_=(0,O.z$)()){return/firefox\//i.test(_)}function dr(_=(0,O.z$)()){const p=_.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function yr(_=(0,O.z$)()){return/crios\//i.test(_)}function $e(_=(0,O.z$)()){return/iemobile/i.test(_)}function vt(_=(0,O.z$)()){return/android/i.test(_)}function sn(_=(0,O.z$)()){return/blackberry/i.test(_)}function Ln(_=(0,O.z$)()){return/webos/i.test(_)}function li(_=(0,O.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function za(_=(0,O.z$)()){return li(_)||vt(_)||Ln(_)||sn(_)||/windows phone/i.test(_)||$e(_)}function At(_,p=[]){let m;switch(_){case"Browser":m=hn((0,O.z$)());break;case"Worker":m=`${hn((0,O.z$)())}-${_}`;break;default:m=_}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${ue.SDK_VERSION}/${E}`}class Wa{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=N=>new Promise((K,le)=>{try{K(p(N))}catch(Ve){le(Ve)}});E.onAbort=m,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,f.Z)(function*(){var E;if(m.auth.currentUser===p)return;const M=[];try{for(const N of m.queue)yield N(p),N.onAbort&&M.push(N.onAbort)}catch(N){M.reverse();for(const K of M)try{K()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=N)||void 0===E?void 0:E.message})}})()}}class Zo{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bs(this),this.idTokenSubscription=new Bs(this),this.beforeStateQueue=new Wa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=oe(m)),this._initializationPromise=this.queue((0,f.Z)(function*(){var M,N;if(!E._deleted&&(E.persistenceManager=yield rt.create(E,p),!E._deleted)){if(null!==(M=E._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,f.Z)(function*(){var E;const M=yield m.assertedPersistence.getCurrentUser();let N=M,K=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const le=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Ve=N?._redirectEventId,Xe=yield m.tryRedirectSignIn(p);(!le||le===Ve)&&Xe?.user&&(N=Xe.user,K=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(K)try{yield m.beforeStateQueue.runMiddleware(N)}catch(le){N=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(le))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return j(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var m=this;return(0,f.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,f.Z)(function*(){var E;try{yield Xt(p)}catch(M){if("auth/network-request-failed"!==(null===(E=M)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,f.Z)(function*(){const E=p?(0,O.m9)(p):null;return E&&j(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,f.Z)(function*(){if(!E._deleted)return p&&j(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,f.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,f.Z)(function*(){yield m.assertedPersistence.setPersistence(oe(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new O.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,f.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(m);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,f.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&oe(p)||m._popupRedirectResolver;j(E,m,"argument-error"),m.redirectPersistenceManager=yield rt.create(m,[oe(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,f.Z)(function*(){var E,M;return m._isInitialized&&(yield m.queue((0,f.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,f.Z)(function*(){if(p===m.currentUser)return m.queue((0,f.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,M){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),K=this._isInitialized?Promise.resolve():this._initializationPromise;return j(K,this,"internal-error"),K.then(()=>N(this.currentUser)),"function"==typeof m?p.addObserver(m,E,M):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,f.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=At(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return M&&(E["X-Firebase-Client"]=M),E})()}}function bn(_){return(0,O.m9)(_)}class Bs{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function js(_){const p=_.indexOf(":");return p<0?"":_.substr(0,p+1)}function Pr(_){if(!_)return null;const p=Number(_);return isNaN(p)?null:p}class vo{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return _e("not implemented")}_getIdTokenResponse(p){return _e("not implemented")}_linkToIdToken(p,m){return _e("not implemented")}_getReauthenticationResolver(p){return _e("not implemented")}}function Ot(_,p){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,f.Z)(function*(_,p){return un(_,"POST","/v1/accounts:resetPassword",kt(_,p))})).apply(this,arguments)}function wd(_,p){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(_,p){return un(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function qa(_,p){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(_,p){return un(_,"POST","/v1/accounts:update",kt(_,p))})).apply(this,arguments)}function gs(){return(gs=(0,f.Z)(function*(_,p){return kr(_,"POST","/v1/accounts:signInWithPassword",kt(_,p))})).apply(this,arguments)}function Vn(_,p){return $a.apply(this,arguments)}function $a(){return($a=(0,f.Z)(function*(_,p){return un(_,"POST","/v1/accounts:sendOobCode",kt(_,p))})).apply(this,arguments)}function fr(_,p){return qr.apply(this,arguments)}function qr(){return(qr=(0,f.Z)(function*(_,p){return Vn(_,p)})).apply(this,arguments)}function Jo(_,p){return wo.apply(this,arguments)}function wo(){return(wo=(0,f.Z)(function*(_,p){return Vn(_,p)})).apply(this,arguments)}function Ka(_,p){return ci.apply(this,arguments)}function ci(){return(ci=(0,f.Z)(function*(_,p){return Vn(_,p)})).apply(this,arguments)}function jg(_,p){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,f.Z)(function*(_,p){return Vn(_,p)})).apply(this,arguments)}function Zl(){return(Zl=(0,f.Z)(function*(_,p){return kr(_,"POST","/v1/accounts:signInWithEmailLink",kt(_,p))})).apply(this,arguments)}function Ed(){return(Ed=(0,f.Z)(function*(_,p){return kr(_,"POST","/v1/accounts:signInWithEmailLink",kt(_,p))})).apply(this,arguments)}class Yl extends vo{constructor(p,m,E,M=null){super("password",E),this._email=p,this._password=m,this._tenantId=M}static _fromEmailAndPassword(p,m){return new Yl(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new Yl(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,f.Z)(function*(){switch(m.signInMethod){case"password":return function Qo(_,p){return gs.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function ff(_,p){return Zl.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Me(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return wd(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Hg(_,p){return Ed.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:Me(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Xn(_,p){return Id.apply(this,arguments)}function Id(){return(Id=(0,f.Z)(function*(_,p){return kr(_,"POST","/v1/accounts:signInWithIdp",kt(_,p))})).apply(this,arguments)}class ms extends vo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new ms(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Me("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:M}=m,N=(0,se._T)(m,["providerId","signInMethod"]);if(!E||!M)return null;const K=new ms(E,M);return K.idToken=N.idToken||void 0,K.accessToken=N.accessToken||void 0,K.secret=N.secret,K.nonce=N.nonce,K.pendingToken=N.pendingToken||null,K}_getIdTokenResponse(p){return Xn(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Xn(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Xn(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,O.xO)(m)}return p}}function zg(_,p){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,f.Z)(function*(_,p){return un(_,"POST","/v1/accounts:sendVerificationCode",kt(_,p))})).apply(this,arguments)}function zs(){return(zs=(0,f.Z)(function*(_,p){return kr(_,"POST","/v1/accounts:signInWithPhoneNumber",kt(_,p))})).apply(this,arguments)}function bd(){return(bd=(0,f.Z)(function*(_,p){const m=yield kr(_,"POST","/v1/accounts:signInWithPhoneNumber",kt(_,p));if(m.temporaryProof)throw Ii(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const qg={USER_NOT_FOUND:"user-not-found"};function Za(){return(Za=(0,f.Z)(function*(_,p){return kr(_,"POST","/v1/accounts:signInWithPhoneNumber",kt(_,Object.assign(Object.assign({},p),{operation:"REAUTH"})),qg)})).apply(this,arguments)}class Xo extends vo{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Xo({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Xo({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Ql(_,p){return zs.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Wg(_,p){return bd.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Dd(_,p){return Za.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:M}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:N}=p;return E||m||M||N?new Xo({verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:N}):null}}class Di{constructor(p){var m,E,M,N,K,le;const Ve=(0,O.zd)((0,O.pd)(p)),Xe=null!==(m=Ve.apiKey)&&void 0!==m?m:null,_t=null!==(E=Ve.oobCode)&&void 0!==E?E:null,lt=function R_(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ve.mode)&&void 0!==M?M:null);j(Xe&&_t&&lt,"argument-error"),this.apiKey=Xe,this.operation=lt,this.code=_t,this.continueUrl=null!==(N=Ve.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(K=Ve.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(le=Ve.tenantId)&&void 0!==le?le:null}static parseLink(p){const m=function Td(_){const p=(0,O.zd)((0,O.pd)(_)).link,m=p?(0,O.zd)((0,O.pd)(p)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(_)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||m||p||_}(p);try{return new Di(m)}catch{return null}}}let ea=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return Yl._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const M=Di.parseLink(E);return j(M,"argument-error"),Yl._fromEmailAndCode(m,M.code,M.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class qi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Eo extends qi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ta extends Eo{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return j("providerId"in m&&"signInMethod"in m,"argument-error"),ms._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return j(p.idToken||p.accessToken,"argument-error"),ms._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ta.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ta.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:N,nonce:K,providerId:le}=p;if(!E&&!M&&!m&&!N||!le)return null;try{return new ta(le)._credential({idToken:m,accessToken:E,nonce:K,pendingToken:N})}catch{return null}}}let na=(()=>{class _ extends Eo{constructor(){super("facebook.com")}static credential(m){return ms._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Ya=(()=>{class _ extends Eo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return ms._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:M}=m;if(!E&&!M)return null;try{return _.credential(E,M)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Ad=(()=>{class _ extends Eo{constructor(){super("github.com")}static credential(m){return ms._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Qa extends vo{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Xn(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Xn(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Xn(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:M,pendingToken:N}=m;return E&&M&&N&&E===M?new Qa(E,N):null}static _create(p,m){return new Qa(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Or extends qi{constructor(p){j(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Or.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Or.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Qa.fromJSON(p);return j(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return Qa._create(E,m)}catch{return null}}}let xd=(()=>{class _ extends Eo{constructor(){super("twitter.com")}static credential(m,E){return ms._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=m;if(!E||!M)return null;try{return _.credential(E,M)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function ra(_,p){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,f.Z)(function*(_,p){return kr(_,"POST","/v1/accounts:signUp",kt(_,p))})).apply(this,arguments)}class $r{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,M=!1){return(0,f.Z)(function*(){const N=yield ut._fromIdTokenResponse(p,E,M),K=Un(E);return new $r({user:N,providerId:K,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const M=Un(E);return new $r({user:p,providerId:M,_tokenResponse:E,operationType:m})})()}}function Un(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function pf(){return(pf=(0,f.Z)(function*(_){var p;const m=bn(_);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new $r({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield ra(m,{returnSecureToken:!0}),M=yield $r._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class Io extends O.ZR{constructor(p,m,E,M){var N;super(m.code,m.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,Io.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,M){return new Io(p,m,E,M)}}function Kr(_,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Io._fromErrorAndOperation(_,N,p,E):N})}function ys(_){return new Set(_.map(({providerId:p})=>p).filter(p=>!!p))}function _s(){return(_s=(0,f.Z)(function*(_,p){const m=(0,O.m9)(_);yield Ti(!0,m,p);const{providerUserInfo:E}=yield Ci(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),M=ys(E||[]);return m.providerData=m.providerData.filter(N=>M.has(N.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function vr(_,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,f.Z)(function*(_,p,m=!1){const E=yield cr(_,p._linkToIdToken(_.auth,yield _.getIdToken()),m);return $r._forOperation(_,"link",E)})).apply(this,arguments)}function Ti(_,p,m){return vs.apply(this,arguments)}function vs(){return(vs=(0,f.Z)(function*(_,p,m){yield Xt(p);const M=!1===_?"provider-already-linked":"no-such-provider";j(ys(p.providerData).has(m)===_,p.auth,M)})).apply(this,arguments)}function ws(_,p){return Es.apply(this,arguments)}function Es(){return(Es=(0,f.Z)(function*(_,p,m=!1){var E;const{auth:M}=_,N="reauthenticate";try{const K=yield cr(_,Kr(M,N,p,_),m);j(K.idToken,M,"internal-error");const le=Ke(K.idToken);j(le,M,"internal-error");const{sub:Ve}=le;return j(_.uid===Ve,M,"user-mismatch"),$r._forOperation(_,N,K)}catch(K){throw"auth/user-not-found"===(null===(E=K)||void 0===E?void 0:E.code)&&Me(M,"user-mismatch"),K}})).apply(this,arguments)}function sa(_,p){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*(_,p,m=!1){const E="signIn",M=yield Kr(_,E,p),N=yield $r._fromIdTokenResponse(_,E,M);return m||(yield _._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Mn(_,p){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,f.Z)(function*(_,p){return sa(bn(_),p)})).apply(this,arguments)}function el(_,p){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,f.Z)(function*(_,p){const m=(0,O.m9)(_);return yield Ti(!1,m,p.providerId),vr(m,p)})).apply(this,arguments)}function Co(_,p){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,f.Z)(function*(_,p){return ws((0,O.m9)(_),p)})).apply(this,arguments)}function tl(_,p){return oa.apply(this,arguments)}function oa(){return(oa=(0,f.Z)(function*(_,p){return kr(_,"POST","/v1/accounts:signInWithCustomToken",kt(_,p))})).apply(this,arguments)}function Ft(){return(Ft=(0,f.Z)(function*(_,p){const m=bn(_),E=yield tl(m,{token:p,returnSecureToken:!0}),M=yield $r._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class bo{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Xa._fromServerResponse(p,m):Me(p,"internal-error")}}class Xa extends bo{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Xa(m)}}function En(_,p,m){var E;j((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),j(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(j(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(j(m.android.packageName.length>0,_,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function qs(){return(qs=(0,f.Z)(function*(_,p,m){const E=(0,O.m9)(_),M={requestType:"PASSWORD_RESET",email:p};m&&En(E,M,m),yield Jo(E,M)})).apply(this,arguments)}function tu(){return(tu=(0,f.Z)(function*(_,p,m){yield Ot((0,O.m9)(_),{oobCode:p,newPassword:m})})).apply(this,arguments)}function aa(){return(aa=(0,f.Z)(function*(_,p){yield qa((0,O.m9)(_),{oobCode:p})})).apply(this,arguments)}function ru(_,p){return gf.apply(this,arguments)}function gf(){return(gf=(0,f.Z)(function*(_,p){const m=(0,O.m9)(_),E=yield Ot(m,{oobCode:p}),M=E.requestType;switch(j(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(E.mfaInfo,m,"internal-error");default:j(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=bo._fromServerResponse(bn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:M}})).apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(_,p){const{data:m}=yield ru((0,O.m9)(_),p);return m.email})).apply(this,arguments)}function iu(){return(iu=(0,f.Z)(function*(_,p,m){const E=bn(_),M=yield ra(E,{returnSecureToken:!0,email:p,password:m}),N=yield $r._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function ec(){return(ec=(0,f.Z)(function*(_,p,m){const E=(0,O.m9)(_),M={requestType:"EMAIL_SIGNIN",email:p};j(m.handleCodeInApp,E,"argument-error"),m&&En(E,M,m),yield Ka(E,M)})).apply(this,arguments)}function su(){return(su=(0,f.Z)(function*(_,p,m){const E=(0,O.m9)(_),M=ea.credentialWithLink(p,m||Fe());return j(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Mn(E,M)})).apply(this,arguments)}function nc(_,p){return To.apply(this,arguments)}function To(){return(To=(0,f.Z)(function*(_,p){return un(_,"POST","/v1/accounts:createAuthUri",kt(_,p))})).apply(this,arguments)}function ou(){return(ou=(0,f.Z)(function*(_,p){const E={identifier:p,continueUri:dt()?Fe():"http://localhost"},{signinMethods:M}=yield nc((0,O.m9)(_),E);return M||[]})).apply(this,arguments)}function ua(){return(ua=(0,f.Z)(function*(_,p){const m=(0,O.m9)(_),M={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};p&&En(m.auth,M,p);const{email:N}=yield fr(m.auth,M);N!==_.email&&(yield _.reload())})).apply(this,arguments)}function il(){return(il=(0,f.Z)(function*(_,p,m){const E=(0,O.m9)(_),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:p};m&&En(E.auth,N,m);const{email:K}=yield jg(E.auth,N);K!==_.email&&(yield _.reload())})).apply(this,arguments)}function sl(_,p){return ol.apply(this,arguments)}function ol(){return(ol=(0,f.Z)(function*(_,p){return un(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function la(){return(la=(0,f.Z)(function*(_,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,O.m9)(_),N={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},K=yield cr(E,sl(E.auth,N));E.displayName=K.displayName||null,E.photoURL=K.photoUrl||null;const le=E.providerData.find(({providerId:Ve})=>"password"===Ve);le&&(le.displayName=E.displayName,le.photoURL=E.photoURL),yield E._updateTokensIfNecessary(K)})).apply(this,arguments)}function tr(_,p,m){return hi.apply(this,arguments)}function hi(){return(hi=(0,f.Z)(function*(_,p,m){const{auth:E}=_,N={idToken:yield _.getIdToken(),returnSecureToken:!0};p&&(N.email=p),m&&(N.password=m);const K=yield cr(_,wd(E,N));yield _._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class au{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class Pd extends au{constructor(p,m,E,M){super(p,m,E),this.username=M}}class yf extends au{constructor(p,m){super(p,"facebook.com",m)}}class ic extends Pd{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Od extends au{constructor(p,m){super(p,"google.com",m)}}class sc extends Pd{constructor(p,m,E){super(p,"twitter.com",m,E)}}function ll(_){const{user:p,_tokenResponse:m}=_;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Dn(_){var p,m;if(!_)return null;const{providerId:E}=_,M=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},N=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&_?.idToken){const K=null===(m=null===(p=Ke(_.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(K)return new au(N,"anonymous"!==K&&"custom"!==K?K:null)}if(!E)return null;switch(E){case"facebook.com":return new yf(N,M);case"github.com":return new ic(N,M);case"google.com":return new Od(N,M);case"twitter.com":return new sc(N,M,_.screenName||null);case"custom":case"anonymous":return new au(N,null);default:return new au(N,E,M)}}(m)}class Zi{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new Zi("enroll",p)}static _fromMfaPendingCredential(p){return new Zi("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Zi._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return Zi._fromIdtoken(p.multiFactorSession.idToken)}return null}}class lu{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=bn(p),M=m.customData._serverResponse,N=(M.mfaInfo||[]).map(le=>bo._fromServerResponse(E,le));j(M.mfaPendingCredential,E,"internal-error");const K=Zi._fromMfaPendingCredential(M.mfaPendingCredential);return new lu(K,N,function(){var le=(0,f.Z)(function*(Ve){const Xe=yield Ve._process(E,K);delete M.mfaInfo,delete M.mfaPendingCredential;const _t=Object.assign(Object.assign({},M),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(m.operationType){case"signIn":const lt=yield $r._fromIdTokenResponse(E,m.operationType,_t);return yield E._updateCurrentUser(lt.user),lt;case"reauthenticate":return j(m.user,E,"internal-error"),$r._forOperation(m.user,m.operationType,_t);default:Me(E,"internal-error")}});return function(Ve){return le.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,f.Z)(function*(){return m.signInResolver(p)})()}}function Ef(_,p){return un(_,"POST","/v2/accounts/mfaEnrollment:start",kt(_,p))}class cu{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>bo._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new cu(p)}getSession(){var p=this;return(0,f.Z)(function*(){return Zi._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var E=this;return(0,f.Z)(function*(){const M=p,N=yield E.getSession(),K=yield cr(E.user,M._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(K),E.user.reload()})()}unenroll(p){var m=this;return(0,f.Z)(function*(){var E;const M="string"==typeof p?p:p.uid,N=yield m.user.getIdToken(),K=yield cr(m.user,function P_(_,p){return un(_,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(_,p))}(m.user.auth,{idToken:N,mfaEnrollmentId:M}));m.enrolledFactors=m.enrolledFactors.filter(({uid:le})=>le!==M),yield m.user._updateTokensIfNecessary(K);try{yield m.user.reload()}catch(le){if("auth/user-token-expired"!==(null===(E=le)||void 0===E?void 0:E.code))throw le}})()}}const du=new WeakMap,Ks="__sak";class Vd{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Ks,"1"),this.storage.removeItem(Ks),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const fu=(()=>{class _ extends Vd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function If(){const _=(0,O.z$)();return dr(_)||li(_)}()&&function Us(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=za(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),N=this.localCache[E];M!==N&&m(E,N,M)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((le,Ve,Xe)=>{this.notifyListeners(le,Xe)});const M=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(M);if(m.newValue!==le)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!E)return}const N=()=>{const le=this.storage.getItem(M);!E&&this.localCache[M]===le||this.notifyListeners(M,le)},K=this.storage.getItem(M);!function Cn(){return(0,O.w1)()&&10===document.documentMode}()||K===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const N of Array.from(M))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var M=()=>super._set,N=this;return(0,f.Z)(function*(){yield M().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,M=this;return(0,f.Z)(function*(){const N=yield E().call(M,m);return M.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,M=this;return(0,f.Z)(function*(){yield E().call(M,m),delete M.localCache[m]})()}}return _.type="LOCAL",_})(),Ao=(()=>{class _ extends Vd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let fn=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const M=new _(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,f.Z)(function*(){const M=m,{eventId:N,eventType:K,data:le}=M.data,Ve=E.handlersMap[K];if(!Ve?.size)return;M.ports[0].postMessage({status:"ack",eventId:N,eventType:K});const Xe=Array.from(Ve).map(function(){var lt=(0,f.Z)(function*(ir){return ir(M.origin,le)});return function(ir){return lt.apply(this,arguments)}}()),_t=yield function Bd(_){return Promise.all(_.map(function(){var p=(0,f.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(Xe);M.ports[0].postMessage({status:"done",eventId:N,eventType:K,response:_t})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Si(_="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return _+m}class Ze{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var M=this;return(0,f.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let K,le;return new Promise((Ve,Xe)=>{const _t=Si("",20);N.port1.start();const lt=setTimeout(()=>{Xe(new Error("unsupported_event"))},E);le={messageChannel:N,onMessage(ir){const rs=ir;if(rs.data.eventId===_t)switch(rs.data.status){case"ack":clearTimeout(lt),K=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Ve(rs.data.response);break;default:clearTimeout(lt),clearTimeout(K),Xe(new Error("invalid_response"))}}},M.handlers.add(le),N.port1.addEventListener("message",le.onMessage),M.target.postMessage({eventType:p,eventId:_t,data:m},[N.port2])}).finally(()=>{le&&M.removeMessageHandler(le)})})()}}function Ht(){return window}function da(){return typeof Ht().WorkerGlobalScope<"u"&&"function"==typeof Ht().importScripts}function Er(){return(Er=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const pu="firebaseLocalStorageDb",Ys="firebaseLocalStorage",oc="fbase_key";class fi{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Je(_,p){return _.transaction([Ys],p?"readwrite":"readonly").objectStore(Ys)}function ac(){const _=indexedDB.open(pu,1);return new Promise((p,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(Ys,{keyPath:oc})}catch(M){m(M)}}),_.addEventListener("success",(0,f.Z)(function*(){const E=_.result;E.objectStoreNames.contains(Ys)?p(E):(E.close(),yield function Mo(){const _=indexedDB.deleteDatabase(pu);return new fi(_).toPromise()}(),p(yield ac()))}))})}function ha(_,p,m){return gu.apply(this,arguments)}function gu(){return(gu=(0,f.Z)(function*(_,p,m){const E=Je(_,!0).put({[oc]:p,value:m});return new fi(E).toPromise()})).apply(this,arguments)}function mu(){return(mu=(0,f.Z)(function*(_,p){const m=Je(_,!1).get(p),E=yield new fi(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ai(_,p){const m=Je(_,!0).delete(p);return new fi(m).toPromise()}const Qs=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,f.Z)(function*(){return m.db||(m.db=yield ac()),m.db})()}_withRetries(m){var E=this;return(0,f.Z)(function*(){let M=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(M++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,f.Z)(function*(){return da()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,f.Z)(function*(){m.receiver=fn._getInstance(function Cf(){return da()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,f.Z)(function*(M,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(M,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,f.Z)(function*(M,N){return["keyChanged"]});return function(M,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,f.Z)(function*(){var E,M;if(m.activeServiceWorker=yield function Zs(){return Er.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ze(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(M=N[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,f.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function cl(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const m=yield ac();return yield ha(m,Ks,"1"),yield Ai(m,Ks),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,f.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var M=this;return(0,f.Z)(function*(){return M._withPendingWrite((0,f.Z)(function*(){return yield M._withRetries(N=>ha(N,m,E)),M.localCache[m]=E,M.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,f.Z)(function*(){const M=yield E._withRetries(N=>function ln(_,p){return mu.apply(this,arguments)}(N,m));return E.localCache[m]=M,M})()}_remove(m){var E=this;return(0,f.Z)(function*(){return E._withPendingWrite((0,f.Z)(function*(){return yield E._withRetries(M=>Ai(M,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,f.Z)(function*(){const E=yield m._withRetries(K=>{const le=Je(K,!1).getAll();return new fi(le).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const M=[],N=new Set;for(const{fbase_key:K,value:le}of E)N.add(K),JSON.stringify(m.localCache[K])!==JSON.stringify(le)&&(m.notifyListeners(K,le),M.push(K));for(const K of Object.keys(m.localCache))m.localCache[K]&&!N.has(K)&&(m.notifyListeners(K,null),M.push(K));return M})()}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const N of Array.from(M))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Yi(_,p){return un(_,"POST","/v2/accounts/mfaSignIn:start",kt(_,p))}function yu(){return(yu=(0,f.Z)(function*(_){return(yield un(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fr(_){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=p,E.onerror=M=>{const N=Ee("internal-error");N.customData=M,m(N)},E.type="text/javascript",E.charset="UTF-8",function fa(){var _,p;return null!==(p=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==p?p:document}().appendChild(E)})}function Js(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Ro=1e12;class Kg{constructor(p){this.auth=p,this.counter=Ro,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new $n(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||Ro;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Ro))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,f.Z)(function*(){var E;return null===(E=m._widgets.get(p||Ro))||void 0===E||E.execute(),""})()}}class $n{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;j(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function xi(_){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hl=Js("rcb"),Qi=new an(3e4,6e4);class Ji{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Ht().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return j(function Zg(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Ht().grecaptcha):new Promise((E,M)=>{const N=Ht().setTimeout(()=>{M(Ee(p,"network-request-failed"))},Qi.get());Ht()[hl]=()=>{Ht().clearTimeout(N),delete Ht()[hl];const le=Ht().grecaptcha;if(!le)return void M(Ee(p,"internal-error"));const Ve=le.render;le.render=(Xe,_t)=>{const lt=Ve(Xe,_t);return this.counter++,lt},this.hostLanguage=m,E(le)},Fr(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:hl,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),M(Ee(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Ht().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class O_{load(p){return(0,f.Z)(function*(){return new Kg(p)})()}clearedOneInstance(){}}const cn="recaptcha",Xs={theme:"light",type:"image"};class Kn{constructor(p,m=Object.assign({},Xs),E){this.parameters=m,this.type=cn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bn(E),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;j(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new O_:new Ji,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const K=le=>{!le||(p.tokenChangeListeners.delete(K),N(le))};p.tokenChangeListeners.add(K),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Ht()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){j(dt()&&!da(),p.auth,"internal-error"),yield function No(){let _=null;return new Promise(p=>{"complete"!==document.readyState?(_=()=>p(),window.addEventListener("load",_)):p()}).catch(p=>{throw _&&window.removeEventListener("load",_),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function Sr(_){return yu.apply(this,arguments)}(p.auth);j(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gd{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Xo._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Vr(){return(Vr=(0,f.Z)(function*(_,p,m){const E=bn(_),M=yield Mt(E,p,(0,O.m9)(m));return new Gd(M,N=>Mn(E,N))})).apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(_,p,m){const E=(0,O.m9)(_);yield Ti(!1,E,"phone");const M=yield Mt(E.auth,p,(0,O.m9)(m));return new Gd(M,N=>el(E,N))})).apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(_,p,m){const E=(0,O.m9)(_),M=yield Mt(E.auth,p,(0,O.m9)(m));return new Gd(M,N=>Co(E,N))})).apply(this,arguments)}function Mt(_,p,m){return cc.apply(this,arguments)}function cc(){return(cc=(0,f.Z)(function*(_,p,m){var E;const M=yield m.verify();try{let N;if(j("string"==typeof M,_,"argument-error"),j(m.type===cn,_,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const K=N.session;if("phoneNumber"in N)return j("enroll"===K.type,_,"internal-error"),(yield Ef(_,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{j("signin"===K.type,_,"internal-error");const le=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return j(le,_,"missing-multi-factor-info"),(yield Yi(_,{mfaPendingCredential:K.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield zg(_,{phoneNumber:N.phoneNumber,recaptchaToken:M});return K}}finally{m._reset()}})).apply(this,arguments)}function zd(){return(zd=(0,f.Z)(function*(_,p){yield vr((0,O.m9)(_),p)})).apply(this,arguments)}let ma=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=bn(m)}verifyPhoneNumber(m,E){return Mt(this.auth,m,(0,O.m9)(E))}static credential(m,E){return Xo._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:M}=m;return E&&M?Xo._fromTokenResponse(E,M):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function on(_,p){return p?oe(p):(j(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class ya extends vo{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Xn(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Xn(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Xn(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function ko(_){return sa(_.auth,new ya(_),_.bypassAuthState)}function dc(_){const{auth:p,user:m}=_;return j(m,p,"internal-error"),ws(m,new ya(_),_.bypassAuthState)}function hc(_){return xn.apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(_){const{auth:p,user:m}=_;return j(m,p,"internal-error"),vr(m,new ya(_),_.bypassAuthState)})).apply(this,arguments)}class pi{constructor(p,m,E,M,N=!1){this.auth=p,this.resolver=E,this.user=M,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,f.Z)(function*(E,M){p.pendingPromise={resolve:E,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(E,M){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,f.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:N,tenantId:K,error:le,type:Ve}=p;if(le)return void m.reject(le);const Xe={auth:m.auth,requestUri:E,sessionId:M,tenantId:K||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ve)(Xe))}catch(_t){m.reject(_t)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ko;case"linkViaPopup":case"linkViaRedirect":return hc;case"reauthViaPopup":case"reauthViaRedirect":return dc;default:Me(this.auth,"internal-error")}}resolve(p){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vu=new an(2e3,1e4);function wu(){return(wu=(0,f.Z)(function*(_,p,m){const E=bn(_);je(_,p,qi);const M=on(E,m);return new Po(E,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function Eu(){return(Eu=(0,f.Z)(function*(_,p,m){const E=(0,O.m9)(_);je(E.auth,p,qi);const M=on(E.auth,m);return new Po(E.auth,"reauthViaPopup",p,M,E).executeNotNull()})).apply(this,arguments)}function gc(){return(gc=(0,f.Z)(function*(_,p,m){const E=(0,O.m9)(_);je(E.auth,p,qi);const M=on(E.auth,m);return new Po(E.auth,"linkViaPopup",p,M,E).executeNotNull()})).apply(this,arguments)}let Po=(()=>{class _ extends pi{constructor(m,E,M,N,K){super(m,E,N,K),this.provider=M,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,f.Z)(function*(){const E=yield m.execute();return j(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,f.Z)(function*(){Q(1===m.filter.length,"Popup operations only handle one event");const E=Si();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(Ee(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,M;this.pollId=null!==(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,vu.get())};m()}}return _.currentPopupAction=null,_})();const Xi=new Map;class pl extends pi{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,f.Z)(function*(){let E=Xi.get(m.auth._key());if(!E){try{const N=(yield function Oo(_,p){return Et.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(N)}catch(M){E=()=>Promise.reject(M)}Xi.set(m.auth._key(),E)}return m.bypassAuthState||Xi.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const M=yield E.auth._redirectUserForId(p.eventId);if(M)return E.user=M,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Et(){return(Et=(0,f.Z)(function*(_,p){const m=Iu(p),E=In(_);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(m));return yield E._remove(m),M})).apply(this,arguments)}function eo(_,p){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,f.Z)(function*(_,p){return In(_)._set(Iu(p),"true")})).apply(this,arguments)}function Wd(_,p){Xi.set(_._key(),p)}function In(_){return oe(_._redirectPersistence)}function Iu(_){return Jn("pendingRedirect",_.config.apiKey,_.name)}function b(){return(b=(0,f.Z)(function*(_,p,m){const E=bn(_);je(_,p,qi);const M=on(E,m);return yield eo(M,E),M._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function V(){return(V=(0,f.Z)(function*(_,p,m){const E=(0,O.m9)(_);je(E.auth,p,qi);const M=on(E.auth,m);yield eo(M,E.auth);const N=yield ot(E);return M._openRedirect(E.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function Ae(){return(Ae=(0,f.Z)(function*(_,p,m){const E=(0,O.m9)(_);je(E.auth,p,qi);const M=on(E.auth,m);yield Ti(!1,E,p.providerId),yield eo(M,E.auth);const N=yield ot(E);return M._openRedirect(E.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function ft(){return(ft=(0,f.Z)(function*(_,p){return yield bn(_)._initializationPromise,It(_,p,!1)})).apply(this,arguments)}function It(_,p){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,f.Z)(function*(_,p,m=!1){const E=bn(_),M=on(E,p),K=yield new pl(E,M,m).execute();return K&&!m&&(delete K.user._redirectEventId,yield E._persistUserIfCurrent(K.user),yield E._setRedirectUser(null,p)),K})).apply(this,arguments)}function ot(_){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,f.Z)(function*(_){const p=Si(`${_.uid}:::`);return _._redirectEventId=p,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),p})).apply(this,arguments)}class bu{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function mc(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ki(_);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!ki(p)){const M=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ee(this.auth,M))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ni(p))}saveEventToCache(p){this.cachedEventUids.add(Ni(p)),this.lastProcessedEventTime=Date.now()}}function Ni(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(p=>p).join("-")}function ki({type:_,error:p}){return"unknown"===_&&"auth/no-auth-event"===p?.code}function _a(_){return to.apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(_,p={}){return un(_,"GET","/v1/projects",p)})).apply(this,arguments)}const Qr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fo=/^https?/;function Tf(){return(Tf=(0,f.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:p}=yield _a(_);for(const m of p)try{if(F_(m))return}catch{}Me(_,"unauthorized-domain")})).apply(this,arguments)}function F_(_){const p=Fe(),{protocol:m,hostname:E}=new URL(p);if(_.startsWith("chrome-extension://")){const K=new URL(_);return""===K.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&K.hostname===E}if(!Fo.test(m))return!1;if(Qr.test(_))return E===_;const M=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const $d=new an(3e4,6e4);function Du(){const _=Ht().___jsl;if(_?.H)for(const p of Object.keys(_.H))if(_.H[p].r=_.H[p].r||[],_.H[p].L=_.H[p].L||[],_.H[p].r=[..._.H[p].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let no=null;function L_(_){return no=no||function yc(_){return new Promise((p,m)=>{var E,M,N;function K(){Du(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Du(),m(Ee(_,"network-request-failed"))},timeout:$d.get()})}if(null!==(M=null===(E=Ht().gapi)||void 0===E?void 0:E.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(N=Ht().gapi)||void 0===N||!N.load){const le=Js("iframefcb");return Ht()[le]=()=>{gapi.load?K():m(Ee(_,"network-request-failed"))},Fr(`https://apis.google.com/js/api.js?onload=${le}`).catch(Ve=>m(Ve))}K()}}).catch(p=>{throw no=null,p})}(_),no}const Sf=new an(5e3,15e3),U_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _c(_){const p=_.config;j(p.authDomain,_,"auth-domain-config-required");const m=p.emulator?On(p,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:_.name,v:ue.SDK_VERSION},M=Yg.get(_.config.apiHost);M&&(E.eid=M);const N=_._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,O.xO)(E).slice(1)}`}function ro(){return ro=(0,f.Z)(function*(_){const p=yield L_(_),m=Ht().gapi;return j(m,_,"internal-error"),p.open({where:document.body,url:_c(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U_,dontclear:!0},E=>new Promise(function(){var M=(0,f.Z)(function*(N,K){yield E.restyle({setHideOnLeave:!1});const le=Ee(_,"network-request-failed"),Ve=Ht().setTimeout(()=>{K(le)},Sf.get());function Xe(){Ht().clearTimeout(Ve),N(E)}E.ping(Xe).then(Xe,()=>{K(le)})});return function(N,K){return M.apply(this,arguments)}}()))}),ro.apply(this,arguments)}const vc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yd{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Xd(_,p,m,E,M,N){j(_.config.authDomain,_,"auth-domain-config-required"),j(_.config.apiKey,_,"invalid-api-key");const K={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:ue.SDK_VERSION,eventId:M};if(p instanceof qi){p.setDefaultLanguage(_.languageCode),K.providerId=p.providerId||"",(0,O.xb)(p.getCustomParameters())||(K.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ve,Xe]of Object.entries(N||{}))K[Ve]=Xe}if(p instanceof Eo){const Ve=p.getScopes().filter(Xe=>""!==Xe);Ve.length>0&&(K.scopes=Ve.join(","))}_.tenantId&&(K.tid=_.tenantId);const le=K;for(const Ve of Object.keys(le))void 0===le[Ve]&&delete le[Ve];return`${function j_({config:_}){return _.emulator?On(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,O.xO)(le).slice(1)}`}const Mf="webStorageSupport";class xf extends class wc{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new xf(p)}_finalizeEnroll(p,m,E){return function k_(_,p){return un(_,"POST","/v2/accounts/mfaEnrollment:finalize",kt(_,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Mi(_,p){return un(_,"POST","/v2/accounts/mfaSignIn:finalize",kt(_,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let VE=(()=>{class _{constructor(){}static assertion(m){return xf._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var G_="@firebase/auth";class UE{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,f.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{var M;p((null===(M=E)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ea(){return window}function so(){return(so=(0,f.Z)(function*(_,p,m){var E;const{BuildInfo:M}=Ea();Q(p.sessionId,"AuthEvent did not contain a session ID");const N=yield Jg(p.sessionId),K={};return li()?K.ibi=M.packageName:vt()?K.apn=M.packageName:Me(_,"operation-not-supported-in-this-environment"),M.displayName&&(K.appDisplayName=M.displayName),K.sessionId=N,Xd(_,m,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,K)})).apply(this,arguments)}function Tu(){return(Tu=(0,f.Z)(function*(_){const{BuildInfo:p}=Ea(),m={};li()?m.iosBundleId=p.packageName:vt()?m.androidPackageName=p.packageName:Me(_,"operation-not-supported-in-this-environment"),yield _a(_,m)})).apply(this,arguments)}function es(){return(es=(0,f.Z)(function*(_,p,m){const{cordova:E}=Ea();let M=()=>{};try{yield new Promise((N,K)=>{let le=null;function Ve(){var lt;N();const ir=null===(lt=E.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof ir&&ir(),"function"==typeof m?.close&&m.close()}function Xe(){le||(le=window.setTimeout(()=>{K(Ee(_,"redirect-cancelled-by-user"))},2e3))}function _t(){"visible"===document?.visibilityState&&Xe()}p.addPassiveListener(Ve),document.addEventListener("resume",Xe,!1),vt()&&document.addEventListener("visibilitychange",_t,!1),M=()=>{p.removePassiveListener(Ve),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",_t,!1),le&&window.clearTimeout(le)}})}finally{M()}})).apply(this,arguments)}function Jg(_){return Su.apply(this,arguments)}function Su(){return(Su=(0,f.Z)(function*(_){const p=W_(_),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function W_(_){if(Q(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const p=new ArrayBuffer(_.length),m=new Uint8Array(p);for(let E=0;E<_.length;E++)m[E]=_.charCodeAt(E);return m}!function Rf(_){(0,ue._registerComponent)(new ce.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),{apiKey:N,authDomain:K}=E.options;return((le,Ve)=>{j(N&&!N.includes(":"),"invalid-api-key",{appName:le.name}),j(!K?.includes(":"),"argument-error",{appName:le.name});const Xe={apiKey:N,authDomain:K,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:At(_)},_t=new Zo(le,Ve,Xe);return function Le(_,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(oe);p?.errorMap&&_._updateErrorMap(p.errorMap),_._initializeWithPersistence(E,p?.popupRedirectResolver)}(_t,m),_t})(E,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new ce.wA("auth-internal",p=>{const m=bn(p.getProvider("auth").getImmediate());return new UE(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(G_,"0.20.5",function BE(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ue.registerVersion)(G_,"0.20.5","esm2017")}("Browser");class q_ extends bu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,f.Z)(function*(){yield p.initPromise})()}}function eh(_){return ml.apply(this,arguments)}function ml(){return(ml=(0,f.Z)(function*(_){const p=yield Cc()._get(th(_));return p&&(yield Cc()._remove(th(_))),p})).apply(this,arguments)}function em(){const _=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*p.length);_.push(p.charAt(E))}return _.join("")}function Cc(){return oe(fu)}function th(_){return Jn("authEvent",_.config.apiKey,_.name)}function yl(_){if(!_?.includes("?"))return{};const[p,...m]=_.split("?");return(0,O.zd)(m.join("?"))}function rh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function Dc(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function K_(_=(0,O.z$)()){return!("file:"!==Dc()&&"ionic:"!==Dc()&&"capacitor:"!==Dc()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Y_(){try{const _=self.localStorage,p=Si();if(_)return _.setItem(p,"1"),_.removeItem(p),!function WE(_=(0,O.z$)()){return function Ff(){return(0,O.w1)()&&11===document?.documentMode}()||function Z_(_=(0,O.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,O.hl)()}catch{return Vo()&&(0,O.hl)()}return!1}function Vo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ur(){return(function GE(){return"http:"===Dc()||"https:"===Dc()}()||(0,O.ru)()||K_())&&!function zE(){return(0,O.b$)()||(0,O.UG)()}()&&Y_()&&!Vo()}function sh(){return K_()&&typeof document<"u"}function oh(){return(oh=(0,f.Z)(function*(){return!!sh()&&new Promise(_=>{const p=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),_(!0)})})})).apply(this,arguments)}const Jr={LOCAL:"local",NONE:"none",SESSION:"session"},Uo=j,ah="persistence";function vl(_){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,f.Z)(function*(_){yield _._initializationPromise;const p=Vf(),m=Jn(ah,_.config.apiKey,_.name);p&&p.setItem(m,_._getPersistence())})).apply(this,arguments)}function Vf(){var _;try{return(null===(_=function Q_(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const bs=j;class ts{constructor(){this.browserResolver=oe(class H_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ao,this._completeRedirectFn=It,this._overrideRedirectResult=Wd}_openPopup(p,m,E,M){var N=this;return(0,f.Z)(function*(){var K;Q(null===(K=N.eventManagers[p._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const le=Xd(p,m,E,Fe(),M);return function io(_,p,m,E=500,M=600){const N=Math.max((window.screen.availHeight-M)/2,0).toString(),K=Math.max((window.screen.availWidth-E)/2,0).toString();let le="";const Ve=Object.assign(Object.assign({},vc),{width:E.toString(),height:M.toString(),top:N,left:K}),Xe=(0,O.z$)().toLowerCase();m&&(le=yr(Xe)?"_blank":m),wn(Xe)&&(p=p||"http://localhost",Ve.scrollbars="yes");const _t=Object.entries(Ve).reduce((ir,[rs,Ia])=>`${ir}${rs}=${Ia},`,"");if(function bi(_=(0,O.z$)()){var p;return li(_)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Xe)&&"_self"!==le)return function Qd(_,p){const m=document.createElement("a");m.href=_,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",le),new Yd(null);const lt=window.open(p||"",le,_t);j(lt,_,"popup-blocked");try{lt.focus()}catch{}return new Yd(lt)}(p,le,Si())})()}_openRedirect(p,m,E,M){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(p),function Gt(_){Ht().location.href=_}(Xd(p,m,E,Fe(),M)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:M,promise:N}=this.eventManagers[m];return M?Promise.resolve(M):(Q(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,f.Z)(function*(){const E=yield function Af(_){return ro.apply(this,arguments)}(p),M=new bu(p);return E.register("authEvent",N=>(j(N?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:M},m.iframes[p._key()]=E,M})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Mf,{type:Mf},M=>{var N;const K=null===(N=M?.[0])||void 0===N?void 0:N[Mf];void 0!==K&&m(!!K),Me(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Df(_){return Tf.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return za()||dr()||li()}}),this.cordovaResolver=oe(class bc{constructor(){this._redirectPersistence=Ao,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=It,this._overrideRedirectResult=Wd}_initialize(p){var m=this;return(0,f.Z)(function*(){const E=p._key();let M=m.eventManagers.get(E);return M||(M=new q_(p),m.eventManagers.set(E,M),m.attachCallbackListeners(p,M)),M})()}_openPopup(p){Me(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,E,M){var N=this;return(0,f.Z)(function*(){!function Of(_){var p,m,E,M,N,K,le,Ve,Xe,_t;const lt=Ea();j("function"==typeof(null===(p=lt?.universalLinks)||void 0===p?void 0:p.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(m=lt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(N=null===(M=null===(E=lt?.cordova)||void 0===E?void 0:E.plugins)||void 0===M?void 0:M.browsertab)||void 0===N?void 0:N.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Ve=null===(le=null===(K=lt?.cordova)||void 0===K?void 0:K.plugins)||void 0===le?void 0:le.browsertab)||void 0===Ve?void 0:Ve.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(_t=null===(Xe=lt?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===_t?void 0:_t.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const K=yield N._initialize(p);yield K.initialized(),K.resetRedirect(),function Ri(){Xi.clear()}(),yield N._originValidation(p);const le=function Ec(_,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:em(),postBody:null,tenantId:_.tenantId,error:Ee(_,"no-auth-event")}}(p,E,M);yield function Ic(_,p){return Cc()._set(th(_),p)}(p,le);const Ve=yield function kf(_,p,m){return so.apply(this,arguments)}(p,le,m),Xe=yield function Pf(_){const{cordova:p}=Ea();return new Promise(m=>{p.plugins.browsertab.isAvailable(E=>{let M=null;E?p.plugins.browsertab.openUrl(_):M=p.InAppBrowser.open(_,function hr(_=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(M)})})}(Ve);return function oo(_,p,m){return es.apply(this,arguments)}(p,K,Xe)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function gl(_){return Tu.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:E,handleOpenURL:M,BuildInfo:N}=Ea(),K=setTimeout((0,f.Z)(function*(){yield eh(p),m.onEvent(rh())}),500),le=function(){var _t=(0,f.Z)(function*(lt){clearTimeout(K);const ir=yield eh(p);let rs=null;ir&&lt?.url&&(rs=function HE(_,p){var m,E;const M=function nm(_){const p=yl(_),m=p.link?decodeURIComponent(p.link):void 0,E=yl(m).link,M=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return yl(M).link||M||E||m||_}(p);if(M.includes("/__/auth/callback")){const N=yl(M),K=N.firebaseError?function tm(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,le=null===(E=null===(m=K?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Ve=le?Ee(le):null;return Ve?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:M,postBody:null}}return null}(ir,lt.url)),m.onEvent(rs||rh())});return function(ir){return _t.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,le);const Ve=M,Xe=`${N.packageName.toLowerCase()}://`;Ea().handleOpenURL=function(){var _t=(0,f.Z)(function*(lt){if(lt.toLowerCase().startsWith(Xe)&&le({url:lt}),"function"==typeof Ve)try{Ve(lt)}catch(ir){console.error(ir)}});return function(lt){return _t.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ao,this._completeRedirectFn=It,this._overrideRedirectResult=Wd}_initialize(p){var m=this;return(0,f.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,E,M){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(p,m,E,M)})()}_openRedirect(p,m,E,M){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(p,m,E,M)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return sh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,f.Z)(function*(){if(p.underlyingResolver)return;const m=yield function Lf(){return oh.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function uh(_){return _.unwrap()}function J_(_){return Tc(_)}function Tc(_){const{_tokenResponse:p}=_ instanceof O.ZR?_.customData:_;if(!p)return null;if(!(_ instanceof O.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ma.credentialFromResult(_);const m=p.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Ya;break;case"facebook.com":E=na;break;case"github.com":E=Ad;break;case"twitter.com":E=xd;break;default:const{oauthIdToken:M,oauthAccessToken:N,oauthTokenSecret:K,pendingToken:le,nonce:Ve}=p;return N||K||M||le?le?m.startsWith("saml.")?Qa._create(m,le):ms._fromParams({providerId:m,signInMethod:m,pendingToken:le,idToken:M,accessToken:N}):new ta(m).credential({idToken:M,accessToken:N,rawNonce:Ve}):null}return _ instanceof O.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function rr(_,p){return p.catch(m=>{throw m instanceof O.ZR&&function Uf(_,p){var m,E;const M=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=p)||void 0===E?void 0:E.code))p.resolver=new jf(_,function pr(_,p){var m;const E=(0,O.m9)(_),M=p;return j(p.customData.operationType,E,"argument-error"),j(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),lu._fromError(E,M)}(_,p));else if(M){const N=Tc(p),K=p;N&&(K.credential=N,K.tenantId=M.tenantId||void 0,K.email=M.email||void 0,K.phoneNumber=M.phoneNumber||void 0)}}(_,m),m}).then(m=>{const M=m.user;return{operationType:m.operationType,credential:J_(m),additionalUserInfo:ll(m),user:ns.getOrCreate(M)}})}function Bf(_,p){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,f.Z)(function*(_,p){const m=yield p;return{verificationId:m.verificationId,confirm:E=>rr(_,m.confirm(E))}})).apply(this,arguments)}class jf{constructor(p,m){this.resolver=m,this.auth=function lh(_){return _.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return rr(uh(this.auth),this.resolver.resolveSignIn(p))}}class ns{constructor(p){this._delegate=p,this.multiFactor=function Ld(_){const p=(0,O.m9)(_);return du.has(p)||du.set(p,cu._fromUser(p)),du.get(p)}(p)}static getOrCreate(p){return ns.USER_MAP.has(p)||ns.USER_MAP.set(p,new ns(p)),ns.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,f.Z)(function*(){return rr(m.auth,el(m._delegate,p))})()}linkWithPhoneNumber(p,m){var E=this;return(0,f.Z)(function*(){return Bf(E.auth,function lc(_,p,m){return pa.apply(this,arguments)}(E._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,f.Z)(function*(){return rr(m.auth,function pc(_,p,m){return gc.apply(this,arguments)}(m._delegate,p,ts))})()}linkWithRedirect(p){var m=this;return(0,f.Z)(function*(){return yield vl(bn(m.auth)),function J(_,p,m){return function ie(_,p,m){return Ae.apply(this,arguments)}(_,p,m)}(m._delegate,p,ts)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,f.Z)(function*(){return rr(m.auth,Co(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Bf(this.auth,function _u(_,p,m){return ga.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return rr(this.auth,function bf(_,p,m){return Eu.apply(this,arguments)}(this._delegate,p,ts))}reauthenticateWithRedirect(p){var m=this;return(0,f.Z)(function*(){return yield vl(bn(m.auth)),function T(_,p,m){return function x(_,p,m){return V.apply(this,arguments)}(_,p,m)}(m._delegate,p,ts)})()}sendEmailVerification(p){return function rc(_,p){return ua.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,f.Z)(function*(){return yield function Ja(_,p){return _s.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function mf(_,p){return tr((0,O.m9)(_),p,null)}(this._delegate,p)}updatePassword(p){return function ul(_,p){return tr((0,O.m9)(_),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function fl(_,p){return zd.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function al(_,p){return la.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function rl(_,p,m){return il.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ns.USER_MAP=new WeakMap;const Ds=j;let Au=(()=>{class _{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=m.options;Ds(M,"invalid-api-key",{appName:m.name}),Ds(M,"invalid-api-key",{appName:m.name});const N=typeof window<"u"?ts:void 0;this._delegate=E.initialize({options:{persistence:X_(M,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ie),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ns.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function _r(_,p,m){const E=bn(_);j(E._canInitEmulator,E,"emulator-config-failed"),j(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const M=!!m?.disableWarnings,N=js(p),{host:K,port:le}=function ps(_){const p=js(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const N=M[1];return{host:N,port:Pr(E.substr(N.length+1))}}{const[N,K]=E.split(":");return{host:N,port:Pr(K)}}}(p);E.config.emulator={url:`${N}//${K}${null===le?"":`:${le}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:K,port:le,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Hs(){function _(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,E)}applyActionCode(m){return function nu(_,p){return aa.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return ru(this._delegate,m)}confirmPasswordReset(m,E){return function di(_,p,m){return tu.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var M=this;return(0,f.Z)(function*(){return rr(M._delegate,function $i(_,p,m){return iu.apply(this,arguments)}(M._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function nl(_,p){return ou.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function tc(_,p){return"EMAIL_SIGNIN"===Di.parseLink(p)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,f.Z)(function*(){Ds(Ur(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function He(_,p){return ft.apply(this,arguments)}(m._delegate,ts);return E?rr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function nr(_,p){bn(_)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,E,M){const{next:N,error:K,complete:le}=sm(m,E,M);return this._delegate.onAuthStateChanged(N,K,le)}onIdTokenChanged(m,E,M){const{next:N,error:K,complete:le}=sm(m,E,M);return this._delegate.onIdTokenChanged(N,K,le)}sendSignInLinkToEmail(m,E){return function Is(_,p,m){return ec.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function eu(_,p,m){return qs.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,f.Z)(function*(){let M;switch(function qE(_,p){Uo(Object.values(Jr).includes(p),_,"invalid-persistence-type"),(0,O.b$)()?Uo(p!==Jr.SESSION,_,"unsupported-persistence-type"):(0,O.UG)()?Uo(p===Jr.NONE,_,"unsupported-persistence-type"):Vo()?Uo(p===Jr.NONE||p===Jr.LOCAL&&(0,O.hl)(),_,"unsupported-persistence-type"):Uo(p===Jr.NONE||Y_(),_,"unsupported-persistence-type")}(E._delegate,m),m){case Jr.SESSION:M=Ao;break;case Jr.LOCAL:M=(yield oe(Qs)._isAvailable())?Qs:fu;break;case Jr.NONE:M=en;break;default:return Me("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return rr(this._delegate,function Rd(_){return pf.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return rr(this._delegate,Mn(this._delegate,m))}signInWithCustomToken(m){return rr(this._delegate,function De(_,p){return Ft.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return rr(this._delegate,function Do(_,p,m){return Mn((0,O.m9)(_),ea.credential(p,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return rr(this._delegate,function kd(_,p,m){return su.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Bf(this._delegate,function Bn(_,p,m){return Vr.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,f.Z)(function*(){return Ds(Ur(),E._delegate,"operation-not-supported-in-this-environment"),rr(E._delegate,function fc(_,p,m){return wu.apply(this,arguments)}(E._delegate,m,ts))})()}signInWithRedirect(m){var E=this;return(0,f.Z)(function*(){return Ds(Ur(),E._delegate,"operation-not-supported-in-this-environment"),yield vl(E._delegate),function qd(_,p,m){return function Cu(_,p,m){return b.apply(this,arguments)}(_,p,m)}(E._delegate,m,ts)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function $s(_,p){return qn.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Jr,_})();function sm(_,p,m){let E=_;"function"!=typeof _&&({next:E,error:p,complete:m}=_);const M=E;return{next:K=>M(K&&ns.getOrCreate(K)),error:p,complete:m}}function X_(_,p){const m=function im(_,p){const m=Vf();if(!m)return[];const E=Jn(ah,_,p);switch(m.getItem(E)){case Jr.NONE:return[en];case Jr.LOCAL:return[Qs,Ao];case Jr.SESSION:return[Ao];default:return[]}}(_,p);if(typeof self<"u"&&!m.includes(Qs)&&m.push(Qs),typeof window<"u")for(const E of[fu,Ao])m.includes(E)||m.push(E);return m.includes(en)||m.push(en),m}class Hf{constructor(){this.providerId="phone",this._delegate=new ma(uh(ne.Z.auth()))}static credential(p,m){return ma.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}Hf.PHONE_SIGN_IN_METHOD=ma.PHONE_SIGN_IN_METHOD,Hf.PROVIDER_ID=ma.PROVIDER_ID;const ev=j;class Gf{constructor(p,m,E=ne.Z.app()){var M;ev(null===(M=E.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Kn(p,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function om(_){_.INTERNAL.registerComponent(new ce.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new Au(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ea,FacebookAuthProvider:na,GithubAuthProvider:Ad,GoogleAuthProvider:Ya,OAuthProvider:ta,SAMLAuthProvider:Or,PhoneAuthProvider:Hf,PhoneMultiFactorGenerator:VE,RecaptchaVerifier:Gf,TwitterAuthProvider:xd,Auth:Au,AuthCredential:vo,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.18")}(ne.Z)},9751:(at,Se,L)=>{L.d(Se,{y:()=>fe});var f=L(930),ne=L(727),O=L(8822),ue=L(9635),se=L(2416),he=L(576),ce=L(2806);let fe=(()=>{class X{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Ie=new X;return Ie.source=this,Ie.operator=Re,Ie}subscribe(Re,Ie,tt){const ve=function G(X){return X&&X instanceof f.Lv||function H(X){return X&&(0,he.m)(X.next)&&(0,he.m)(X.error)&&(0,he.m)(X.complete)}(X)&&(0,ne.Nn)(X)}(Re)?Re:new f.Hp(Re,Ie,tt);return(0,ce.x)(()=>{const{operator:pe,source:Ye}=this;ve.add(pe?pe.call(ve,Ye):Ye?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Ie){Re.error(Ie)}}forEach(Re,Ie){return new(Ie=ge(Ie))((tt,ve)=>{const pe=new f.Hp({next:Ye=>{try{Re(Ye)}catch(st){ve(st),pe.unsubscribe()}},error:ve,complete:tt});this.subscribe(pe)})}_subscribe(Re){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Re)}[O.L](){return this}pipe(...Re){return(0,ue.U)(Re)(this)}toPromise(Re){return new(Re=ge(Re))((Ie,tt)=>{let ve;this.subscribe(pe=>ve=pe,pe=>tt(pe),()=>Ie(ve))})}}return X.create=Ue=>new X(Ue),X})();function ge(X){var Ue;return null!==(Ue=X??se.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(at,Se,L)=>{L.d(Se,{x:()=>ce});var f=L(9751),ne=L(727);const ue=(0,L(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=L(8737),he=L(2806);let ce=(()=>{class ge extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new fe(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new ue}next(G){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(G)}})}error(G){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:Ue,observers:Re}=this;return X||Ue?ne.Lc:(this.currentObservers=null,Re.push(G),new ne.w0(()=>{this.currentObservers=null,(0,se.P)(Re,G)}))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:Ue,isStopped:Re}=this;X?G.error(Ue):Re&&G.complete()}asObservable(){const G=new f.y;return G.source=this,G}}return ge.create=(H,G)=>new fe(H,G),ge})();class fe extends ce{constructor(H,G){super(),this.destination=H,this.source=G}next(H){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,H)}error(H){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,H)}complete(){var H,G;null===(G=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===G||G.call(H)}_subscribe(H){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(H))&&void 0!==X?X:ne.Lc}}},930:(at,Se,L)=>{L.d(Se,{Hp:()=>tt,Lv:()=>X});var f=L(576),ne=L(727),O=L(2416),ue=L(7849),se=L(5032);const he=ge("C",void 0,void 0);function ge(Me,Ee,be){return{kind:Me,value:Ee,error:be}}var H=L(3410),G=L(2806);class X extends ne.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,ne.Nn)(Ee)&&Ee.add(this)):this.destination=st}static create(Ee,be,je){return new tt(Ee,be,je)}next(Ee){this.isStopped?Ye(function fe(Me){return ge("N",Me,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Ye(function ce(Me){return ge("E",void 0,Me)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Ye(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Re(Me,Ee){return Ue.call(Me,Ee)}class Ie{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:be}=this;if(be.next)try{be.next(Ee)}catch(je){ve(je)}}error(Ee){const{partialObserver:be}=this;if(be.error)try{be.error(Ee)}catch(je){ve(je)}else ve(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(be){ve(be)}}}class tt extends X{constructor(Ee,be,je){let Ge;if(super(),(0,f.m)(Ee)||!Ee)Ge={next:Ee??void 0,error:be??void 0,complete:je??void 0};else{let j;this&&O.v.useDeprecatedNextContext?(j=Object.create(Ee),j.unsubscribe=()=>this.unsubscribe(),Ge={next:Ee.next&&Re(Ee.next,j),error:Ee.error&&Re(Ee.error,j),complete:Ee.complete&&Re(Ee.complete,j)}):Ge=Ee}this.destination=new Ie(Ge)}}function ve(Me){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Me):(0,ue.h)(Me)}function Ye(Me,Ee){const{onStoppedNotification:be}=O.v;be&&H.z.setTimeout(()=>be(Me,Ee))}const st={closed:!0,next:se.Z,error:function pe(Me){throw Me},complete:se.Z}},727:(at,Se,L)=>{L.d(Se,{Lc:()=>he,w0:()=>se,Nn:()=>ce});var f=L(576);const O=(0,L(3888).d)(ge=>function(G){ge(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,Ue)=>`${Ue+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ue=L(8737);class se{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Re of G)Re.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,f.m)(X))try{X()}catch(Re){H=Re instanceof O?Re.errors:[Re]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Re of Ue)try{fe(Re)}catch(Ie){H=H??[],Ie instanceof O?H=[...H,...Ie.errors]:H.push(Ie)}}if(H)throw new O(H)}}add(H){var G;if(H&&H!==this)if(this.closed)fe(H);else{if(H instanceof se){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(H)}}_hasParent(H){const{_parentage:G}=this;return G===H||Array.isArray(G)&&G.includes(H)}_addParent(H){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(H),G):G?[G,H]:H}_removeParent(H){const{_parentage:G}=this;G===H?this._parentage=null:Array.isArray(G)&&(0,ue.P)(G,H)}remove(H){const{_finalizers:G}=this;G&&(0,ue.P)(G,H),H instanceof se&&H._removeParent(this)}}se.EMPTY=(()=>{const ge=new se;return ge.closed=!0,ge})();const he=se.EMPTY;function ce(ge){return ge instanceof se||ge&&"closed"in ge&&(0,f.m)(ge.remove)&&(0,f.m)(ge.add)&&(0,f.m)(ge.unsubscribe)}function fe(ge){(0,f.m)(ge)?ge():ge.unsubscribe()}},2416:(at,Se,L)=>{L.d(Se,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Se,L)=>{L.d(Se,{E:()=>ne});const ne=new(L(9751).y)(se=>se.complete())},8996:(at,Se,L)=>{L.d(Se,{D:()=>Ee});var f=L(8421),ne=L(5363),O=L(9468),he=L(9751),fe=L(2202),ge=L(576),H=L(9672);function X(be,je){if(!be)throw new Error("Iterable cannot be null");return new he.y(Ge=>{(0,H.f)(Ge,je,()=>{const j=be[Symbol.asyncIterator]();(0,H.f)(Ge,je,()=>{j.next().then(_e=>{_e.done?Ge.complete():Ge.next(_e.value)})},0,!0)})})}var Ue=L(3670),Re=L(8239),Ie=L(1144),tt=L(6495),ve=L(2206),pe=L(4532),Ye=L(3260);function Ee(be,je){return je?function Me(be,je){if(null!=be){if((0,Ue.c)(be))return function ue(be,je){return(0,f.Xf)(be).pipe((0,O.R)(je),(0,ne.Q)(je))}(be,je);if((0,Ie.z)(be))return function ce(be,je){return new he.y(Ge=>{let j=0;return je.schedule(function(){j===be.length?Ge.complete():(Ge.next(be[j++]),Ge.closed||this.schedule())})})}(be,je);if((0,Re.t)(be))return function se(be,je){return(0,f.Xf)(be).pipe((0,O.R)(je),(0,ne.Q)(je))}(be,je);if((0,ve.D)(be))return X(be,je);if((0,tt.T)(be))return function G(be,je){return new he.y(Ge=>{let j;return(0,H.f)(Ge,je,()=>{j=be[fe.h](),(0,H.f)(Ge,je,()=>{let _e,Q;try{({value:_e,done:Q}=j.next())}catch(te){return void Ge.error(te)}Q?Ge.complete():Ge.next(_e)},0,!0)}),()=>(0,ge.m)(j?.return)&&j.return()})}(be,je);if((0,Ye.L)(be))return function st(be,je){return X((0,Ye.Q)(be),je)}(be,je)}throw(0,pe.z)(be)}(be,je):(0,f.Xf)(be)}},8421:(at,Se,L)=>{L.d(Se,{Xf:()=>Ue});var f=L(655),ne=L(1144),O=L(8239),ue=L(9751),se=L(3670),he=L(2206),ce=L(4532),fe=L(6495),ge=L(3260),H=L(576),G=L(7849),X=L(8822);function Ue(Me){if(Me instanceof ue.y)return Me;if(null!=Me){if((0,se.c)(Me))return function Re(Me){return new ue.y(Ee=>{const be=Me[X.L]();if((0,H.m)(be.subscribe))return be.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,ne.z)(Me))return function Ie(Me){return new ue.y(Ee=>{for(let be=0;be<Me.length&&!Ee.closed;be++)Ee.next(Me[be]);Ee.complete()})}(Me);if((0,O.t)(Me))return function tt(Me){return new ue.y(Ee=>{Me.then(be=>{Ee.closed||(Ee.next(be),Ee.complete())},be=>Ee.error(be)).then(null,G.h)})}(Me);if((0,he.D)(Me))return pe(Me);if((0,fe.T)(Me))return function ve(Me){return new ue.y(Ee=>{for(const be of Me)if(Ee.next(be),Ee.closed)return;Ee.complete()})}(Me);if((0,ge.L)(Me))return function Ye(Me){return pe((0,ge.Q)(Me))}(Me)}throw(0,ce.z)(Me)}function pe(Me){return new ue.y(Ee=>{(function st(Me,Ee){var be,je,Ge,j;return(0,f.mG)(this,void 0,void 0,function*(){try{for(be=(0,f.KL)(Me);!(je=yield be.next()).done;)if(Ee.next(je.value),Ee.closed)return}catch(_e){Ge={error:_e}}finally{try{je&&!je.done&&(j=be.return)&&(yield j.call(be))}finally{if(Ge)throw Ge.error}}Ee.complete()})})(Me,Ee).catch(be=>Ee.error(be))})}},6451:(at,Se,L)=>{L.d(Se,{T:()=>he});var f=L(8189),ne=L(8421),O=L(515),ue=L(7669),se=L(8996);function he(...ce){const fe=(0,ue.yG)(ce),ge=(0,ue._6)(ce,1/0),H=ce;return H.length?1===H.length?(0,ne.Xf)(H[0]):(0,f.J)(ge)((0,se.D)(H,fe)):O.E}},5403:(at,Se,L)=>{L.d(Se,{x:()=>ne});var f=L(930);function ne(ue,se,he,ce,fe){return new O(ue,se,he,ce,fe)}class O extends f.Lv{constructor(se,he,ce,fe,ge,H){super(se),this.onFinalize=ge,this.shouldUnsubscribe=H,this._next=he?function(G){try{he(G)}catch(X){se.error(X)}}:super._next,this._error=fe?function(G){try{fe(G)}catch(X){se.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(G){se.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(at,Se,L)=>{L.d(Se,{U:()=>O});var f=L(4482),ne=L(5403);function O(ue,se){return(0,f.e)((he,ce)=>{let fe=0;he.subscribe((0,ne.x)(ce,ge=>{ce.next(ue.call(se,ge,fe++))}))})}},8189:(at,Se,L)=>{L.d(Se,{J:()=>O});var f=L(5577),ne=L(4671);function O(ue=1/0){return(0,f.z)(ne.y,ue)}},5577:(at,Se,L)=>{L.d(Se,{z:()=>fe});var f=L(4004),ne=L(8421),O=L(4482),ue=L(9672),se=L(5403),ce=L(576);function fe(ge,H,G=1/0){return(0,ce.m)(H)?fe((X,Ue)=>(0,f.U)((Re,Ie)=>H(X,Re,Ue,Ie))((0,ne.Xf)(ge(X,Ue))),G):("number"==typeof H&&(G=H),(0,O.e)((X,Ue)=>function he(ge,H,G,X,Ue,Re,Ie,tt){const ve=[];let pe=0,Ye=0,st=!1;const Me=()=>{st&&!ve.length&&!pe&&H.complete()},Ee=je=>pe<X?be(je):ve.push(je),be=je=>{Re&&H.next(je),pe++;let Ge=!1;(0,ne.Xf)(G(je,Ye++)).subscribe((0,se.x)(H,j=>{Ue?.(j),Re?Ee(j):H.next(j)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(pe--;ve.length&&pe<X;){const j=ve.shift();Ie?(0,ue.f)(H,Ie,()=>be(j)):be(j)}Me()}catch(j){H.error(j)}}))};return ge.subscribe((0,se.x)(H,Ee,()=>{st=!0,Me()})),()=>{tt?.()}}(X,Ue,ge,G)))}},5363:(at,Se,L)=>{L.d(Se,{Q:()=>ue});var f=L(9672),ne=L(4482),O=L(5403);function ue(se,he=0){return(0,ne.e)((ce,fe)=>{ce.subscribe((0,O.x)(fe,ge=>(0,f.f)(fe,se,()=>fe.next(ge),he),()=>(0,f.f)(fe,se,()=>fe.complete(),he),ge=>(0,f.f)(fe,se,()=>fe.error(ge),he)))})}},3099:(at,Se,L)=>{L.d(Se,{B:()=>se});var f=L(8421),ne=L(7579),O=L(930),ue=L(4482);function se(ce={}){const{connector:fe=(()=>new ne.x),resetOnError:ge=!0,resetOnComplete:H=!0,resetOnRefCountZero:G=!0}=ce;return X=>{let Ue,Re,Ie,tt=0,ve=!1,pe=!1;const Ye=()=>{Re?.unsubscribe(),Re=void 0},st=()=>{Ye(),Ue=Ie=void 0,ve=pe=!1},Me=()=>{const Ee=Ue;st(),Ee?.unsubscribe()};return(0,ue.e)((Ee,be)=>{tt++,!pe&&!ve&&Ye();const je=Ie=Ie??fe();be.add(()=>{tt--,0===tt&&!pe&&!ve&&(Re=he(Me,G))}),je.subscribe(be),!Ue&&tt>0&&(Ue=new O.Hp({next:Ge=>je.next(Ge),error:Ge=>{pe=!0,Ye(),Re=he(st,ge,Ge),je.error(Ge)},complete:()=>{ve=!0,Ye(),Re=he(st,H),je.complete()}}),(0,f.Xf)(Ee).subscribe(Ue))})(X)}}function he(ce,fe,...ge){if(!0===fe)return void ce();if(!1===fe)return;const H=new O.Hp({next:()=>{H.unsubscribe(),ce()}});return fe(...ge).subscribe(H)}},9468:(at,Se,L)=>{L.d(Se,{R:()=>ne});var f=L(4482);function ne(O,ue=0){return(0,f.e)((se,he)=>{he.add(O.schedule(()=>se.subscribe(he),ue))})}},8505:(at,Se,L)=>{L.d(Se,{b:()=>se});var f=L(576),ne=L(4482),O=L(5403),ue=L(4671);function se(he,ce,fe){const ge=(0,f.m)(he)||ce||fe?{next:he,error:ce,complete:fe}:he;return ge?(0,ne.e)((H,G)=>{var X;null===(X=ge.subscribe)||void 0===X||X.call(ge);let Ue=!0;H.subscribe((0,O.x)(G,Re=>{var Ie;null===(Ie=ge.next)||void 0===Ie||Ie.call(ge,Re),G.next(Re)},()=>{var Re;Ue=!1,null===(Re=ge.complete)||void 0===Re||Re.call(ge),G.complete()},Re=>{var Ie;Ue=!1,null===(Ie=ge.error)||void 0===Ie||Ie.call(ge,Re),G.error(Re)},()=>{var Re,Ie;Ue&&(null===(Re=ge.unsubscribe)||void 0===Re||Re.call(ge)),null===(Ie=ge.finalize)||void 0===Ie||Ie.call(ge)}))}):ue.y}},4408:(at,Se,L)=>{L.d(Se,{o:()=>se});var f=L(727);class ne extends f.w0{constructor(ce,fe){super()}schedule(ce,fe=0){return this}}const O={setInterval(he,ce,...fe){const{delegate:ge}=O;return ge?.setInterval?ge.setInterval(he,ce,...fe):setInterval(he,ce,...fe)},clearInterval(he){const{delegate:ce}=O;return(ce?.clearInterval||clearInterval)(he)},delegate:void 0};var ue=L(8737);class se extends ne{constructor(ce,fe){super(ce,fe),this.scheduler=ce,this.work=fe,this.pending=!1}schedule(ce,fe=0){if(this.closed)return this;this.state=ce;const ge=this.id,H=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(H,ge,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(H,this.id,fe),this}requestAsyncId(ce,fe,ge=0){return O.setInterval(ce.flush.bind(ce,this),ge)}recycleAsyncId(ce,fe,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return fe;O.clearInterval(fe)}execute(ce,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(ce,fe);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,fe){let H,ge=!1;try{this.work(ce)}catch(G){ge=!0,H=G||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ce,scheduler:fe}=this,{actions:ge}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(ge,this),null!=ce&&(this.id=this.recycleAsyncId(fe,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Se,L)=>{L.d(Se,{v:()=>O});var f=L(6063);class ne{constructor(se,he=ne.now){this.schedulerActionCtor=se,this.now=he}schedule(se,he=0,ce){return new this.schedulerActionCtor(this,se).schedule(ce,he)}}ne.now=f.l.now;class O extends ne{constructor(se,he=ne.now){super(se,he),this.actions=[],this._active=!1,this._scheduled=void 0}flush(se){const{actions:he}=this;if(this._active)return void he.push(se);let ce;this._active=!0;do{if(ce=se.execute(se.state,se.delay))break}while(se=he.shift());if(this._active=!1,ce){for(;se=he.shift();)se.unsubscribe();throw ce}}}},4986:(at,Se,L)=>{L.d(Se,{z:()=>O});var f=L(4408);const O=new(L(7565).v)(f.o)},6063:(at,Se,L)=>{L.d(Se,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(at,Se,L)=>{L.d(Se,{z:()=>f});const f={setTimeout(ne,O,...ue){const{delegate:se}=f;return se?.setTimeout?se.setTimeout(ne,O,...ue):setTimeout(ne,O,...ue)},clearTimeout(ne){const{delegate:O}=f;return(O?.clearTimeout||clearTimeout)(ne)},delegate:void 0}},2202:(at,Se,L)=>{L.d(Se,{h:()=>ne});const ne=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Se,L)=>{L.d(Se,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,Se,L)=>{L.d(Se,{_6:()=>he,jO:()=>ue,yG:()=>se});var f=L(576);function O(ce){return ce[ce.length-1]}function ue(ce){return(0,f.m)(O(ce))?ce.pop():void 0}function se(ce){return function ne(ce){return ce&&(0,f.m)(ce.schedule)}(O(ce))?ce.pop():void 0}function he(ce,fe){return"number"==typeof O(ce)?ce.pop():fe}},8737:(at,Se,L)=>{function f(ne,O){if(ne){const ue=ne.indexOf(O);0<=ue&&ne.splice(ue,1)}}L.d(Se,{P:()=>f})},3888:(at,Se,L)=>{function f(ne){const ue=ne(se=>{Error.call(se),se.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}L.d(Se,{d:()=>f})},2806:(at,Se,L)=>{L.d(Se,{O:()=>ue,x:()=>O});var f=L(2416);let ne=null;function O(se){if(f.v.useDeprecatedSynchronousErrorHandling){const he=!ne;if(he&&(ne={errorThrown:!1,error:null}),se(),he){const{errorThrown:ce,error:fe}=ne;if(ne=null,ce)throw fe}}else se()}function ue(se){f.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=se)}},9672:(at,Se,L)=>{function f(ne,O,ue,se=0,he=!1){const ce=O.schedule(function(){ue(),he?ne.add(this.schedule(null,se)):this.unsubscribe()},se);if(ne.add(ce),!he)return ce}L.d(Se,{f:()=>f})},4671:(at,Se,L)=>{function f(ne){return ne}L.d(Se,{y:()=>f})},1144:(at,Se,L)=>{L.d(Se,{z:()=>f});const f=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},2206:(at,Se,L)=>{L.d(Se,{D:()=>ne});var f=L(576);function ne(O){return Symbol.asyncIterator&&(0,f.m)(O?.[Symbol.asyncIterator])}},576:(at,Se,L)=>{function f(ne){return"function"==typeof ne}L.d(Se,{m:()=>f})},3670:(at,Se,L)=>{L.d(Se,{c:()=>O});var f=L(8822),ne=L(576);function O(ue){return(0,ne.m)(ue[f.L])}},6495:(at,Se,L)=>{L.d(Se,{T:()=>O});var f=L(2202),ne=L(576);function O(ue){return(0,ne.m)(ue?.[f.h])}},8239:(at,Se,L)=>{L.d(Se,{t:()=>ne});var f=L(576);function ne(O){return(0,f.m)(O?.then)}},3260:(at,Se,L)=>{L.d(Se,{L:()=>ue,Q:()=>O});var f=L(655),ne=L(576);function O(se){return(0,f.FC)(this,arguments,function*(){const ce=se.getReader();try{for(;;){const{value:fe,done:ge}=yield(0,f.qq)(ce.read());if(ge)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(fe)}}finally{ce.releaseLock()}})}function ue(se){return(0,ne.m)(se?.getReader)}},4482:(at,Se,L)=>{L.d(Se,{A:()=>ne,e:()=>O});var f=L(576);function ne(ue){return(0,f.m)(ue?.lift)}function O(ue){return se=>{if(ne(se))return se.lift(function(he){try{return ue(he,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,Se,L)=>{function f(){}L.d(Se,{Z:()=>f})},9635:(at,Se,L)=>{L.d(Se,{U:()=>O,z:()=>ne});var f=L(4671);function ne(...ue){return O(ue)}function O(ue){return 0===ue.length?f.y:1===ue.length?ue[0]:function(he){return ue.reduce((ce,fe)=>fe(ce),he)}}},7849:(at,Se,L)=>{L.d(Se,{h:()=>O});var f=L(2416),ne=L(3410);function O(ue){ne.z.setTimeout(()=>{const{onUnhandledError:se}=f.v;if(!se)throw ue;se(ue)})}},4532:(at,Se,L)=>{function f(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Se,{z:()=>f})},655:(at,Se,L)=>{function ue(Q,te){var oe={};for(var re in Q)Object.prototype.hasOwnProperty.call(Q,re)&&te.indexOf(re)<0&&(oe[re]=Q[re]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(re=Object.getOwnPropertySymbols(Q);Le<re.length;Le++)te.indexOf(re[Le])<0&&Object.prototype.propertyIsEnumerable.call(Q,re[Le])&&(oe[re[Le]]=Q[re[Le]])}return oe}function fe(Q,te,oe,re){return new(oe||(oe=Promise))(function(Fe,dt){function Wt(an){try{qe(re.next(an))}catch(On){dt(On)}}function jt(an){try{qe(re.throw(an))}catch(On){dt(On)}}function qe(an){an.done?Fe(an.value):function Le(Fe){return Fe instanceof oe?Fe:new oe(function(dt){dt(Fe)})}(an.value).then(Wt,jt)}qe((re=re.apply(Q,te||[])).next())})}function ve(Q){return this instanceof ve?(this.v=Q,this):new ve(Q)}function pe(Q,te,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,re=oe.apply(Q,te||[]),Fe=[];return Le={},dt("next"),dt("throw"),dt("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function dt(Qt){re[Qt]&&(Le[Qt]=function(Jt){return new Promise(function(Nr,kt){Fe.push([Qt,Jt,Nr,kt])>1||Wt(Qt,Jt)})})}function Wt(Qt,Jt){try{!function jt(Qt){Qt.value instanceof ve?Promise.resolve(Qt.value.v).then(qe,an):On(Fe[0][2],Qt)}(re[Qt](Jt))}catch(Nr){On(Fe[0][3],Nr)}}function qe(Qt){Wt("next",Qt)}function an(Qt){Wt("throw",Qt)}function On(Qt,Jt){Qt(Jt),Fe.shift(),Fe.length&&Wt(Fe[0][0],Fe[0][1])}}function st(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,te=Q[Symbol.asyncIterator];return te?te.call(Q):(Q=function X(Q){var te="function"==typeof Symbol&&Symbol.iterator,oe=te&&Q[te],re=0;if(oe)return oe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&re>=Q.length&&(Q=void 0),{value:Q&&Q[re++],done:!Q}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),oe={},re("next"),re("throw"),re("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function re(Fe){oe[Fe]=Q[Fe]&&function(dt){return new Promise(function(Wt,jt){!function Le(Fe,dt,Wt,jt){Promise.resolve(jt).then(function(qe){Fe({value:qe,done:Wt})},dt)}(Wt,jt,(dt=Q[Fe](dt)).done,dt.value)})}}}L.d(Se,{FC:()=>pe,KL:()=>st,_T:()=>ue,mG:()=>fe,qq:()=>ve})},4650:(at,Se,L)=>{L.d(Se,{$8M:()=>Qs,$Z:()=>VI,AFp:()=>D0,AaK:()=>fe,CRH:()=>Cb,CZH:()=>Gy,CqO:()=>sy,D6c:()=>mg,DdM:()=>Ny,EJc:()=>Wy,F$t:()=>Ew,F4k:()=>Bc,FYo:()=>_t,FiY:()=>ie,G48:()=>dd,GfV:()=>Ia,Gpc:()=>G,Hsn:()=>Rn,JOm:()=>Xr,LFG:()=>In,LSH:()=>ih,Lbi:()=>S0,Lck:()=>OS,MMx:()=>Ry,NdJ:()=>Vu,OlP:()=>gt,Oqu:()=>cy,PXZ:()=>Ky,Q6J:()=>Xm,QGY:()=>Cp,QP$:()=>Oa,Qsj:()=>lt,R0b:()=>Rs,RDi:()=>U_,Rgc:()=>Ol,SBq:()=>le,Sil:()=>Fb,Suo:()=>Ib,TTD:()=>ea,TgZ:()=>ty,X6Q:()=>Qb,XFs:()=>pt,Xpm:()=>B,Xts:()=>Ur,Y36:()=>mh,YKP:()=>kl,YNc:()=>Qm,Yjl:()=>Jn,Yz7:()=>Jt,ZZ4:()=>n_,_Bn:()=>ib,_UZ:()=>ny,_Vd:()=>M,_c5:()=>j0,_uU:()=>Sh,aQg:()=>gg,c2e:()=>Ob,cJS:()=>kt,cg1:()=>Uu,dDg:()=>R0,dqk:()=>Ke,eFA:()=>N0,ekj:()=>Dh,eoX:()=>og,f3M:()=>qd,g9A:()=>Rr,h0i:()=>Jc,hGG:()=>r_,hYB:()=>Cw,iGM:()=>m0,ifc:()=>nt,ip1:()=>b0,kL8:()=>it,lG2:()=>en,lqb:()=>rr,lri:()=>Hb,n5z:()=>Ai,oAB:()=>Be,oxw:()=>Dp,q4F:()=>wl,qLn:()=>ch,qOj:()=>fw,qZA:()=>Cl,rWj:()=>Gb,sBO:()=>gA,sIi:()=>_p,s_b:()=>Oy,soG:()=>ig,tb:()=>zy,tp0:()=>He,uIk:()=>Pu,vHH:()=>Ie,vpe:()=>Na,wAp:()=>we,xp6:()=>Zf,z2F:()=>Qy,zSh:()=>uh,zs3:()=>Rc});var f=L(7579),ne=L(727),O=L(9751),ue=L(6451),se=L(3099);function he(s){for(let o in s)if(s[o]===he)return o;throw Error("Could not find renamed property on target object.")}function ce(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=he({__forward_ref__:he});function G(s){return s.__forward_ref__=G,s.toString=function(){return fe(this())},s}function X(s){return Ue(s)?s():s}function Ue(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===G}class Ie extends Error{constructor(o,u){super(function tt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function ve(s){return"string"==typeof s?s:null==s?"":String(s)}function Ee(s,o){throw new Ie(-201,!1)}function jt(s,o){null==s&&function qe(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Jt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function kt(s){return{providers:s.providers||[],imports:s.imports||[]}}function un(s){return _o(s,Hi)||_o(s,ui)}function _o(s,o){return s.hasOwnProperty(o)?s[o]:null}function kr(s){return s&&(s.hasOwnProperty(fs)||s.hasOwnProperty(Ii))?s[fs]:null}const Hi=he({\u0275prov:he}),fs=he({\u0275inj:he}),ui=he({ngInjectableDef:he}),Ii=he({ngInjectorDef:he});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let gn;function Fn(s){const o=gn;return gn=s,o}function Gi(s,o,u){const c=un(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&pt.Optional?null:void 0!==o?o:void Ee(fe(s))}function An(s){return{toString:s}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),nt=(()=>{return(s=nt||(nt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",nt;var s})();const Ke=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),vn={},Pt=[],Wn=he({\u0275cmp:he}),Vs=he({\u0275dir:he}),Xt=he({\u0275pipe:he}),Wi=he({\u0275mod:he}),Vt=he({\u0275fac:he}),Y=he({__NG_ELEMENT_ID__:he});let z=0;function B(s){return An(()=>{const u=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Pt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||nt.Emulated,id:"c"+z++,styles:s.styles||Pt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return d.inputs=dn(s.inputs,c),d.outputs=dn(s.outputs),v&&v.forEach(I=>I(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map($).filter(Te):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(wn).filter(Te):null,d})}function $(s){return rt(s)||hn(s)}function Te(s){return null!==s}function Be(s){return An(()=>({type:s.type,bootstrap:s.bootstrap||Pt,declarations:s.declarations||Pt,imports:s.imports||Pt,exports:s.exports||Pt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function dn(s,o){if(null==s)return vn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,o&&(o[d]=g)}return u}const en=B;function Jn(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function rt(s){return s[Wn]||null}function hn(s){return s[Vs]||null}function wn(s){return s[Xt]||null}function dr(s,o){const u=s[Wi]||null;if(!u&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return u}function fr(s){return Array.isArray(s)&&"object"==typeof s[1]}function qr(s){return Array.isArray(s)&&!0===s[1]}function Jo(s){return 0!=(8&s.flags)}function wo(s){return 2==(2&s.flags)}function Ka(s){return 1==(1&s.flags)}function ci(s){return null!==s.template}function jg(s){return 0!=(256&s[2])}function Di(s,o){return s.hasOwnProperty(Vt)?s[Vt]:null}class Sd{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function ea(){return qi}function qi(s){return s.type.prototype.ngOnChanges&&(s.setInput=ta),Eo}function Eo(){const s=Ya(this),o=s?.current;if(o){const u=s.previous;if(u===vn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function ta(s,o,u,c){const d=Ya(s)||function Ad(s,o){return s[na]=o}(s,{previous:vn,current:null}),g=d.current||(d.current={}),v=d.previous,I=this.declaredInputs[u],C=v[I];g[I]=new Sd(C&&C.currentValue,o,v===vn),s[c]=o}ea.ngInherit=!0;const na="__ngSimpleChanges__";function Ya(s){return s[na]||null}function Un(s){for(;Array.isArray(s);)s=s[0];return s}function Io(s,o){return Un(o[s])}function Kr(s,o){return Un(o[s.index])}function Ja(s,o){return s.data[o]}function vr(s,o){const u=o[s];return fr(u)?u:u[0]}function ia(s){return 4==(4&s[2])}function Ti(s){return 64==(64&s[2])}function ws(s,o){return null==o?null:s[o]}function Es(s){s[18]=0}function sa(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const wt={lFrame:sl(null),bindingsEnabled:!0};function Ws(){return wt.bindingsEnabled}function De(){return wt.lFrame.lView}function Ft(){return wt.lFrame.tView}function En(){let s=eu();for(;null!==s&&64===s.type;)s=s.parent;return s}function eu(){return wt.lFrame.currentTNode}function di(s,o){const u=wt.lFrame;u.currentTNode=s,u.isParent=o}function tu(){return wt.lFrame.isParent}function nu(){wt.lFrame.isParent=!1}function Do(){return wt.lFrame.bindingIndex++}function Is(s){const o=wt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function kd(s,o){const u=wt.lFrame;u.bindingIndex=u.bindingRootIndex=s,nc(o)}function nc(s){wt.lFrame.currentDirectiveIndex=s}function nl(){return wt.lFrame.currentQueryIndex}function ou(s){wt.lFrame.currentQueryIndex=s}function rc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ua(s,o,u){if(u&pt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&pt.Host||(d=rc(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const c=wt.lFrame=il();return c.currentTNode=o,c.lView=s,!0}function rl(s){const o=il(),u=s[1];wt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function il(){const s=wt.lFrame,o=null===s?null:s.child;return null===o?sl(s):o}function sl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ol(){const s=wt.lFrame;return wt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const al=ol;function la(){const s=ol();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function tr(){return wt.lFrame.selectedIndex}function hi(s){wt.lFrame.selectedIndex=s}function Dn(){const s=wt.lFrame;return Ja(s.tView,s.selectedIndex)}function ll(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:R}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),S&&((s.viewHooks||(s.viewHooks=[])).push(u,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function _f(s,o,u){So(s,o,3,u)}function vf(s,o,u,c){(3&s[2])===u&&So(s,o,u,c)}function uu(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function So(s,o,u,c){const g=c??-1,v=o.length-1;let I=0;for(let C=void 0!==c?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[18]+=65536),(I<g||-1==g)&&(N_(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function N_(s,o,u,c){const d=u[c]<0,g=u[c+1],I=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(I)}finally{}}}else try{g.call(I)}finally{}}class ca{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function cu(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const g=u[c++],v=u[c++],I=u[c++];s.setAttribute(o,v,I,g)}else{const g=d,v=u[++c];Ld(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),c++}}return c}function du(s){return 3===s||4===s||6===s}function Ld(s){return 64===s.charCodeAt(0)}function Ks(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Vd(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Vd(s,o,u,c,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function If(s){return-1!==s}function hu(s){return 32767&s}function wr(s,o){let u=function $g(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let fu=!0;function Ud(s){const o=fu;return fu=s,o}let Si=0;const Ze={};function Gt(s,o){const u=Zs(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,da(c.data,s),da(o,null),da(c.blueprint,null));const d=Er(s,o),g=s.injectorIndex;if(If(d)){const v=hu(d),I=wr(d,o),C=I[1].data;for(let S=0;S<8;S++)o[g+S]=I[v+S]|C[v+S]}return o[g+8]=d,g}function da(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Zs(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Er(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=xo(d),null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function cl(s,o,u){!function Ht(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Y)&&(c=u[Y]),null==c&&(c=u[Y]=Si++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function pu(s,o,u){if(u&pt.Optional)return s;Ee()}function jd(s,o,u,c){if(u&pt.Optional&&void 0===c&&(c=null),0==(u&(pt.Self|pt.Host))){const d=s[9],g=Fn(void 0);try{return d?d.get(o,c,u&pt.Optional):Gi(o,c,u&pt.Optional)}finally{Fn(g)}}return pu(c,0,u)}function Ys(s,o,u,c=pt.Default,d){if(null!==s){if(1024&o[2]){const v=function Hd(s,o,u,c,d){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=oc(g,v,u,c|pt.Self,Ze);if(I!==Ze)return I;let C=g.parent;if(!C){const S=v[21];if(S){const R=S.get(u,Ze,c);if(R!==Ze)return R}C=xo(v),v=v[15]}g=C}return d}(s,o,u,c,Ze);if(v!==Ze)return v}const g=oc(s,o,u,c,Ze);if(g!==Ze)return g}return jd(o,u,c,d)}function oc(s,o,u,c,d){const g=function ac(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Y)?s[Y]:void 0;return"number"==typeof o?o>=0?255&o:mu:o}(u);if("function"==typeof g){if(!ua(o,s,c))return c&pt.Host?pu(d,0,c):jd(o,u,c,d);try{const v=g(c);if(null!=v||c&pt.Optional)return v;Ee()}finally{al()}}else if("number"==typeof g){let v=null,I=Zs(s,o),C=-1,S=c&pt.Host?o[16][6]:null;for((-1===I||c&pt.SkipSelf)&&(C=-1===I?Er(s,o):o[I+8],-1!==C&&gu(c,!1)?(v=o[1],I=hu(C),o=wr(C,o)):I=-1);-1!==I;){const R=o[1];if(ha(g,I,R.data)){const F=fi(I,o,u,v,c,S);if(F!==Ze)return F}C=o[I+8],-1!==C&&gu(c,o[1].data[I+8]===S)&&ha(g,I,o)?(v=R,I=hu(C),o=wr(C,o)):I=-1}}return d}function fi(s,o,u,c,d,g){const v=o[1],I=v.data[s+8],R=Je(I,v,u,null==c?wo(I)&&fu:c!=v&&0!=(3&I.type),d&pt.Host&&g===I);return null!==R?Mo(o,v,R,I):Ze}function Je(s,o,u,c,d){const g=s.providerIndexes,v=o.data,I=1048575&g,C=s.directiveStart,R=g>>20,q=d?I+R:s.directiveEnd;for(let ee=c?I:I+R;ee<q;ee++){const Ce=v[ee];if(ee<C&&u===Ce||ee>=C&&Ce.type===u)return ee}if(d){const ee=v[C];if(ee&&ci(ee)&&ee.type===u)return C}return null}function Mo(s,o,u,c){let d=s[u];const g=o.data;if(function wf(s){return s instanceof ca}(d)){const v=d;v.resolving&&function Ye(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${s}${u}`)}(function pe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ve(s)}(g[u]));const I=Ud(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?Fn(v.injectImpl):null;ua(s,c,pt.Default);try{d=s[u]=v.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function sc(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=qi(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==C&&Fn(C),Ud(I),v.resolving=!1,al()}}return d}function ha(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function gu(s,o){return!(s&pt.Self||s&pt.Host&&o)}class ln{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Ys(this._tNode,this._lView,o,c,u)}}function mu(){return new ln(En(),De())}function Ai(s){return An(()=>{const o=s.prototype.constructor,u=o[Vt]||dl(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[Vt]||dl(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function dl(s){return Ue(s)?()=>{const o=dl(X(s));return o&&o()}:Di(s)}function xo(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Qs(s){return function Cf(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if(du(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(En(),s)}const Mi="__parameters__";function Fr(s,o,u){return An(()=>{const c=function fa(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(C,S,R){const F=C.hasOwnProperty(Mi)?C[Mi]:Object.defineProperty(C,Mi,{value:[]})[Mi];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(v),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class gt{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Jt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Bn(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Bn(c,o)):o!==s&&o.push(c)}return o}function Vr(s,o){s.forEach(u=>Array.isArray(u)?Vr(u,o):o(u))}function lc(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function pa(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function _u(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function on(s,o,u){let c=ko(s,o);return c>=0?s[1|c]=u:(c=~c,function cc(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function ya(s,o){const u=ko(s,o);if(u>=0)return s[1|u]}function ko(s,o){return function hc(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),v=s[g<<u];if(o===v)return g<<u;v>o?d=g:c=g+1}return~(d<<u)}(s,o,1)}const Po={},Cs="__NG_DI_FLAG__",Xi="ngTempTokenPath",Oo=/\n/gm,eo="__source";let Zr;function Ri(s){const o=Zr;return Zr=s,o}function Wd(s,o=pt.Default){if(void 0===Zr)throw new Ie(-203,!1);return null===Zr?Gi(s,void 0,o):Zr.get(s,o&pt.Optional?null:void 0,o)}function In(s,o=pt.Default){return(function Ci(){return gn}()||Wd)(X(s),o)}function qd(s,o=pt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),In(s,o)}function Cu(s){const o=[];for(let u=0;u<s.length;u++){const c=X(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Ie(900,!1);let d,g=pt.Default;for(let v=0;v<c.length;v++){const I=c[v],C=T(I);"number"==typeof C?-1===C?d=I.token:g|=C:d=I}o.push(In(d,g))}else o.push(In(c))}return o}function b(s,o){return s[Cs]=o,s.prototype[Cs]=o,s}function T(s){return s[Cs]}const ie=b(Fr("Optional"),8),He=b(Fr("SkipSelf"),4);let va;function U_(s){va=s}class wa{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Lo(s){return s instanceof wa?s.changingThisBreaksApplicationSecurity:s}const kf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,gl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var nr=(()=>((nr=nr||{})[nr.NONE=0]="NONE",nr[nr.HTML=1]="HTML",nr[nr.STYLE=2]="STYLE",nr[nr.SCRIPT=3]="SCRIPT",nr[nr.URL=4]="URL",nr[nr.RESOURCE_URL=5]="RESOURCE_URL",nr))();function ih(s){const o=function Vo(){const s=De();return s&&s[12]}();return o?o.sanitize(nr.URL,s)||"":function wc(s,o){const u=function xf(s){return s instanceof wa&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?Lo(s):function Tu(s){return(s=String(s)).match(kf)||s.match(gl)?s:"unsafe:"+s}(ve(s))}const Ur=new gt("ENVIRONMENT_INITIALIZER"),sh=new gt("INJECTOR",-1),Lf=new gt("INJECTOR_DEF_TYPES");class oh{get(o,u=Po){if(u===Po){const c=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw c.name="NullInjectorError",c}return u}}function Q_(...s){return{\u0275providers:Jr(0,s)}}function Jr(s,...o){const u=[],c=new Set;let d;return Vr(o,g=>{const v=g;ah(v,u,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&Uo(d,u),u}function Uo(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];Vr(d,g=>{o.push(g)})}}function ah(s,o,u,c){if(!(s=X(s)))return!1;let d=null,g=kr(s);const v=!g&&rt(s);if(g||v){if(v&&!v.standalone)return!1;d=s}else{const C=s.ngModule;if(g=kr(C),!g)return!1;d=C}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of C)ah(S,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let S;c.add(d);try{Vr(g.imports,R=>{ah(R,o,u,c)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&Uo(S,o)}if(!I){const S=Di(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:Pt},{provide:Lf,useValue:d,multi:!0},{provide:Ur,useValue:()=>In(d),multi:!0})}const C=g.providers;null==C||I||Vr(C,R=>{o.push(R)})}}return d!==s&&void 0!==s.providers}const vl=he({provide:String,useValue:he});function Bo(s){return null!==s&&"object"==typeof s&&vl in s}function bs(s){return"function"==typeof s}const uh=new gt("Set Injector scope."),lh={},J_={};let Uf;function Tc(){return void 0===Uf&&(Uf=new oh),Uf}class rr{}class Bf extends rr{constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gf(o,v=>this.processProvider(v)),this.records.set(sh,Au(void 0,this)),d.has("environment")&&this.records.set(rr,Au(void 0,this));const g=this.records.get(uh);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Lf.multi,Pt,pt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Ri(this),c=Fn(void 0);try{return o()}finally{Ri(u),Fn(c)}}get(o,u=Po,c=pt.Default){this.assertNotDestroyed();const d=Ri(this),g=Fn(void 0);try{if(!(c&pt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function Hf(s){return"function"==typeof s||"object"==typeof s&&s instanceof gt}(o)&&un(o);I=C&&this.injectableDefInScope(C)?Au(Sc(o),lh):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&pt.Self?Tc():this.parent).get(o,u=c&pt.Optional&&u===Po?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Xi]=v[Xi]||[]).unshift(fe(o)),d)throw v;return function x(s,o,u,c){const d=s[Xi];throw o[eo]&&d.unshift(o[eo]),s.message=function V(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=fe(o);if(Array.isArray(o))d=o.map(fe).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):fe(I)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(Oo,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Xi]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Fn(g),Ri(d)}}resolveInjectorInitializers(){const o=Ri(this),u=Fn(void 0);try{const c=this.get(Ur.multi,Pt,pt.Self);for(const d of c)d()}finally{Ri(o),Fn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(fe(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let u=bs(o=X(o))?o:X(o&&o.provide);const c=function ns(s){return Bo(s)?Au(void 0,s.useValue):Au(Ds(s),lh)}(o);if(bs(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Au(void 0,lh,!0),d.factory=()=>Cu(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===lh&&(u.value=J_,u.value=u.factory()),"object"==typeof u.value&&u.value&&function X_(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=X(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Sc(s){const o=un(s),u=null!==o?o.factory:Di(s);if(null!==u)return u;if(s instanceof gt)throw new Ie(204,!1);if(s instanceof Function)return function jf(s){const o=s.length;if(o>0)throw _u(o,"?"),new Ie(204,!1);const u=function ai(s){const o=s&&(s[Hi]||s[ui]);if(o){const u=function Tr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Ie(204,!1)}function Ds(s,o,u){let c;if(bs(s)){const d=X(s);return Di(d)||Sc(d)}if(Bo(s))c=()=>X(s.useValue);else if(function Vf(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Cu(s.deps||[]));else if(function im(s){return!(!s||!s.useExisting)}(s))c=()=>In(X(s.useExisting));else{const d=X(s&&(s.useClass||s.provide));if(!function sm(s){return!!s.deps}(s))return Di(d)||Sc(d);c=()=>new d(...Cu(s.deps))}return c}function Au(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function ev(s){return!!s.\u0275providers}function Gf(s,o){for(const u of s)Array.isArray(u)?Gf(u,o):ev(u)?Gf(u.\u0275providers,o):o(u)}class om{}class E{resolveComponentFactory(o){throw function _(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let M=(()=>{class s{}return s.NULL=new E,s})();function N(){return K(En(),De())}function K(s,o){return new le(Kr(s,o))}let le=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=N,s})();function Ve(s){return s instanceof le?s.nativeElement:s}class _t{}let lt=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function ir(){const s=De(),u=vr(En().index,s);return(fr(u)?u:s)[11]}(),s})(),rs=(()=>{class s{}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:()=>null}),s})();class Ia{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const wl=new Ia("14.1.3"),El={};function lm(s){return s.ngOriginalError}class ch{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&lm(o);for(;u&&lm(u);)u=lm(u);return u||null}}const cm=new Map;let uv=0;const hm="__ngContext__";function Br(s,o){fr(o)?(s[hm]=o[20],function tI(s){cm.set(s[20],s)}(o)):s[hm]=o}function xc(s){const o=s[hm];return"number"==typeof o?function bT(s){return cm.get(s)||null}(o):o||null}function cv(s){const o=xc(s);return o?fr(o)?o:o.lView:null}const xT=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Ke))();function Mu(s){return s instanceof Function?s():s}var Xr=(()=>((Xr=Xr||{})[Xr.Important=1]="Important",Xr[Xr.DashCase=2]="DashCase",Xr))();function pm(s,o){return undefined(s,o)}function qf(s){const o=s[3];return qr(o)?o[3]:o}function fv(s){return fI(s[13])}function pv(s){return fI(s[4])}function fI(s){for(;null!==s&&!qr(s);)s=s[4];return s}function fh(s,o,u,c,d){if(null!=c){let g,v=!1;qr(c)?g=c:fr(c)&&(v=!0,c=c[0]);const I=Un(c);0===s&&null!==u?null==d?Tn(o,u,I):xu(o,u,I,d||null,!0):1===s&&null!==u?xu(o,u,I,d||null,!0):2===s?function HT(s,o,u){const c=ym(s,o);c&&function mI(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=g&&function jo(s,o,u,c,d){const g=u[7];g!==Un(u)&&fh(o,s,c,g,d);for(let I=10;I<u.length;I++){const C=u[I];wm(C[1],C,s,o,c,g)}}(o,s,g,u,d)}}function mm(s,o,u){return s.createElement(o,u)}function ye(s,o){const u=s[9],c=u.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,sa(d,-1)),u.splice(c,1)}function $f(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&ye(d,c),o>0&&(s[u-1][4]=c[4]);const g=pa(s,10+o);!function OT(s,o){wm(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Kf(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&wm(s,o,u,3,null,null),function LT(s){let o=s[13];if(!o)return mv(s[1],s);for(;o;){let u=null;if(fr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)fr(o)&&mv(o[1],o),o=o[3];null===o&&(o=s),fr(o)&&mv(o[1],o),u=o&&o[4]}o=u}}(o)}}function mv(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function gI(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof ca)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],C=g[v+1];try{C.call(I)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function UT(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+1],I="function"==typeof v?v(o):Un(o[v]),C=c[d=u[g+2]],S=u[g+3];"boolean"==typeof S?I.removeEventListener(u[g],C,S):S>=0?c[d=S]():c[d=-S].unsubscribe(),g+=2}else{const v=c[d=u[g+1]];u[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&qr(o[3])){u!==o[3]&&ye(u,o);const c=o[19];null!==c&&c.detachView(s)}!function DT(s){cm.delete(s[20])}(o)}}function yv(s,o,u){return function _v(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===nt.None||d===nt.Emulated)return null}return Kr(c,u)}(s,o.parent,u)}function xu(s,o,u,c,d){s.insertBefore(o,u,c,d)}function Tn(s,o,u){s.appendChild(o,u)}function gi(s,o,u,c,d){null!==c?xu(s,o,u,c,d):Tn(s,o,u)}function ym(s,o){return s.parentNode(o)}function yI(s,o,u){return BT(s,o,u)}let BT=function _m(s,o,u){return 40&s.type?Kr(s,u):null};function vm(s,o,u,c){const d=yv(s,c,o),g=o[11],I=yI(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)gi(g,d,u[C],I,!1);else gi(g,d,u,I,!1)}function wv(s,o){if(null!==o){const u=o.type;if(3&u)return Kr(o,s);if(4&u)return wI(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return wv(s,c);{const d=s[o.index];return qr(d)?wI(-1,d):Un(d)}}if(32&u)return pm(o,s)()||Un(s[o.index]);{const c=jT(s,o);return null!==c?Array.isArray(c)?c[0]:wv(qf(s[16]),c):wv(s,o.next)}}return null}function jT(s,o){return null!==o?s[16][6].projection[o.projection]:null}function wI(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return wv(c,d)}return o[7]}function EI(s,o,u,c,d,g,v){for(;null!=u;){const I=c[u.index],C=u.type;if(v&&0===o&&(I&&Br(Un(I),c),u.flags|=4),64!=(64&u.flags))if(8&C)EI(s,o,u.child,c,d,g,!1),fh(o,s,d,I,g);else if(32&C){const S=pm(u,c);let R;for(;R=S();)fh(o,s,d,R,g);fh(o,s,d,I,g)}else 16&C?GT(s,o,c,u,d,g):fh(o,s,d,I,g);u=v?u.projectionNext:u.next}}function wm(s,o,u,c,d,g){EI(u,c,s.firstChild,o,d,g,!1)}function GT(s,o,u,c,d,g){const v=u[16],C=v[6].projection[c.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)fh(o,s,d,C[S],g);else EI(s,o,C,v[3],d,g,!0)}function P(s,o,u){s.setAttribute(o,"style",u)}function Ts(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function Ev(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}const II="ng-template";function jr(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==Ev(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function ao(s){return 4===s.type&&s.value!==II}function Em(s,o,u){return o===(4!==s.type||u?s.value:II)}function Iv(s,o,u){let c=4;const d=s.attrs||[],g=function WT(s){for(let o=0;o<s.length;o++)if(du(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!Em(s,C,u)||""===C&&1===o.length){if(Ho(c))return!1;v=!0}}else{const S=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!jr(s.attrs,S,u)){if(Ho(c))return!1;v=!0}continue}const F=zT(8&c?"class":C,d,ao(s),u);if(-1===F){if(Ho(c))return!1;v=!0;continue}if(""!==S){let q;q=F>g?"":d[F+1].toLowerCase();const ee=8&c?q:null;if(ee&&-1!==Ev(ee,S,0)||2&c&&S!==q){if(Ho(c))return!1;v=!0}}}}else{if(!v&&!Ho(c)&&!Ho(C))return!1;if(v&&Ho(C))continue;v=!1,c=C|1&c}}return Ho(c)||v}function Ho(s){return 0==(1&s)}function zT(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function qT(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function CI(s,o,u=!1){for(let c=0;c<o.length;c++)if(Iv(s,o[c],u))return!0;return!1}function $T(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let d=0;d<s.length;d++)if(s[d]!==c[d])continue e;return!0}}return!1}function DI(s,o){return s?":not("+o.trim()+")":o}function Oi(s){let o=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Ho(v)&&(o+=DI(g,d),d=""),c=v,g=g||!Ho(c);u++}return""!==d&&(o+=DI(g,d)),o}const xt={};function Zf(s){Cm(Ft(),De(),tr()+s,!1)}function Cm(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&_f(o,g,u)}else{const g=s.preOrderHooks;null!==g&&vf(o,g,0,u)}hi(u)}function bv(s,o=null,u=null,c){const d=xI(s,o,u,c);return d.resolveInjectorInitializers(),d}function xI(s,o=null,u=null,c,d=new Set){const g=[u||Pt,Q_(s)];return c=c||("object"==typeof s?void 0:fe(s)),new Bf(g,o||Tc(),c||null,d)}let Rc=(()=>{class s{static create(u,c){if(Array.isArray(u))return bv({name:""},c,u,"");{const d=u.name??"";return bv({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=Po,s.NULL=new oh,s.\u0275prov=Jt({token:s,providedIn:"any",factory:()=>In(sh)}),s.__NG_ELEMENT_ID__=-1,s})();function mh(s,o=pt.Default){const u=De();return null===u?In(s,o):Ys(En(),u,X(s),o)}function VI(){throw new Error("invalid")}function Am(s,o){return s<<17|o<<2}function Go(s){return s>>17&32767}function xm(s){return 2|s}function Ca(s){return(131068&s)>>2}function Xf(s,o){return-131069&s|o<<2}function Pv(s){return 1|s}function Hv(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],g=u[c+1];if(-1!==g){const v=s.data[g];ou(d),v.contentQueries(2,o[g],g)}}}function Pm(s,o,u,c,d,g,v,I,C,S,R){const F=o.blueprint.slice();return F[0]=d,F[2]=76|c,(null!==R||s&&1024&s[2])&&(F[2]|=1024),Es(F),F[3]=F[15]=s,F[8]=u,F[10]=v||s&&s[10],F[11]=I||s&&s[11],F[12]=C||s&&s[12]||null,F[9]=S||s&&s[9]||null,F[6]=g,F[20]=function eI(){return uv++}(),F[21]=R,F[16]=2==o.type?s[16]:F,F}function sp(s,o,u,c,d){let g=s.data[o];if(null===g)g=function Om(s,o,u,c,d){const g=eu(),v=tu(),C=s.data[o]=function Fm(s,o,u,c,d,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,u,c,d),function ec(){return wt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const v=function qs(){const s=wt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return di(g,!0),g}function yh(s,o,u,c){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function uo(s,o,u){rl(o);try{const c=s.viewQuery;null!==c&&ow(1,c,u);const d=s.template;null!==d&&Rt(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Hv(s,o),s.staticViewQueries&&ow(2,s.viewQuery,u);const g=s.components;null!==g&&function ZI(s,o){for(let u=0;u<o.length;u++)ew(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,la()}}function Qe(s,o,u,c){const d=o[2];if(128!=(128&d)){rl(o);try{Es(o),function iu(s){return wt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Rt(s,o,u,2,c);const v=3==(3&d);if(v){const S=s.preOrderCheckHooks;null!==S&&_f(o,S,null)}else{const S=s.preOrderHooks;null!==S&&vf(o,S,0,null),uu(o,0)}if(function iC(s){for(let o=fv(s);null!==o;o=pv(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],g=d[3];0==(512&d[2])&&sa(g,1),d[2]|=512}}}(o),function cS(s){for(let o=fv(s);null!==o;o=pv(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Ti(c)&&Qe(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&Hv(s,o),v){const S=s.contentCheckHooks;null!==S&&_f(o,S)}else{const S=s.contentHooks;null!==S&&vf(o,S,1),uu(o,1)}!function oS(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)hi(~d);else{const g=d,v=u[++c],I=u[++c];kd(v,g),I(2,o[g])}}}finally{hi(-1)}}(s,o);const I=s.components;null!==I&&function Gv(s,o){for(let u=0;u<o.length;u++)Lm(s,o[u])}(o,I);const C=s.viewQuery;if(null!==C&&ow(2,C,c),v){const S=s.viewCheckHooks;null!==S&&_f(o,S)}else{const S=s.viewHooks;null!==S&&vf(o,S,2),uu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,sa(o[3],-1))}finally{la()}}}function zv(s,o,u,c){const d=o[10],v=ia(o);try{!v&&d.begin&&d.begin(),v&&uo(s,o,c),Qe(s,o,u,c)}finally{!v&&d.end&&d.end()}}function Rt(s,o,u,c,d){const g=tr(),v=2&c;try{hi(-1),v&&o.length>22&&Cm(s,o,22,!1),u(c,d)}finally{hi(g)}}function ap(s,o,u){!Ws()||(function Fi(s,o,u,c){const d=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||Gt(u,o),Br(c,o);const v=u.initialInputs;for(let I=d;I<g;I++){const C=s.data[I],S=ci(C);S&&Qv(o,u,C);const R=Mo(o,s,I,u);Br(R,o),null!==v&&_h(0,I-d,R,C,0,v),S&&(vr(u.index,o)[8]=R)}}(s,o,u,Kr(u,o)),128==(128&u.flags)&&function qv(s,o,u){const c=u.directiveStart,d=u.directiveEnd,g=u.index,v=function su(){return wt.lFrame.currentDirectiveIndex}();try{hi(g);for(let I=c;I<d;I++){const C=s.data[I],S=o[I];nc(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&mi(C,S)}}finally{hi(-1),nc(v)}}(s,o,u))}function Pc(s,o,u=Kr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function YI(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=up(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function up(s,o,u,c,d,g,v,I,C,S){const R=22+c,F=R+d,q=function aS(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:xt);return u}(R,F),ee="function"==typeof S?S():S;return q[1]={type:s,blueprint:q,template:u,queries:null,viewQuery:I,declTNode:o,data:q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:ee,incompleteFirstPass:!1}}function Hr(s,o,u,c){const d=oC(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&hp(s).push(c,d.length-1))}function Gr(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function Nu(s,o){const c=o.directiveEnd,d=s.data,g=o.attrs,v=[];let I=null,C=null;for(let S=o.directiveStart;S<c;S++){const R=d[S],F=R.inputs,q=null===g||ao(o)?null:nC(F,g);v.push(q),I=Gr(F,S,I),C=Gr(R.outputs,S,C)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=I,o.outputs=C}function Ss(s,o,u,c,d,g,v,I){const C=Kr(o,u);let R,S=o.inputs;!I&&null!=S&&(R=S[c])?(pp(s,u,R,c,d),wo(o)&&Wv(u,o.index)):3&o.type&&(c=function lS(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,g.setProperty(C,c,d))}function Wv(s,o){const u=vr(o,s);16&u[2]||(u[2]|=32)}function lp(s,o,u,c){let d=!1;if(Ws()){const g=function eC(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];CI(u,v.selectors,!1)&&(d||(d=[]),cl(Gt(u,o),s,v.type),ci(v)?($v(s,u),d.unshift(v)):d.push(v))}return d}(s,o,u),v=null===c?null:{"":-1};if(null!==g){d=!0,Zv(u,s.data.length,g.length);for(let R=0;R<g.length;R++){const F=g[R];F.providersResolver&&F.providersResolver(F)}let I=!1,C=!1,S=yh(s,o,g.length,null);for(let R=0;R<g.length;R++){const F=g[R];u.mergedAttrs=Ks(u.mergedAttrs,F.hostAttrs),Yv(s,u,o,S,F),tC(S,F,v),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const q=F.type.prototype;!I&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),I=!0),!C&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),S++}Nu(s,u)}v&&function Kv(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new Ie(-301,!1);c.push(o[d],g)}}}(u,c,v)}return u.mergedAttrs=Ks(u.mergedAttrs,u.attrs),d}function cp(s,o,u,c,d,g){const v=g.hostBindings;if(v){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const C=~o.index;(function XI(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(I)!=C&&I.push(C),I.push(c,d,v)}}function mi(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function $v(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function tC(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;ci(o)&&(u[""]=s)}}function Zv(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Yv(s,o,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=Di(d.type)),v=new ca(g,ci(d),mh);s.blueprint[c]=v,u[c]=v,cp(s,o,0,c,yh(s,u,d.hostVars,xt),d)}function Qv(s,o,u){const c=Kr(o,s),d=YI(u),g=s[10],v=Vm(s,Pm(s,d,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=v}function Da(s,o,u,c,d,g){const v=Kr(s,o);!function Jv(s,o,u,c,d,g,v){if(null==g)s.removeAttribute(o,d,u);else{const I=null==v?ve(g):v(g,c||"",d);s.setAttribute(o,d,I,u)}}(o[11],v,g,s.value,u,c,d)}function _h(s,o,u,c,d,g){const v=g[o];if(null!==v){const I=c.setInput;for(let C=0;C<v.length;){const S=v[C++],R=v[C++],F=v[C++];null!==I?c.setInput(u,F,S,R):u[R]=F}}}function nC(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function Xv(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Lm(s,o){const u=vr(o,s);if(Ti(u)){const c=u[1];48&u[2]?Qe(c,u,c.template,u[8]):u[5]>0&&dp(u)}}function dp(s){for(let c=fv(s);null!==c;c=pv(c))for(let d=10;d<c.length;d++){const g=c[d];if(Ti(g))if(512&g[2]){const v=g[1];Qe(v,g,v.template,g[8])}else g[5]>0&&dp(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=vr(u[c],s);Ti(d)&&d[5]>0&&dp(d)}}function ew(s,o){const u=vr(o,s),c=u[1];(function tw(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),uo(c,u,u[8])}function Vm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function nw(s){for(;s;){s[2]|=32;const o=qf(s);if(jg(s)&&!o)return s;s=o}return null}function sC(s){!function iw(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=cv(u);if(null!==c){const d=c[1];zv(d,c,d.template,u)}}}(s[8])}function ow(s,o,u){ou(0),o(s,u)}const dS=(()=>Promise.resolve(null))();function oC(s){return s[7]||(s[7]=[])}function hp(s){return s.cleanup||(s.cleanup=[])}function jm(s,o){const u=s[9],c=u?u.get(ch,null):null;c&&c.handleError(o)}function pp(s,o,u,c,d){for(let g=0;g<u.length;){const v=u[g++],I=u[g++],C=o[v],S=s.data[v];null!==S.setInput?S.setInput(C,d,c,I):C[I]=d}}function vh(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=ge(d,I):2==g&&(c=ge(c,I+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function gp(s,o,u,c,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(Un(g)),qr(g))for(let I=10;I<g.length;I++){const C=g[I],S=C[1].firstChild;null!==S&&gp(C[1],C,S,c)}const v=u.type;if(8&v)gp(s,o,u.child,c);else if(32&v){const I=pm(u,o);let C;for(;C=I();)c.push(C)}else if(16&v){const I=jT(o,u);if(Array.isArray(I))c.push(...I);else{const C=qf(o[16]);gp(C[1],C,I,c,!0)}}u=d?u.projectionNext:u.next}return c}class wh{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return gp(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(qr(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&($f(o,c),pa(u,c))}this._attachedToViewContainer=!1}Kf(this._lView[1],this._lView)}onDestroy(o){Hr(this._lView[1],this._lView,null,o)}markForCheck(){nw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function sw(s,o,u){const c=o[10];c.begin&&c.begin();try{Qe(s,o,s.template,u)}catch(d){throw jm(o,d),d}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function FT(s,o){wm(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=o}}class hS extends wh{constructor(o){super(o),this._view=o}detectChanges(){sC(this._view)}checkNoChanges(){}get context(){return null}}class Hm extends M{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=rt(o);return new mp(u,this.ngModule)}}function aw(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class aC{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const d=this.injector.get(o,El,c);return d!==El||u===El?d:this.parentInjector.get(o,u,c)}}class mp extends om{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Im(s){return s.map(Oi).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return aw(this.componentDef.inputs)}get outputs(){return aw(this.componentDef.outputs)}create(o,u,c,d){let g=(d=d||this.ngModule)instanceof rr?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new aC(o,g):o,I=v.get(_t,null);if(null===I)throw new Ie(407,!1);const C=v.get(rs,null),S=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=c?function uS(s,o,u){return s.selectRootElement(o,u===nt.ShadowDom)}(S,c,this.componentDef.encapsulation):mm(I.createRenderer(null,this.componentDef),R,function uw(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),q=this.componentDef.onPush?288:272,ee=function dw(s,o){return{components:[],scheduler:s||xT,clean:dS,playerHandler:o||null,flags:0}}(),Ce=up(0,null,null,1,0,null,null,null,null,null),Oe=Pm(null,Ce,ee,q,null,null,I,S,C,v,null);let We,et;rl(Oe);try{const ht=function ti(s,o,u,c,d,g){const v=u[1];u[22]=s;const C=sp(v,22,2,"#host",null),S=C.mergedAttrs=o.hostAttrs;null!==S&&(vh(C,S,!0),null!==s&&(cu(d,s,S),null!==C.classes&&Ts(d,s,C.classes),null!==C.styles&&P(d,s,C.styles)));const R=c.createRenderer(s,o),F=Pm(u,YI(o),null,o.onPush?32:16,u[22],C,c,R,g||null,null,null);return v.firstCreatePass&&(cl(Gt(C,u),v,o.type),$v(v,C),Zv(C,u.length,1)),Vm(u,F),u[22]=F}(F,this.componentDef,Oe,I,S);if(F)if(c)cu(S,F,["ng-version",wl.full]);else{const{attrs:Ne,classes:yt}=function TI(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&u.push(g);else{if(!Ho(d))break;d=g}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ne&&cu(S,F,Ne),yt&&yt.length>0&&Ts(S,F,yt.join(" "))}if(et=Ja(Ce,22),void 0!==u){const Ne=et.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const zt=u[yt];Ne.push(null!=zt?Array.from(zt):null)}}We=function Gm(s,o,u,c,d){const g=u[1],v=function JI(s,o,u){const c=En();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Yv(s,c,o,yh(s,o,1,null),u),Nu(s,c));const d=Mo(o,s,c.directiveStart,c);Br(d,o);const g=Kr(c,o);return g&&Br(g,o),d}(g,u,o);if(c.components.push(v),s[8]=v,null!==d)for(const C of d)C(v,o);if(o.contentQueries){const C=En();o.contentQueries(1,v,C.directiveStart)}const I=En();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(hi(I.index),cp(u[1],I,0,I.directiveStart,I.directiveEnd,o),mi(o,v)),v}(ht,this.componentDef,Oe,ee,[fS]),uo(Ce,Oe,null)}finally{la()}return new cw(this.componentType,We,K(et,Oe),Oe,et)}}class cw extends class tv{}{constructor(o,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new hS(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;pp(g[1],g,d,o,u),Wv(g,this._tNode.index)}}get injector(){return new ln(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function fS(){const s=En();ll(De()[1],s)}function fw(s){let o=function hw(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(ci(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ie(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const v=s;v.inputs=yp(s.inputs),v.declaredInputs=yp(s.declaredInputs),v.outputs=yp(s.outputs);const I=d.hostBindings;I&&gw(s,I);const C=d.viewQuery,S=d.contentQueries;if(C&&pw(s,C),S&&gS(s,S),ce(s.inputs,d.inputs),ce(s.declaredInputs,d.declaredInputs),ce(s.outputs,d.outputs),ci(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(s),I===fw&&(u=!1)}}o=Object.getPrototypeOf(o)}!function pS(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Ks(d.hostAttrs,u=Ks(u,d.hostAttrs))}}(c)}function yp(s){return s===vn?{}:s===Pt?[]:s}function pw(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function gS(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{o(c,d,g),u(c,d,g)}:o}function gw(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let Eh=null;function ku(){if(!Eh){const s=Ke.Symbol;if(s&&s.iterator)Eh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Eh=c)}}}return Eh}function _p(s){return!!Wm(s)&&(Array.isArray(s)||!(s instanceof Map)&&ku()in s)}function Wm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function yi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Pu(s,o,u,c){const d=De();return yi(d,Do(),o)&&(Ft(),Da(Dn(),d,s,o,u,c)),Pu}function Fc(s,o,u,c,d,g){const I=function lo(s,o,u,c){const d=yi(s,o,u);return yi(s,o+1,c)||d}(s,function $i(){return wt.lFrame.bindingIndex}(),u,d);return Is(2),I?o+ve(u)+c+ve(d)+g:xt}function Qm(s,o,u,c,d,g,v,I){const C=De(),S=Ft(),R=s+22,F=S.firstCreatePass?function _S(s,o,u,c,d,g,v,I,C){const S=o.consts,R=sp(o,s,4,v||null,ws(S,I));lp(o,u,R,ws(S,C)),ll(o,R);const F=R.tViews=up(2,R,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,S,C,o,u,c,d,g,v):S.data[R];di(F,!1);const q=C[11].createComment("");vm(S,C,q,F),Br(q,C),Vm(C,C[R]=Xv(q,C,q,F)),Ka(F)&&ap(S,C,F),null!=v&&Pc(C,F,I)}function Xm(s,o,u){const c=De();return yi(c,Do(),o)&&Ss(Ft(),Dn(),c,s,o,c[11],u,!1),Xm}function ey(s,o,u,c,d){const v=d?"class":"style";pp(s,u,o.inputs[v],v,c)}function ty(s,o,u,c){const d=De(),g=Ft(),v=22+s,I=d[11],C=d[v]=mm(I,o,function Od(){return wt.lFrame.currentNamespace}()),S=g.firstCreatePass?function fC(s,o,u,c,d,g,v){const I=o.consts,S=sp(o,s,2,d,ws(I,g));return lp(o,u,S,ws(I,v)),null!==S.attrs&&vh(S,S.attrs,!1),null!==S.mergedAttrs&&vh(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,g,d,0,o,u,c):g.data[v];di(S,!0);const R=S.mergedAttrs;null!==R&&cu(I,C,R);const F=S.classes;null!==F&&Ts(I,C,F);const q=S.styles;return null!==q&&P(I,C,q),64!=(64&S.flags)&&vm(g,d,C,S),0===function el(){return wt.lFrame.elementDepthCount}()&&Br(C,d),function Xl(){wt.lFrame.elementDepthCount++}(),Ka(S)&&(ap(g,d,S),function op(s,o,u){if(Jo(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}(g,S,d)),null!==c&&Pc(d,S),ty}function Cl(){let s=En();tu()?nu():(s=s.parent,di(s,!1));const o=s;!function Co(){wt.lFrame.elementDepthCount--}();const u=Ft();return u.firstCreatePass&&(ll(u,s),Jo(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function pr(s){return 0!=(16&s.flags)}(o)&&ey(u,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ef(s){return 0!=(32&s.flags)}(o)&&ey(u,o,De(),o.stylesWithoutHost,!1),Cl}function ny(s,o,u,c){return ty(s,o,u,c),Cl(),ny}function Cp(s){return!!s&&"function"==typeof s.then}function Bc(s){return!!s&&"function"==typeof s.subscribe}const sy=Bc;function Vu(s,o,u,c){const d=De(),g=Ft(),v=En();return function bl(s,o,u,c,d,g,v,I){const C=Ka(c),R=s.firstCreatePass&&hp(s),F=o[8],q=oC(o);let ee=!0;if(3&c.type||I){const We=Kr(c,o),et=I?I(We):We,ht=q.length,Ne=I?zt=>I(Un(zt[c.index])):c.index;let yt=null;if(!I&&C&&(yt=function wS(s,o,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===u&&d[g+1]===c){const I=o[7],C=d[g+2];return I.length>C?I[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,c.index)),null!==yt)(yt.__ngLastListenerFn__||yt).__ngNextListenerFn__=g,yt.__ngLastListenerFn__=g,ee=!1;else{g=bp(c,o,F,g,!1);const zt=u.listen(et,d,g);q.push(g,zt),R&&R.push(d,Ne,ht,ht+1)}}else g=bp(c,o,F,g,!1);const Ce=c.outputs;let Oe;if(ee&&null!==Ce&&(Oe=Ce[d])){const We=Oe.length;if(We)for(let et=0;et<We;et+=2){const kn=o[Oe[et]][Oe[et+1]].subscribe(g),$u=q.length;q.push(g,kn),R&&R.push(d,c.index,$u,-($u+1))}}}(g,d,d[11],v,s,o,0,c),Vu}function Aa(s,o,u,c){try{return!1!==u(c)}catch(d){return jm(s,d),!1}}function bp(s,o,u,c,d){return function g(v){if(v===Function)return c;nw(2&s.flags?vr(s.index,o):o);let C=Aa(o,0,c,v),S=g.__ngNextListenerFn__;for(;S;)C=Aa(o,0,S,v)&&C,S=S.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Dp(s=1){return function mf(s){return(wt.lFrame.contextLView=function ul(s,o){for(;s>0;)o=o[15],s--;return o}(s,wt.lFrame.contextLView))[8]}(s)}function oy(s,o){let u=null;const c=function bI(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let d=0;d<o.length;d++){const g=o[d];if("*"!==g){if(null===c?CI(s,g,!0):$T(c,g))return d}else u=d}return u}function Ew(s){const o=De()[16][6];if(!o.projection){const c=o.projection=_u(s?s.length:1,null),d=c.slice();let g=o.child;for(;null!==g;){const v=s?oy(g,s):0;null!==v&&(d[v]?d[v].projectionNext=g:c[v]=g,d[v]=g),g=g.next}}}function Rn(s,o=0,u){const c=De(),d=Ft(),g=sp(d,22+s,16,null,u||null);null===g.projection&&(g.projection=o),nu(),64!=(64&g.flags)&&function ER(s,o,u){GT(o[11],0,o,u,yv(s,u,o),yI(u.parent||o[6],u,o))}(d,c,g)}function Cw(s,o,u,c,d,g,v){const I=De(),C=Fc(I,o,u,c,d,g);return C!==xt&&Ss(Ft(),Dn(),I,s,C,I[11],v,!1),Cw}function Dw(s,o,u,c,d){const g=s[u+1],v=null===o;let I=c?Go(g):Ca(g),C=!1;for(;0!==I&&(!1===C||v);){const R=s[I+1];_C(s[I],o)&&(C=!0,s[I+1]=c?Pv(R):xm(R)),I=c?Go(R):Ca(R)}C&&(s[u+1]=c?xm(g):Pv(g))}function _C(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ko(s,o)>=0}function Dh(s,o){return function Vi(s,o,u,c){const d=De(),g=Ft(),v=Is(2);g.firstUpdatePass&&function gr(s,o,u,c){const d=s.data;if(null===d[u+1]){const g=d[tr()],v=function IC(s,o){return o>=s.expandoStartIndex}(s,u);(function ly(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!v&&(o=!1),o=function CC(s,o,u,c){const d=function To(s){const o=wt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Th(u=kw(null,s,o,u,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=kw(d,s,o,u,c),null===g){let C=function bS(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Ca(c))return s[Go(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=kw(null,s,o,C[1],c),C=Th(C,o.attrs,c),function DS(s,o,u,c){s[Go(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else g=function TS(s,o,u){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=Th(c,s[g].hostAttrs,u);return Th(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,c),function Sp(s,o,u,c,d,g){let v=g?o.classBindings:o.styleBindings,I=Go(v),C=Ca(v);s[c]=u;let R,S=!1;if(Array.isArray(u)){const F=u;R=F[1],(null===R||ko(F,R)>0)&&(S=!0)}else R=u;if(d)if(0!==C){const q=Go(s[I+1]);s[c+1]=Am(q,I),0!==q&&(s[q+1]=Xf(s[q+1],c)),s[I+1]=function Mm(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=Am(I,0),0!==I&&(s[I+1]=Xf(s[I+1],c)),I=c;else s[c+1]=Am(C,0),0===I?I=c:s[C+1]=Xf(s[C+1],c),C=c;S&&(s[c+1]=xm(s[c+1])),Dw(s,R,c,!0),Dw(s,R,c,!1),function Dl(s,o,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&ko(g,o)>=0&&(u[c+1]=Pv(u[c+1]))}(o,R,s,c,g),v=Am(I,C),g?o.classBindings=v:o.styleBindings=v}(d,g,o,u,v,c)}}(g,s,v,c),o!==xt&&yi(d,v,o)&&function Ow(s,o,u,c,d,g,v,I){if(!(3&o.type))return;const C=s.data,S=C[I+1];Ap(function jI(s){return 1==(1&s)}(S)?Ma(C,o,u,d,Ca(S),v):void 0)||(Ap(g)||function BI(s){return 2==(2&s)}(S)&&(g=Ma(C,null,u,d,I,v)),function Ru(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:Xr.DashCase;null==d?s.removeStyle(u,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Xr.Important),s.setStyle(u,c,d,g))}}(c,v,Io(tr(),u),d,g))}(g,g.data[tr()],d,d[11],s,d[v+1]=function SS(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(Lo(s)))),s}(o,u),c,v)}(s,o,null,!0),Dh}function kw(s,o,u,c,d){let g=null;const v=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<v&&(g=o[I],c=Th(c,g.hostAttrs,d),g!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function Th(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),on(s,v,!!u||o[++g]))}return void 0===s?null:s}function Ma(s,o,u,c,d,g){const v=null===o;let I;for(;d>0;){const C=s[d],S=Array.isArray(C),R=S?C[1]:C,F=null===R;let q=u[d+1];q===xt&&(q=F?Pt:void 0);let ee=F?ya(q,c):R===c?q:void 0;if(S&&!Ap(ee)&&(ee=ya(C,c)),Ap(ee)&&(I=ee,v))return I;const Ce=s[d+1];d=v?Go(Ce):Ca(Ce)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(I=ya(C,c))}return I}function Ap(s){return void 0!==s}function Sh(s,o=""){const u=De(),c=Ft(),d=s+22,g=c.firstCreatePass?sp(c,d,1,o,null):c.data[d],v=u[d]=function gm(s,o){return s.createText(o)}(u[11],o);vm(c,u,v,g),di(g,!1)}function cy(s){return Mp("",s,""),cy}function Mp(s,o,u){const c=De(),d=function Ou(s,o,u,c){return yi(s,Do(),u)?o+ve(u)+c:xt}(c,s,o,u);return d!==xt&&function zo(s,o,u){const c=Io(o,s);!function pI(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,tr(),d),Mp}const ss=void 0;var MS=["en",[["a","p"],["AM","PM"],ss],[["AM","PM"],ss,ss],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ss,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ss,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ss,"{1} 'at' {0}",ss],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Gw(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Pe={};function Uu(s){const o=function de(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=bt(o);if(u)return u;const c=o.split("-")[0];if(u=bt(c),u)return u;if("en"===c)return MS;throw new Ie(701,!1)}function it(s){return Uu(s)[we.PluralCase]}function bt(s){return s in Pe||(Pe[s]=Ke.ng&&Ke.ng.common&&Ke.ng.common.locales&&Ke.ng.common.locales[s]),Pe[s]}var we=(()=>((we=we||{})[we.LocaleId=0]="LocaleId",we[we.DayPeriodsFormat=1]="DayPeriodsFormat",we[we.DayPeriodsStandalone=2]="DayPeriodsStandalone",we[we.DaysFormat=3]="DaysFormat",we[we.DaysStandalone=4]="DaysStandalone",we[we.MonthsFormat=5]="MonthsFormat",we[we.MonthsStandalone=6]="MonthsStandalone",we[we.Eras=7]="Eras",we[we.FirstDayOfWeek=8]="FirstDayOfWeek",we[we.WeekendRange=9]="WeekendRange",we[we.DateFormat=10]="DateFormat",we[we.TimeFormat=11]="TimeFormat",we[we.DateTimeFormat=12]="DateTimeFormat",we[we.NumberSymbols=13]="NumberSymbols",we[we.NumberFormats=14]="NumberFormats",we[we.CurrencyCode=15]="CurrencyCode",we[we.CurrencySymbol=16]="CurrencySymbol",we[we.CurrencyName=17]="CurrencyName",we[we.Currencies=18]="Currencies",we[we.Directionality=19]="Directionality",we[we.PluralCase=20]="PluralCase",we[we.ExtraData=21]="ExtraData",we))();const zc="en-US";let zw=zc;function Sy(s,o,u,c,d){if(s=X(s),Array.isArray(s))for(let g=0;g<s.length;g++)Sy(s[g],o,u,c,d);else{const g=Ft(),v=De();let I=bs(s)?s:X(s.provide),C=Ds(s);const S=En(),R=1048575&S.providerIndexes,F=S.directiveStart,q=S.providerIndexes>>20;if(bs(s)||!s.multi){const ee=new ca(C,d,mh),Ce=Ay(I,o,d?R:R+q,F);-1===Ce?(cl(Gt(S,v),g,I),Xw(g,s,o.length),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),u.push(ee),v.push(ee)):(u[Ce]=ee,v[Ce]=ee)}else{const ee=Ay(I,o,R+q,F),Ce=Ay(I,o,R,R+q),Oe=ee>=0&&u[ee],We=Ce>=0&&u[Ce];if(d&&!We||!d&&!Oe){cl(Gt(S,v),g,I);const et=function Sn(s,o,u,c,d){const g=new ca(s,u,mh);return g.multi=[],g.index=o,g.componentProviders=0,nb(g,d,c&&!u),g}(d?ri:rb,u.length,d,c,C);!d&&We&&(u[Ce].providerFactory=et),Xw(g,s,o.length,0),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),u.push(et),v.push(et)}else Xw(g,s,ee>-1?ee:Ce,nb(u[d?Ce:ee],C,!d&&c));!d&&c&&We&&u[Ce].componentProviders++}}}function Xw(s,o,u,c){const d=bs(o),g=function ts(s){return!!s.useClass}(o);if(d||g){const C=(g?X(o.useClass):o).prototype.ngOnDestroy;if(C){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=S.indexOf(u);-1===R?S.push(u,[c,C]):S[R+1].push(c,C)}else S.push(u,C)}}}function nb(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Ay(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function rb(s,o,u,c){return My(this.multi,[])}function ri(s,o,u,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Mo(u,u[1],this.providerFactory.index,c);g=I.slice(0,v),My(d,g);for(let C=v;C<I.length;C++)g.push(I[C])}else g=[],My(d,g);return g}function My(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function ib(s,o=[]){return u=>{u.providersResolver=(c,d)=>function jp(s,o,u){const c=Ft();if(c.firstCreatePass){const d=ci(s);Sy(u,c.data,c.blueprint,d,!0),Sy(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Jc{}class kl{}function OS(s,o){return new Hp(s,o??null)}class Hp extends Jc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hm(this);const c=dr(o);this._bootstrapComponents=Mu(c.bootstrap),this._r3Injector=xI(o,u,[{provide:Jc,useValue:this},{provide:M,useValue:this.componentFactoryResolver}],fe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Rh extends kl{constructor(o){super(),this.moduleType=o}create(o){return new Hp(this.moduleType,o)}}class sb extends Jc{constructor(o,u,c){super(),this.componentFactoryResolver=new Hm(this),this.instance=null;const d=new Bf([...o,{provide:Jc,useValue:this},{provide:M,useValue:this.componentFactoryResolver}],u||Tc(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Ry(s,o,u=null){return new sb(s,o,u).injector}function Ny(s,o,u){const c=function qn(){const s=wt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}()+s,d=De();return d[c]===xt?function As(s,o,u){return s[o]=u}(d,c,u?o.call(u):o()):function wp(s,o){return s[o]}(d,c)}function td(s){return o=>{setTimeout(s,void 0,o)}}const Na=class _b extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,g=u||(()=>null),v=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=td(g),d&&(d=td(d)),v&&(v=td(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof ne.w0&&o.add(I),I}};function HS(){return this._results[ku()]()}class Nn{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ku(),c=Nn.prototype;c[u]||(c[u]=HS)}get changes(){return this._changes||(this._changes=new Na)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Bn(o);(this._changesDetected=!function Gd(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ol=(()=>{class s{}return s.__NG_ELEMENT_ID__=GS,s})();const Py=Ol,vb=class extends Py{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,d=Pm(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),uo(c,d,o),new wh(d)}};function GS(){return Fl(En(),De())}function Fl(s,o){return 4&s.type?new vb(o,s,K(s,o)):null}let Oy=(()=>{class s{}return s.__NG_ELEMENT_ID__=wb,s})();function wb(){return h0(En(),De())}const Fh=Oy,ka=class extends Fh{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return K(this._hostTNode,this._hostLView)}get injector(){return new ln(this._hostTNode,this._hostLView)}get parentInjector(){const o=Er(this._hostTNode,this._hostLView);if(If(o)){const u=wr(o,this._hostLView),c=hu(o);return new ln(u[1].data[c+8],u)}return new ln(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=d0(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const v=o.createEmbeddedView(u||{},g);return this.insert(v,d),v}createComponent(o,u,c,d,g){const v=o&&!function Kn(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const F=u||{};I=F.index,c=F.injector,d=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const C=v?o:new mp(rt(o)),S=c||this.parentInjector;if(!g&&null==C.ngModule){const q=(v?S:this.parentInjector).get(rr,null);q&&(g=q)}const R=C.create(S,d,void 0,g);return this.insert(R.hostView,I),R}insert(o,u){const c=o._lView,d=c[1];if(function vs(s){return qr(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=c[3],q=new ka(F,F[6],F[3]);q.detach(q.indexOf(o))}}const g=this._adjustIndex(u),v=this._lContainer;!function VT(s,o,u,c){const d=10+c,g=u.length;c>0&&(u[d-1][4]=o),c<g-10?(o[4]=u[d],lc(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function vR(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(d,c,v,g);const I=wI(g,v),C=c[11],S=ym(C,v[7]);return null!==S&&function gv(s,o,u,c,d,g){c[0]=d,c[6]=o,wm(s,c,u,1,d,g)}(d,v[6],C,c,S,I),o.attachToViewContainerRef(),lc(Fy(v),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=d0(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=$f(this._lContainer,u);c&&(pa(Fy(this._lContainer),u),Kf(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=$f(this._lContainer,u);return c&&null!=pa(Fy(this._lContainer),u)?new wh(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function d0(s){return s[8]}function Fy(s){return s[8]||(s[8]=[])}function h0(s,o){let u;const c=o[s.index];if(qr(c))u=c;else{let d;if(8&s.type)d=Un(c);else{const g=o[11];d=g.createComment("");const v=Kr(s,o);xu(g,ym(g,v),d,function wR(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=u=Xv(c,o,d,s),Vm(o,u)}return new ka(u,s,o)}class ar{constructor(o){this.queryList=o,this.matches=null}clone(){return new ar(this.queryList)}setDirty(){this.queryList.setDirty()}}class Kt{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Kt(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Vh(o,u).matches&&this.queries[u].setDirty()}}class p0{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Ly{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new Ly(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Pa{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Pa(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,u,zS(u,g)),this.matchTNodeWithReadOption(o,u,Je(u,o,g,!1,!1))}else c===Ol?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Je(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===le||d===Oy||d===Ol&&4&u.type)this.addMatch(u.index,-2);else{const g=Je(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function zS(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Eb(s,o,u,c){return-1===u?function ls(s,o){return 11&s.type?K(s,o):4&s.type?Fl(s,o):null}(o,s):-2===u?function Kp(s,o,u){return u===le?K(o,s):u===Ol?Fl(o,s):u===Oy?h0(o,s):void 0}(s,o,c):Mo(s,s[1],u,o)}function g0(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const g=s.data,v=u.matches,I=[];for(let C=0;C<v.length;C+=2){const S=v[C];I.push(S<0?null:Eb(o,g[S],v[C+1],u.metadata.read))}d.matches=I}return d.matches}function ho(s,o,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const v=g0(s,o,d,u);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)c.push(v[I/2]);else{const S=g[I+1],R=o[-C];for(let F=10;F<R.length;F++){const q=R[F];q[17]===q[3]&&ho(q[1],q,S,c)}if(null!==R[9]){const F=R[9];for(let q=0;q<F.length;q++){const ee=F[q];ho(ee[1],ee,S,c)}}}}}return c}function m0(s){const o=De(),u=Ft(),c=nl();ou(c+1);const d=Vh(u,c);if(s.dirty&&ia(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?ho(u,o,c,[]):g0(u,o,d,c);s.reset(g,Ve),s.notifyOnChanges()}return!0}return!1}function Ib(s,o,u,c){const d=Ft();if(d.firstCreatePass){const g=En();(function Yp(s,o,u){null===s.queries&&(s.queries=new Ly),s.queries.track(new Pa(o,u))})(d,new p0(o,u,c),g.index),function Qp(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function bb(s,o,u){const c=new Nn(4==(4&u));Hr(s,o,c,c.destroy),null===o[19]&&(o[19]=new Kt),o[19].queries.push(new ar(c))}(d,De(),u)}function Cb(){return function Ut(s,o){return s[19].queries[o].queryList}(De(),nl())}function Vh(s,o){return s.queries.getByIndex(o)}function Oa(s){const o=rt(s)||hn(s)||wn(s);return null!==o&&o.standalone}function Hy(...s){}const b0=new gt("Application Initializer");let Gy=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Hy,this.reject=Hy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Cp(g))u.push(g);else if(sy(g)){const v=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(In(b0,8))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const D0=new gt("AppId",{providedIn:"root",factory:function T0(){return`${rg()}${rg()}${rg()}`}});function rg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Rr=new gt("Platform Initializer"),S0=new gt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zy=new gt("appBootstrapListener");let Ob=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const ig=new gt("LocaleId",{providedIn:"root",factory:()=>qd(ig,pt.Optional|pt.SkipSelf)||function aA(){return typeof $localize<"u"&&$localize.locale||zc}()}),Wy=new gt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class sg{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Fb=(()=>{class s{compileModuleSync(u){return new Rh(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=Mu(dr(u).declarations).reduce((v,I)=>{const C=rt(I);return C&&v.push(new mp(C)),v},[]);return new sg(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const qy=(()=>Promise.resolve(0))();function sd(s){typeof Zone>"u"?qy.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Rs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Na(!1),this.onMicrotaskEmpty=new Na(!1),this.onStable=new Na(!1),this.onError=new Na(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function od(){let s=Ke.requestAnimationFrame,o=Ke.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function cA(s){const o=()=>{!function lA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ke,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ad(s),s.isCheckStableRunning=!0,x0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ad(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,v,I)=>{try{return Vl(s),u.invokeTask(d,g,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Ul(s)}},onInvoke:(u,c,d,g,v,I,C)=>{try{return Vl(s),u.invoke(d,g,v,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Ul(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,ad(s),x0(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rs.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Rs.isInAngularZone())throw new Ie(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,Bb,Hy,Hy);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Bb={};function x0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ad(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Vl(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Ul(s){s._nesting--,x0(s)}class jb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Na,this.onMicrotaskEmpty=new Na,this.onStable=new Na,this.onError=new Na}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const Hb=new gt(""),Gb=new gt("");let $y,R0=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$y||(function dA(s){$y=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rs.assertNotInAngularZone(),sd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sd(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(In(Rs),In(og),In(Gb))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})(),og=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return $y?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),po=null;const ag=new gt("AllowMultipleToken"),ud=new gt("PlatformDestroyListeners");class Ky{constructor(o,u){this.name=o,this.token=u}}function N0(s,o,u=[]){const c=`Platform: ${o}`,d=new gt(c);return(g=[])=>{let v=Yy();if(!v||v.injector.get(ag,!1)){const I=[...u,...g,{provide:d,useValue:!0}];s?s(I):function Zy(s){if(po&&!po.get(ag,!1))throw new Ie(400,!1);po=s;const o=s.get(qu);(function Wu(s){const o=s.get(Rr,null);o&&o.forEach(u=>u())})(s)}(function $b(s=[],o){return Rc.create({name:o,providers:[{provide:uh,useValue:"platform"},{provide:ud,useValue:new Set([()=>po=null])},...s]})}(I,c))}return function ld(s){const o=Yy();if(!o)throw new Ie(401,!1);return o}()}}function Yy(){return po?.get(qu)??null}let qu=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function hA(s,o){let u;return u="noop"===s?new jb:("zone.js"===s?void 0:s)||new Rs(o),u}(c?.ngZone,function k0(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Rs,useValue:d}];return d.run(()=>{const v=Rc.create({providers:g,parent:this.injector,name:u.moduleType.name}),I=u.create(v),C=I.injector.get(ch,null);if(!C)throw new Ie(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:R=>{C.handleError(R)}});I.onDestroy(()=>{cd(this._modules,I),S.unsubscribe()})}),function Kb(s,o,u){try{const c=u();return Cp(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,d,()=>{const S=I.injector.get(Gy);return S.runInitializers(),S.donePromise.then(()=>(function HC(s){jt(s,"Expected localeId to be defined"),"string"==typeof s&&(zw=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(ig,zc)||zc),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,c=[]){const d=Zb({},c);return function zb(s,o,u){const c=new Rh(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get(Qy);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Ie(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(ud,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(In(Rc))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Zb(s,o){return Array.isArray(o)?o.reduce(Zb,s):{...s,...o}}let Qy=(()=>{class s{constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new O.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Rs.assertNotInAngularZone(),sd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Rs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ue.T)(g,v.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof om;if(!this._injector.get(Gy).done)throw!d&&Oa(u),new Ie(405,false);let v;v=d?u:this._injector.get(M).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function Wb(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Jc),S=v.create(Rc.NULL,[],c||v.selector,I),R=S.location.nativeElement,F=S.injector.get(Hb,null);return F?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),cd(this.components,S),F?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;cd(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(zy,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>cd(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ie(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(In(Rs),In(rr),In(ch))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function cd(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let O0=!0,Yb=!1;function Qb(){return Yb=!0,O0}function dd(){if(Yb)throw new Error("Cannot enable prod mode after platform setup.");O0=!1}let gA=(()=>{class s{}return s.__NG_ELEMENT_ID__=Jb,s})();function Jb(s){return function mA(s,o,u){if(wo(s)&&!u){const c=vr(s.index,o);return new wh(c,c)}return 47&s.type?new wh(o[16],o):null}(En(),De(),16==(16&s))}class e_{constructor(){}supports(o){return _p(o)}create(o){return new tD(o)}}const IA=(s,o)=>o;class tD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||IA}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<fd(c,d,g)?u:c,I=fd(v,d,g),C=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{g||(g=[]);const S=I-d,R=C-d;if(S!=R){for(let q=0;q<S;q++){const ee=q<g.length?g[q]:g[q]=0,Ce=ee+q;R<=Ce&&Ce<S&&(g[q]=ee+1)}g[v.previousIndex]=R-S}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!_p(o))throw new Ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,I)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,I),c=!0),u=u._next}else d=0,function cC(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[ku()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new CA(u,c),g,d),o}_verifyReinsertion(o,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new rD),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class CA{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class rD{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new nD,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fd(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class pd{constructor(){}supports(o){return o instanceof Map||Wm(o)}create(){return new V0}}class V0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Wm(o)))throw new Ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new t_(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class t_{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function U0(){return new n_([new e_])}let n_=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||U0()),deps:[[s,new He,new ie]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Ie(901,!1)}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:U0}),s})();function iD(){return new gg([new pd])}let gg=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||iD()),deps:[[s,new He,new ie]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Ie(901,!1)}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:iD}),s})();const j0=N0(null,"core",[]);let r_=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(In(Qy))},s.\u0275mod=Be({type:s}),s.\u0275inj=kt({}),s})();function mg(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(at,Se,L)=>{L.d(Se,{Z:()=>Ie});var f=L(2090),ne=L(4859),O=L(9681),ue=L(1877);class se{constructor(ve,pe){this._delegate=ve,this.firebase=pe,(0,O._addComponent)(ve,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ve,pe=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const st=this._delegate.container.getProvider(ve);return!st.isInitialized()&&"EXPLICIT"===(null===(Ye=st.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&st.initialize(),st.getImmediate({identifier:pe})}_removeServiceInstance(ve,pe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(pe)}_addComponent(ve){(0,O._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,O._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function ge(){const tt=function fe(tt){const ve={},pe={__esModule:!0,initializeApp:function Me(Ge,j={}){const _e=O.initializeApp(Ge,j);if((0,f.r3)(ve,_e.name))return ve[_e.name];const Q=new tt(_e,pe);return ve[_e.name]=Q,Q},app:st,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function be(Ge){const j=Ge.name,_e=j.replace("-compat","");if(O._registerComponent(Ge)&&"PUBLIC"===Ge.type){const Q=(te=st())=>{if("function"!=typeof te[_e])throw ce.create("invalid-app-argument",{appName:j});return te[_e]()};void 0!==Ge.serviceProps&&(0,f.ZB)(Q,Ge.serviceProps),pe[_e]=Q,tt.prototype[_e]=function(...te){return this._getService.bind(this,j).apply(this,Ge.multipleInstances?te:[])}}return"PUBLIC"===Ge.type?pe[_e]:null},removeApp:function Ye(Ge){delete ve[Ge]},useAsService:function je(Ge,j){return"serverAuth"===j?null:j},modularAPIs:O}};function st(Ge){if(!(0,f.r3)(ve,Ge=Ge||O._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:Ge});return ve[Ge]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function Ee(){return Object.keys(ve).map(Ge=>ve[Ge])}}),st.App=tt,pe}(se);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function ve(pe){(0,f.ZB)(tt,pe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),tt}(),G=new ue.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=H;!function Re(tt){(0,O.registerVersion)("@firebase/app-compat","0.1.32",tt)}()},9681:(at,Se,L)=>{L.r(Se),L.d(Se,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Hi,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>Qt,_addOrOverwriteComponent:()=>Jt,_apps:()=>an,_clearComponents:()=>_o,_components:()=>On,_getProvider:()=>kt,_registerComponent:()=>Nr,_removeServiceInstance:()=>un,deleteApp:()=>pt,getApp:()=>ui,getApps:()=>Ii,initializeApp:()=>fs,onLog:()=>Fn,registerVersion:()=>Ci,setLogLevel:()=>Gi});var f=L(5861),ne=L(4859),O=L(1877),ue=L(2090),se=L(8766);class he{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map($=>{if(function ce(B){return"VERSION"===B.getComponent()?.type}($)){const Te=$.getImmediate();return`${Te.library}/${Te.version}`}return null}).filter($=>$).join(" ")}}const fe="@firebase/app",H=new O.Yd("@firebase/app"),jt="[DEFAULT]",qe={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},an=new Map,On=new Map;function Qt(B,W){try{B.container.addComponent(W)}catch($){H.debug(`Component ${W.name} failed to register with FirebaseApp ${B.name}`,$)}}function Jt(B,W){B.container.addOrOverwriteComponent(W)}function Nr(B){const W=B.name;if(On.has(W))return H.debug(`There were multiple attempts to register component ${W}.`),!1;On.set(W,B);for(const $ of an.values())Qt($,B);return!0}function kt(B,W){const $=B.container.getProvider("heartbeat").getImmediate({optional:!0});return $&&$.triggerHeartbeat(),B.container.getProvider(W)}function un(B,W,$=jt){kt(B,W).clearInstance($)}function _o(){On.clear()}const Tr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kr{constructor(W,$,Te){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},$),this._name=$.name,this._automaticDataCollectionEnabled=$.automaticDataCollectionEnabled,this._container=Te,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const Hi="9.9.3";function fs(B,W={}){"object"!=typeof W&&(W={name:W});const $=Object.assign({name:jt,automaticDataCollectionEnabled:!1},W),Te=$.name;if("string"!=typeof Te||!Te)throw Tr.create("bad-app-name",{appName:String(Te)});const Be=an.get(Te);if(Be){if((0,ue.vZ)(B,Be.options)&&(0,ue.vZ)($,Be.config))return Be;throw Tr.create("duplicate-app",{appName:Te})}const ut=new ne.H0(Te);for(const en of On.values())ut.addComponent(en);const dn=new kr(B,$,ut);return an.set(Te,dn),dn}function ui(B=jt){const W=an.get(B);if(!W)throw Tr.create("no-app",{appName:B});return W}function Ii(){return Array.from(an.values())}function pt(B){return gn.apply(this,arguments)}function gn(){return(gn=(0,f.Z)(function*(B){const W=B.name;an.has(W)&&(an.delete(W),yield Promise.all(B.container.getProviders().map($=>$.delete())),B.isDeleted=!0)})).apply(this,arguments)}function Ci(B,W,$){var Te;let Be=null!==(Te=qe[B])&&void 0!==Te?Te:B;$&&(Be+=`-${$}`);const ut=Be.match(/\s|\//),dn=W.match(/\s|\//);if(ut||dn){const en=[`Unable to register library "${Be}" with version "${W}":`];return ut&&en.push(`library name "${Be}" contains illegal characters (whitespace or "/")`),ut&&dn&&en.push("and"),dn&&en.push(`version name "${W}" contains illegal characters (whitespace or "/")`),void H.warn(en.join(" "))}Nr(new ne.wA(`${Be}-version`,()=>({library:Be,version:W}),"VERSION"))}function Fn(B,W){if(null!==B&&"function"!=typeof B)throw Tr.create("invalid-log-argument");(0,O.Am)(B,W)}function Gi(B){(0,O.Ub)(B)}const _n="firebase-heartbeat-store";let Ls=null;function mn(){return Ls||(Ls=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(B,W)=>{0===W&&B.createObjectStore(_n)}}).catch(B=>{throw Tr.create("idb-open",{originalErrorMessage:B.message})})),Ls}function Ke(){return(Ke=(0,f.Z)(function*(B){var W;try{return(yield mn()).transaction(_n).objectStore(_n).get(vn(B))}catch($){if($ instanceof ue.ZR)H.warn($.message);else{const Te=Tr.create("idb-get",{originalErrorMessage:null===(W=$)||void 0===W?void 0:W.message});H.warn(Te.message)}}})).apply(this,arguments)}function Ko(B,W){return cr.apply(this,arguments)}function cr(){return(cr=(0,f.Z)(function*(B,W){var $;try{const Be=(yield mn()).transaction(_n,"readwrite");return yield Be.objectStore(_n).put(W,vn(B)),Be.done}catch(Te){if(Te instanceof ue.ZR)H.warn(Te.message);else{const Be=Tr.create("idb-set",{originalErrorMessage:null===($=Te)||void 0===$?void 0:$.message});H.warn(Be.message)}}})).apply(this,arguments)}function vn(B){return`${B.name}!${B.options.appId}`}class Vs{constructor(W){this.container=W,this._heartbeatsCache=null;const $=this.container.getProvider("app").getImmediate();this._storage=new Vt($),this._heartbeatsCachePromise=this._storage.read().then(Te=>(this._heartbeatsCache=Te,Te))}triggerHeartbeat(){var W=this;return(0,f.Z)(function*(){const Te=W.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Be=Xt();if(null===W._heartbeatsCache&&(W._heartbeatsCache=yield W._heartbeatsCachePromise),W._heartbeatsCache.lastSentHeartbeatDate!==Be&&!W._heartbeatsCache.heartbeats.some(ut=>ut.date===Be))return W._heartbeatsCache.heartbeats.push({date:Be,agent:Te}),W._heartbeatsCache.heartbeats=W._heartbeatsCache.heartbeats.filter(ut=>{const dn=new Date(ut.date).valueOf();return Date.now()-dn<=2592e6}),W._storage.overwrite(W._heartbeatsCache)})()}getHeartbeatsHeader(){var W=this;return(0,f.Z)(function*(){if(null===W._heartbeatsCache&&(yield W._heartbeatsCachePromise),null===W._heartbeatsCache||0===W._heartbeatsCache.heartbeats.length)return"";const $=Xt(),{heartbeatsToSend:Te,unsentEntries:Be}=function Wi(B,W=1024){const $=[];let Te=B.slice();for(const Be of B){const ut=$.find(dn=>dn.agent===Be.agent);if(ut){if(ut.dates.push(Be.date),Y($)>W){ut.dates.pop();break}}else if($.push({agent:Be.agent,dates:[Be.date]}),Y($)>W){$.pop();break}Te=Te.slice(1)}return{heartbeatsToSend:$,unsentEntries:Te}}(W._heartbeatsCache.heartbeats),ut=(0,ue.L)(JSON.stringify({version:2,heartbeats:Te}));return W._heartbeatsCache.lastSentHeartbeatDate=$,Be.length>0?(W._heartbeatsCache.heartbeats=Be,yield W._storage.overwrite(W._heartbeatsCache)):(W._heartbeatsCache.heartbeats=[],W._storage.overwrite(W._heartbeatsCache)),ut})()}}function Xt(){return(new Date).toISOString().substring(0,10)}class Vt{constructor(W){this.app=W,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var W=this;return(0,f.Z)(function*(){return(yield W._canUseIndexedDBPromise)&&(yield function nt(B){return Ke.apply(this,arguments)}(W.app))||{heartbeats:[]}})()}overwrite(W){var $=this;return(0,f.Z)(function*(){var Te;if(yield $._canUseIndexedDBPromise){const ut=yield $.read();return Ko($.app,{lastSentHeartbeatDate:null!==(Te=W.lastSentHeartbeatDate)&&void 0!==Te?Te:ut.lastSentHeartbeatDate,heartbeats:W.heartbeats})}})()}add(W){var $=this;return(0,f.Z)(function*(){var Te;if(yield $._canUseIndexedDBPromise){const ut=yield $.read();return Ko($.app,{lastSentHeartbeatDate:null!==(Te=W.lastSentHeartbeatDate)&&void 0!==Te?Te:ut.lastSentHeartbeatDate,heartbeats:[...ut.heartbeats,...W.heartbeats]})}})()}}function Y(B){return(0,ue.L)(JSON.stringify({version:2,heartbeats:B})).length}!function z(B){Nr(new ne.wA("platform-logger",W=>new he(W),"PRIVATE")),Nr(new ne.wA("heartbeat",W=>new Vs(W),"PRIVATE")),Ci(fe,"0.7.31",B),Ci(fe,"0.7.31","esm2017"),Ci("fire-js","")}("")},4859:(at,Se,L)=>{L.d(Se,{H0:()=>fe,wA:()=>O,zt:()=>se});var f=L(5861),ne=L(2090);class O{constructor(H,G,X){this.name=H,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ue="[DEFAULT]";class se{constructor(H,G){this.name=H,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const G=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(G)){const X=new ne.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:G});Ue&&X.resolve(Ue)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(H){var G;const X=this.normalizeInstanceIdentifier(H?.identifier),Ue=null!==(G=H?.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Re){if(Ue)return null;throw Re}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ce(ge){return"EAGER"===ge.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[G,X]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(G);try{const Re=this.getOrInitializeService({instanceIdentifier:Ue});X.resolve(Re)}catch{}}}}clearInstance(H=ue){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,f.Z)(function*(){const G=Array.from(H.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ue){return this.instances.has(H)}getOptions(H=ue){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:G={}}=H,X=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[Re,Ie]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Re)&&Ie.resolve(Ue);return Ue}onInit(H,G){var X;const Ue=this.normalizeInstanceIdentifier(G),Re=null!==(X=this.onInitCallbacks.get(Ue))&&void 0!==X?X:new Set;Re.add(H),this.onInitCallbacks.set(Ue,Re);const Ie=this.instances.get(Ue);return Ie&&H(Ie,Ue),()=>{Re.delete(H)}}invokeOnInitCallbacks(H,G){const X=this.onInitCallbacks.get(G);if(X)for(const Ue of X)try{Ue(H,G)}catch{}}getOrInitializeService({instanceIdentifier:H,options:G={}}){let X=this.instances.get(H);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=H,ge===ue?void 0:ge),options:G}),this.instances.set(H,X),this.instancesOptions.set(H,G),this.invokeOnInitCallbacks(X,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,X)}catch{}var ge;return X||null}normalizeInstanceIdentifier(H=ue){return this.component?this.component.multipleInstances?H:ue:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const G=this.getProvider(H.name);if(G.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);G.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const G=new se(H,this);return this.providers.set(H,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Se,L)=>{L.d(Se,{Am:()=>ge,Ub:()=>fe,Yd:()=>ce,in:()=>ne});const f=[];var ne=(()=>{return(H=ne||(ne={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",ne;var H})();const O={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},ue=ne.INFO,se={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},he=(H,G,...X)=>{if(G<H.logLevel)return;const Ue=(new Date).toISOString(),Re=se[G];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Re](`[${Ue}]  ${H.name}:`,...X)};class ce{constructor(G){this.name=G,this._logLevel=ue,this._logHandler=he,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ne))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...G),this._logHandler(this,ne.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...G),this._logHandler(this,ne.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...G),this._logHandler(this,ne.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...G),this._logHandler(this,ne.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...G),this._logHandler(this,ne.ERROR,...G)}}function fe(H){f.forEach(G=>{G.setLogLevel(H)})}function ge(H,G){for(const X of f){let Ue=null;G&&G.level&&(Ue=O[G.level]),X.userLogHandler=null===H?null:(Re,Ie,...tt)=>{const ve=tt.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");Ie>=(Ue??Re.logLevel)&&H({level:ne[Ie].toLowerCase(),message:ve,args:tt,type:Re.name})}}}},8766:(at,Se,L)=>{L.d(Se,{Lj:()=>Me,X3:()=>st});var f=L(5861);let O,ue;const ce=new WeakMap,fe=new WeakMap,ge=new WeakMap,H=new WeakMap,G=new WeakMap;let Re={get(j,_e,Q){if(j instanceof IDBTransaction){if("done"===_e)return fe.get(j);if("objectStoreNames"===_e)return j.objectStoreNames||ge.get(j);if("store"===_e)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return pe(j[_e])},set:(j,_e,Q)=>(j[_e]=Q,!0),has:(j,_e)=>j instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in j};function ve(j){return"function"==typeof j?function tt(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(..._e){return j.apply(Ye(this),_e),pe(ce.get(this))}:function(..._e){return pe(j.apply(Ye(this),_e))}:function(_e,...Q){const te=j.call(Ye(this),_e,...Q);return ge.set(te,_e.sort?_e.sort():[_e]),pe(te)}}(j):(j instanceof IDBTransaction&&function Ue(j){if(fe.has(j))return;const _e=new Promise((Q,te)=>{const oe=()=>{j.removeEventListener("complete",re),j.removeEventListener("error",Le),j.removeEventListener("abort",Le)},re=()=>{Q(),oe()},Le=()=>{te(j.error||new DOMException("AbortError","AbortError")),oe()};j.addEventListener("complete",re),j.addEventListener("error",Le),j.addEventListener("abort",Le)});fe.set(j,_e)}(j),((j,_e)=>_e.some(Q=>j instanceof Q))(j,function se(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Re):j)}function pe(j){if(j instanceof IDBRequest)return function X(j){const _e=new Promise((Q,te)=>{const oe=()=>{j.removeEventListener("success",re),j.removeEventListener("error",Le)},re=()=>{Q(pe(j.result)),oe()},Le=()=>{te(j.error),oe()};j.addEventListener("success",re),j.addEventListener("error",Le)});return _e.then(Q=>{Q instanceof IDBCursor&&ce.set(Q,j)}).catch(()=>{}),G.set(_e,j),_e}(j);if(H.has(j))return H.get(j);const _e=ve(j);return _e!==j&&(H.set(j,_e),G.set(_e,j)),_e}const Ye=j=>G.get(j);function st(j,_e,{blocked:Q,upgrade:te,blocking:oe,terminated:re}={}){const Le=indexedDB.open(j,_e),Fe=pe(Le);return te&&Le.addEventListener("upgradeneeded",dt=>{te(pe(Le.result),dt.oldVersion,dt.newVersion,pe(Le.transaction))}),Q&&Le.addEventListener("blocked",()=>Q()),Fe.then(dt=>{re&&dt.addEventListener("close",()=>re()),oe&&dt.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Fe}function Me(j,{blocked:_e}={}){const Q=indexedDB.deleteDatabase(j);return _e&&Q.addEventListener("blocked",()=>_e()),pe(Q).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],je=new Map;function Ge(j,_e){if(!(j instanceof IDBDatabase)||_e in j||"string"!=typeof _e)return;if(je.get(_e))return je.get(_e);const Q=_e.replace(/FromIndex$/,""),te=_e!==Q,oe=be.includes(Q);if(!(Q in(te?IDBIndex:IDBObjectStore).prototype)||!oe&&!Ee.includes(Q))return;const re=function(){var Le=(0,f.Z)(function*(Fe,...dt){const Wt=this.transaction(Fe,oe?"readwrite":"readonly");let jt=Wt.store;return te&&(jt=jt.index(dt.shift())),(yield Promise.all([jt[Q](...dt),oe&&Wt.done]))[0]});return function(dt){return Le.apply(this,arguments)}}();return je.set(_e,re),re}!function Ie(j){Re=j(Re)}(j=>({...j,get:(_e,Q,te)=>Ge(_e,Q)||j.get(_e,Q,te),has:(_e,Q)=>!!Ge(_e,Q)||j.has(_e,Q)}))},5861:(at,Se,L)=>{function f(O,ue,se,he,ce,fe,ge){try{var H=O[fe](ge),G=H.value}catch(X){return void se(X)}H.done?ue(G):Promise.resolve(G).then(he,ce)}function ne(O){return function(){var ue=this,se=arguments;return new Promise(function(he,ce){var fe=O.apply(ue,se);function ge(G){f(fe,he,ce,ge,H,"next",G)}function H(G){f(fe,he,ce,ge,H,"throw",G)}ge(void 0)})}}L.d(Se,{Z:()=>ne})}},at=>{at(at.s=5056)}]);